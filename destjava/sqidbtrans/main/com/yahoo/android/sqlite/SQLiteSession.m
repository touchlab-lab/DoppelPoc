//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/squidb/squidb-ios/src/com/yahoo/android/sqlite/SQLiteSession.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "com/yahoo/android/sqlite/CursorWindow.h"
#include "com/yahoo/android/sqlite/DatabaseUtils.h"
#include "com/yahoo/android/sqlite/SQLiteConnection.h"
#include "com/yahoo/android/sqlite/SQLiteConnectionPool.h"
#include "com/yahoo/android/sqlite/SQLiteSession.h"
#include "com/yahoo/android/sqlite/SQLiteStatementInfo.h"
#include "com/yahoo/android/sqlite/SQLiteTransactionListener.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/IllegalStateException.h"
#include "java/lang/InterruptedException.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/Thread.h"

@class ComYahooAndroidSqliteSQLiteSession_Transaction;

@interface ComYahooAndroidSqliteSQLiteSession () {
 @public
  ComYahooAndroidSqliteSQLiteConnectionPool *mConnectionPool_;
  ComYahooAndroidSqliteSQLiteConnection *mConnection_;
  jint mConnectionFlags_;
  jint mConnectionUseCount_;
  ComYahooAndroidSqliteSQLiteSession_Transaction *mTransactionPool_;
  ComYahooAndroidSqliteSQLiteSession_Transaction *mTransactionStack_;
}

- (void)beginTransactionUncheckedWithInt:(jint)transactionMode
withComYahooAndroidSqliteSQLiteTransactionListener:(id<ComYahooAndroidSqliteSQLiteTransactionListener>)transactionListener
                                 withInt:(jint)connectionFlags;

- (void)endTransactionUncheckedWithBoolean:(jboolean)yielding;

- (jboolean)yieldTransactionUncheckedWithLong:(jlong)sleepAfterYieldDelayMillis;

- (jboolean)executeSpecialWithNSString:(NSString *)sql
                     withNSObjectArray:(IOSObjectArray *)bindArgs
                               withInt:(jint)connectionFlags;

- (void)acquireConnectionWithNSString:(NSString *)sql
                              withInt:(jint)connectionFlags;

- (void)releaseConnection;

- (void)throwIfNoTransaction;

- (void)throwIfTransactionMarkedSuccessful;

- (void)throwIfNestedTransaction;

- (ComYahooAndroidSqliteSQLiteSession_Transaction *)obtainTransactionWithInt:(jint)mode
                          withComYahooAndroidSqliteSQLiteTransactionListener:(id<ComYahooAndroidSqliteSQLiteTransactionListener>)listener;

- (void)recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction:(ComYahooAndroidSqliteSQLiteSession_Transaction *)transaction;

@end

J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession, mConnectionPool_, ComYahooAndroidSqliteSQLiteConnectionPool *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession, mConnection_, ComYahooAndroidSqliteSQLiteConnection *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession, mTransactionPool_, ComYahooAndroidSqliteSQLiteSession_Transaction *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession, mTransactionStack_, ComYahooAndroidSqliteSQLiteSession_Transaction *)

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_beginTransactionUncheckedWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_withInt_(ComYahooAndroidSqliteSQLiteSession *self, jint transactionMode, id<ComYahooAndroidSqliteSQLiteTransactionListener> transactionListener, jint connectionFlags);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_endTransactionUncheckedWithBoolean_(ComYahooAndroidSqliteSQLiteSession *self, jboolean yielding);

__attribute__((unused)) static jboolean ComYahooAndroidSqliteSQLiteSession_yieldTransactionUncheckedWithLong_(ComYahooAndroidSqliteSQLiteSession *self, jlong sleepAfterYieldDelayMillis);

__attribute__((unused)) static jboolean ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(ComYahooAndroidSqliteSQLiteSession *self, NSString *sql, IOSObjectArray *bindArgs, jint connectionFlags);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(ComYahooAndroidSqliteSQLiteSession *self, NSString *sql, jint connectionFlags);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_releaseConnection(ComYahooAndroidSqliteSQLiteSession *self);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(ComYahooAndroidSqliteSQLiteSession *self);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(ComYahooAndroidSqliteSQLiteSession *self);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_throwIfNestedTransaction(ComYahooAndroidSqliteSQLiteSession *self);

__attribute__((unused)) static ComYahooAndroidSqliteSQLiteSession_Transaction *ComYahooAndroidSqliteSQLiteSession_obtainTransactionWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_(ComYahooAndroidSqliteSQLiteSession *self, jint mode, id<ComYahooAndroidSqliteSQLiteTransactionListener> listener);

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction_(ComYahooAndroidSqliteSQLiteSession *self, ComYahooAndroidSqliteSQLiteSession_Transaction *transaction);

@interface ComYahooAndroidSqliteSQLiteSession_Transaction : NSObject {
 @public
  ComYahooAndroidSqliteSQLiteSession_Transaction *mParent_;
  jint mMode_;
  id<ComYahooAndroidSqliteSQLiteTransactionListener> mListener_;
  jboolean mMarkedSuccessful_;
  jboolean mChildFailed_;
}

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ComYahooAndroidSqliteSQLiteSession_Transaction)

J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession_Transaction, mParent_, ComYahooAndroidSqliteSQLiteSession_Transaction *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteSession_Transaction, mListener_, id<ComYahooAndroidSqliteSQLiteTransactionListener>)

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteSession_Transaction_init(ComYahooAndroidSqliteSQLiteSession_Transaction *self);

__attribute__((unused)) static ComYahooAndroidSqliteSQLiteSession_Transaction *new_ComYahooAndroidSqliteSQLiteSession_Transaction_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static ComYahooAndroidSqliteSQLiteSession_Transaction *create_ComYahooAndroidSqliteSQLiteSession_Transaction_init();

J2OBJC_TYPE_LITERAL_HEADER(ComYahooAndroidSqliteSQLiteSession_Transaction)

@implementation ComYahooAndroidSqliteSQLiteSession

- (instancetype)initWithComYahooAndroidSqliteSQLiteConnectionPool:(ComYahooAndroidSqliteSQLiteConnectionPool *)connectionPool {
  ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(self, connectionPool);
  return self;
}

- (jboolean)hasTransaction {
  return mTransactionStack_ != nil;
}

- (jboolean)hasNestedTransaction {
  return mTransactionStack_ != nil && mTransactionStack_->mParent_ != nil;
}

- (jboolean)hasConnection {
  return mConnection_ != nil;
}

- (void)beginTransactionWithInt:(jint)transactionMode
withComYahooAndroidSqliteSQLiteTransactionListener:(id<ComYahooAndroidSqliteSQLiteTransactionListener>)transactionListener
                        withInt:(jint)connectionFlags {
  ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(self);
  ComYahooAndroidSqliteSQLiteSession_beginTransactionUncheckedWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_withInt_(self, transactionMode, transactionListener, connectionFlags);
}

- (void)beginTransactionUncheckedWithInt:(jint)transactionMode
withComYahooAndroidSqliteSQLiteTransactionListener:(id<ComYahooAndroidSqliteSQLiteTransactionListener>)transactionListener
                                 withInt:(jint)connectionFlags {
  ComYahooAndroidSqliteSQLiteSession_beginTransactionUncheckedWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_withInt_(self, transactionMode, transactionListener, connectionFlags);
}

- (void)setTransactionSuccessful {
  ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(self);
  ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(self);
  ((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(mTransactionStack_))->mMarkedSuccessful_ = true;
}

- (void)endTransaction {
  ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(self);
  JreAssert((mConnection_ != nil), (@"com/yahoo/android/sqlite/SQLiteSession.java:389 condition failed: assert mConnection != null;"));
  ComYahooAndroidSqliteSQLiteSession_endTransactionUncheckedWithBoolean_(self, false);
}

- (void)endTransactionUncheckedWithBoolean:(jboolean)yielding {
  ComYahooAndroidSqliteSQLiteSession_endTransactionUncheckedWithBoolean_(self, yielding);
}

- (jboolean)yieldTransactionWithLong:(jlong)sleepAfterYieldDelayMillis
                         withBoolean:(jboolean)throwIfUnsafe {
  if (throwIfUnsafe) {
    ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(self);
    ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(self);
    ComYahooAndroidSqliteSQLiteSession_throwIfNestedTransaction(self);
  }
  else {
    if (mTransactionStack_ == nil || mTransactionStack_->mMarkedSuccessful_ || mTransactionStack_->mParent_ != nil) {
      return false;
    }
  }
  JreAssert((mConnection_ != nil), (@"com/yahoo/android/sqlite/SQLiteSession.java:502 condition failed: assert mConnection != null;"));
  if (((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(mTransactionStack_))->mChildFailed_) {
    return false;
  }
  return ComYahooAndroidSqliteSQLiteSession_yieldTransactionUncheckedWithLong_(self, sleepAfterYieldDelayMillis);
}

- (jboolean)yieldTransactionUncheckedWithLong:(jlong)sleepAfterYieldDelayMillis {
  return ComYahooAndroidSqliteSQLiteSession_yieldTransactionUncheckedWithLong_(self, sleepAfterYieldDelayMillis);
}

- (void)prepareWithNSString:(NSString *)sql
                    withInt:(jint)connectionFlags
withComYahooAndroidSqliteSQLiteStatementInfo:(ComYahooAndroidSqliteSQLiteStatementInfo *)outStatementInfo {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) prepareWithNSString:sql withComYahooAndroidSqliteSQLiteStatementInfo:outStatementInfo];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (void)executeWithNSString:(NSString *)sql
          withNSObjectArray:(IOSObjectArray *)bindArgs
                    withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    return;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeWithNSString:sql withNSObjectArray:bindArgs];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (jlong)executeForLongWithNSString:(NSString *)sql
                  withNSObjectArray:(IOSObjectArray *)bindArgs
                            withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    return 0;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    return [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeForLongWithNSString:sql withNSObjectArray:bindArgs];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (NSString *)executeForStringWithNSString:(NSString *)sql
                         withNSObjectArray:(IOSObjectArray *)bindArgs
                                   withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    return nil;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    return [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeForStringWithNSString:sql withNSObjectArray:bindArgs];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (jint)executeForChangedRowCountWithNSString:(NSString *)sql
                            withNSObjectArray:(IOSObjectArray *)bindArgs
                                      withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    return 0;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    return [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeForChangedRowCountWithNSString:sql withNSObjectArray:bindArgs];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (jlong)executeForLastInsertedRowIdWithNSString:(NSString *)sql
                               withNSObjectArray:(IOSObjectArray *)bindArgs
                                         withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    return 0;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    return [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeForLastInsertedRowIdWithNSString:sql withNSObjectArray:bindArgs];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (jint)executeForCursorWindowWithNSString:(NSString *)sql
                         withNSObjectArray:(IOSObjectArray *)bindArgs
     withComYahooAndroidSqliteCursorWindow:(ComYahooAndroidSqliteCursorWindow *)window
                                   withInt:(jint)startPos
                                   withInt:(jint)requiredPos
                               withBoolean:(jboolean)countAllRows
                                   withInt:(jint)connectionFlags {
  if (sql == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"sql must not be null.");
  }
  if (window == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"window must not be null.");
  }
  if (ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags)) {
    [((ComYahooAndroidSqliteCursorWindow *) nil_chk(window)) clear];
    return 0;
  }
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
  @try {
    return [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(mConnection_)) executeForCursorWindowWithNSString:sql withNSObjectArray:bindArgs withComYahooAndroidSqliteCursorWindow:window withInt:startPos withInt:requiredPos withBoolean:countAllRows];
  }
  @finally {
    ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
  }
}

- (jboolean)executeSpecialWithNSString:(NSString *)sql
                     withNSObjectArray:(IOSObjectArray *)bindArgs
                               withInt:(jint)connectionFlags {
  return ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(self, sql, bindArgs, connectionFlags);
}

- (void)acquireConnectionWithNSString:(NSString *)sql
                              withInt:(jint)connectionFlags {
  ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, sql, connectionFlags);
}

- (void)releaseConnection {
  ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
}

- (void)throwIfNoTransaction {
  ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(self);
}

- (void)throwIfTransactionMarkedSuccessful {
  ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(self);
}

- (void)throwIfNestedTransaction {
  ComYahooAndroidSqliteSQLiteSession_throwIfNestedTransaction(self);
}

- (ComYahooAndroidSqliteSQLiteSession_Transaction *)obtainTransactionWithInt:(jint)mode
                          withComYahooAndroidSqliteSQLiteTransactionListener:(id<ComYahooAndroidSqliteSQLiteTransactionListener>)listener {
  return ComYahooAndroidSqliteSQLiteSession_obtainTransactionWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_(self, mode, listener);
}

- (void)recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction:(ComYahooAndroidSqliteSQLiteSession_Transaction *)transaction {
  ComYahooAndroidSqliteSQLiteSession_recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction_(self, transaction);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComYahooAndroidSqliteSQLiteConnectionPool:", "SQLiteSession", NULL, 0x1, NULL, NULL },
    { "hasTransaction", NULL, "Z", 0x1, NULL, NULL },
    { "hasNestedTransaction", NULL, "Z", 0x1, NULL, NULL },
    { "hasConnection", NULL, "Z", 0x1, NULL, NULL },
    { "beginTransactionWithInt:withComYahooAndroidSqliteSQLiteTransactionListener:withInt:", "beginTransaction", "V", 0x1, NULL, NULL },
    { "beginTransactionUncheckedWithInt:withComYahooAndroidSqliteSQLiteTransactionListener:withInt:", "beginTransactionUnchecked", "V", 0x2, NULL, NULL },
    { "setTransactionSuccessful", NULL, "V", 0x1, NULL, NULL },
    { "endTransaction", NULL, "V", 0x1, NULL, NULL },
    { "endTransactionUncheckedWithBoolean:", "endTransactionUnchecked", "V", 0x2, NULL, NULL },
    { "yieldTransactionWithLong:withBoolean:", "yieldTransaction", "Z", 0x1, NULL, NULL },
    { "yieldTransactionUncheckedWithLong:", "yieldTransactionUnchecked", "Z", 0x2, NULL, NULL },
    { "prepareWithNSString:withInt:withComYahooAndroidSqliteSQLiteStatementInfo:", "prepare", "V", 0x1, NULL, NULL },
    { "executeWithNSString:withNSObjectArray:withInt:", "execute", "V", 0x1, NULL, NULL },
    { "executeForLongWithNSString:withNSObjectArray:withInt:", "executeForLong", "J", 0x1, NULL, NULL },
    { "executeForStringWithNSString:withNSObjectArray:withInt:", "executeForString", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "executeForChangedRowCountWithNSString:withNSObjectArray:withInt:", "executeForChangedRowCount", "I", 0x1, NULL, NULL },
    { "executeForLastInsertedRowIdWithNSString:withNSObjectArray:withInt:", "executeForLastInsertedRowId", "J", 0x1, NULL, NULL },
    { "executeForCursorWindowWithNSString:withNSObjectArray:withComYahooAndroidSqliteCursorWindow:withInt:withInt:withBoolean:withInt:", "executeForCursorWindow", "I", 0x1, NULL, NULL },
    { "executeSpecialWithNSString:withNSObjectArray:withInt:", "executeSpecial", "Z", 0x2, NULL, NULL },
    { "acquireConnectionWithNSString:withInt:", "acquireConnection", "V", 0x2, NULL, NULL },
    { "releaseConnection", NULL, "V", 0x2, NULL, NULL },
    { "throwIfNoTransaction", NULL, "V", 0x2, NULL, NULL },
    { "throwIfTransactionMarkedSuccessful", NULL, "V", 0x2, NULL, NULL },
    { "throwIfNestedTransaction", NULL, "V", 0x2, NULL, NULL },
    { "obtainTransactionWithInt:withComYahooAndroidSqliteSQLiteTransactionListener:", "obtainTransaction", "Lcom.yahoo.android.sqlite.SQLiteSession$Transaction;", 0x2, NULL, NULL },
    { "recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction:", "recycleTransaction", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "mConnectionPool_", NULL, 0x12, "Lcom.yahoo.android.sqlite.SQLiteConnectionPool;", NULL, NULL, .constantValue.asLong = 0 },
    { "mConnection_", NULL, 0x2, "Lcom.yahoo.android.sqlite.SQLiteConnection;", NULL, NULL, .constantValue.asLong = 0 },
    { "mConnectionFlags_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "mConnectionUseCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "mTransactionPool_", NULL, 0x2, "Lcom.yahoo.android.sqlite.SQLiteSession$Transaction;", NULL, NULL, .constantValue.asLong = 0 },
    { "mTransactionStack_", NULL, 0x2, "Lcom.yahoo.android.sqlite.SQLiteSession$Transaction;", NULL, NULL, .constantValue.asLong = 0 },
    { "TRANSACTION_MODE_DEFERRED", "TRANSACTION_MODE_DEFERRED", 0x19, "I", NULL, NULL, .constantValue.asInt = ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_DEFERRED },
    { "TRANSACTION_MODE_IMMEDIATE", "TRANSACTION_MODE_IMMEDIATE", 0x19, "I", NULL, NULL, .constantValue.asInt = ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_IMMEDIATE },
    { "TRANSACTION_MODE_EXCLUSIVE", "TRANSACTION_MODE_EXCLUSIVE", 0x19, "I", NULL, NULL, .constantValue.asInt = ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_EXCLUSIVE },
  };
  static const char *inner_classes[] = {"Lcom.yahoo.android.sqlite.SQLiteSession$Transaction;"};
  static const J2ObjcClassInfo _ComYahooAndroidSqliteSQLiteSession = { 2, "SQLiteSession", "com.yahoo.android.sqlite", NULL, 0x11, 26, methods, 9, fields, 0, NULL, 1, inner_classes, NULL, NULL };
  return &_ComYahooAndroidSqliteSQLiteSession;
}

@end

void ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(ComYahooAndroidSqliteSQLiteSession *self, ComYahooAndroidSqliteSQLiteConnectionPool *connectionPool) {
  NSObject_init(self);
  if (connectionPool == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(@"connectionPool must not be null");
  }
  self->mConnectionPool_ = connectionPool;
}

ComYahooAndroidSqliteSQLiteSession *new_ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(ComYahooAndroidSqliteSQLiteConnectionPool *connectionPool) {
  ComYahooAndroidSqliteSQLiteSession *self = [ComYahooAndroidSqliteSQLiteSession alloc];
  ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(self, connectionPool);
  return self;
}

ComYahooAndroidSqliteSQLiteSession *create_ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(ComYahooAndroidSqliteSQLiteConnectionPool *connectionPool) {
  return new_ComYahooAndroidSqliteSQLiteSession_initWithComYahooAndroidSqliteSQLiteConnectionPool_(connectionPool);
}

void ComYahooAndroidSqliteSQLiteSession_beginTransactionUncheckedWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_withInt_(ComYahooAndroidSqliteSQLiteSession *self, jint transactionMode, id<ComYahooAndroidSqliteSQLiteTransactionListener> transactionListener, jint connectionFlags) {
  if (self->mTransactionStack_ == nil) {
    ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(self, nil, connectionFlags);
  }
  @try {
    if (self->mTransactionStack_ == nil) {
      switch (transactionMode) {
        case ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_IMMEDIATE:
        [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"BEGIN IMMEDIATE;" withNSObjectArray:nil];
        break;
        case ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_EXCLUSIVE:
        [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"BEGIN EXCLUSIVE;" withNSObjectArray:nil];
        break;
        default:
        [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"BEGIN;" withNSObjectArray:nil];
        break;
      }
    }
    if (transactionListener != nil) {
      @try {
        [transactionListener onBegin];
      }
      @catch (JavaLangRuntimeException *ex) {
        if (self->mTransactionStack_ == nil) {
          [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"ROLLBACK;" withNSObjectArray:nil];
        }
        @throw ex;
      }
    }
    ComYahooAndroidSqliteSQLiteSession_Transaction *transaction = ComYahooAndroidSqliteSQLiteSession_obtainTransactionWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_(self, transactionMode, transactionListener);
    ((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(transaction))->mParent_ = self->mTransactionStack_;
    self->mTransactionStack_ = transaction;
  }
  @finally {
    if (self->mTransactionStack_ == nil) {
      ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
    }
  }
}

void ComYahooAndroidSqliteSQLiteSession_endTransactionUncheckedWithBoolean_(ComYahooAndroidSqliteSQLiteSession *self, jboolean yielding) {
  ComYahooAndroidSqliteSQLiteSession_Transaction *top = self->mTransactionStack_;
  jboolean successful = (((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(top))->mMarkedSuccessful_ || yielding) && !top->mChildFailed_;
  JavaLangRuntimeException *listenerException = nil;
  id<ComYahooAndroidSqliteSQLiteTransactionListener> listener = top->mListener_;
  if (listener != nil) {
    @try {
      if (successful) {
        [listener onCommit];
      }
      else {
        [listener onRollback];
      }
    }
    @catch (JavaLangRuntimeException *ex) {
      listenerException = ex;
      successful = false;
    }
  }
  self->mTransactionStack_ = top->mParent_;
  ComYahooAndroidSqliteSQLiteSession_recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction_(self, top);
  if (self->mTransactionStack_ != nil) {
    if (!successful) {
      self->mTransactionStack_->mChildFailed_ = true;
    }
  }
  else {
    @try {
      if (successful) {
        [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"COMMIT;" withNSObjectArray:nil];
      }
      else {
        [((ComYahooAndroidSqliteSQLiteConnection *) nil_chk(self->mConnection_)) executeWithNSString:@"ROLLBACK;" withNSObjectArray:nil];
      }
    }
    @finally {
      ComYahooAndroidSqliteSQLiteSession_releaseConnection(self);
    }
  }
  if (listenerException != nil) {
    @throw listenerException;
  }
}

jboolean ComYahooAndroidSqliteSQLiteSession_yieldTransactionUncheckedWithLong_(ComYahooAndroidSqliteSQLiteSession *self, jlong sleepAfterYieldDelayMillis) {
  if (![((ComYahooAndroidSqliteSQLiteConnectionPool *) nil_chk(self->mConnectionPool_)) shouldYieldConnectionWithComYahooAndroidSqliteSQLiteConnection:self->mConnection_ withInt:self->mConnectionFlags_]) {
    return false;
  }
  jint transactionMode = ((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(self->mTransactionStack_))->mMode_;
  id<ComYahooAndroidSqliteSQLiteTransactionListener> listener = self->mTransactionStack_->mListener_;
  jint connectionFlags = self->mConnectionFlags_;
  ComYahooAndroidSqliteSQLiteSession_endTransactionUncheckedWithBoolean_(self, true);
  if (sleepAfterYieldDelayMillis > 0) {
    @try {
      JavaLangThread_sleepWithLong_(sleepAfterYieldDelayMillis);
    }
    @catch (JavaLangInterruptedException *ex) {
    }
  }
  ComYahooAndroidSqliteSQLiteSession_beginTransactionUncheckedWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_withInt_(self, transactionMode, listener, connectionFlags);
  return true;
}

jboolean ComYahooAndroidSqliteSQLiteSession_executeSpecialWithNSString_withNSObjectArray_withInt_(ComYahooAndroidSqliteSQLiteSession *self, NSString *sql, IOSObjectArray *bindArgs, jint connectionFlags) {
  jint type = ComYahooAndroidSqliteDatabaseUtils_getSqlStatementTypeWithNSString_(sql);
  switch (type) {
    case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_BEGIN:
    [self beginTransactionWithInt:ComYahooAndroidSqliteSQLiteSession_TRANSACTION_MODE_EXCLUSIVE withComYahooAndroidSqliteSQLiteTransactionListener:nil withInt:connectionFlags];
    return true;
    case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_COMMIT:
    [self setTransactionSuccessful];
    [self endTransaction];
    return true;
    case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_ABORT:
    [self endTransaction];
    return true;
  }
  return false;
}

void ComYahooAndroidSqliteSQLiteSession_acquireConnectionWithNSString_withInt_(ComYahooAndroidSqliteSQLiteSession *self, NSString *sql, jint connectionFlags) {
  if (self->mConnection_ == nil) {
    JreAssert((self->mConnectionUseCount_ == 0), (@"com/yahoo/android/sqlite/SQLiteSession.java:872 condition failed: assert mConnectionUseCount == 0;"));
    self->mConnection_ = [((ComYahooAndroidSqliteSQLiteConnectionPool *) nil_chk(self->mConnectionPool_)) acquireConnectionWithNSString:sql withInt:connectionFlags];
    self->mConnectionFlags_ = connectionFlags;
  }
  self->mConnectionUseCount_ += 1;
}

void ComYahooAndroidSqliteSQLiteSession_releaseConnection(ComYahooAndroidSqliteSQLiteSession *self) {
  JreAssert((self->mConnection_ != nil), (@"com/yahoo/android/sqlite/SQLiteSession.java:881 condition failed: assert mConnection != null;"));
  JreAssert((self->mConnectionUseCount_ > 0), (@"com/yahoo/android/sqlite/SQLiteSession.java:882 condition failed: assert mConnectionUseCount > 0;"));
  if (--self->mConnectionUseCount_ == 0) {
    @try {
      [((ComYahooAndroidSqliteSQLiteConnectionPool *) nil_chk(self->mConnectionPool_)) releaseConnectionWithComYahooAndroidSqliteSQLiteConnection:self->mConnection_];
    }
    @finally {
      self->mConnection_ = nil;
    }
  }
}

void ComYahooAndroidSqliteSQLiteSession_throwIfNoTransaction(ComYahooAndroidSqliteSQLiteSession *self) {
  if (self->mTransactionStack_ == nil) {
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"Cannot perform this operation because there is no current transaction.");
  }
}

void ComYahooAndroidSqliteSQLiteSession_throwIfTransactionMarkedSuccessful(ComYahooAndroidSqliteSQLiteSession *self) {
  if (self->mTransactionStack_ != nil && self->mTransactionStack_->mMarkedSuccessful_) {
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"Cannot perform this operation because the transaction has already been marked successful.  The only thing you can do now is call endTransaction().");
  }
}

void ComYahooAndroidSqliteSQLiteSession_throwIfNestedTransaction(ComYahooAndroidSqliteSQLiteSession *self) {
  if ([self hasNestedTransaction]) {
    @throw new_JavaLangIllegalStateException_initWithNSString_(@"Cannot perform this operation because a nested transaction is in progress.");
  }
}

ComYahooAndroidSqliteSQLiteSession_Transaction *ComYahooAndroidSqliteSQLiteSession_obtainTransactionWithInt_withComYahooAndroidSqliteSQLiteTransactionListener_(ComYahooAndroidSqliteSQLiteSession *self, jint mode, id<ComYahooAndroidSqliteSQLiteTransactionListener> listener) {
  ComYahooAndroidSqliteSQLiteSession_Transaction *transaction = self->mTransactionPool_;
  if (transaction != nil) {
    self->mTransactionPool_ = transaction->mParent_;
    transaction->mParent_ = nil;
    transaction->mMarkedSuccessful_ = false;
    transaction->mChildFailed_ = false;
  }
  else {
    transaction = new_ComYahooAndroidSqliteSQLiteSession_Transaction_init();
  }
  ((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(transaction))->mMode_ = mode;
  transaction->mListener_ = listener;
  return transaction;
}

void ComYahooAndroidSqliteSQLiteSession_recycleTransactionWithComYahooAndroidSqliteSQLiteSession_Transaction_(ComYahooAndroidSqliteSQLiteSession *self, ComYahooAndroidSqliteSQLiteSession_Transaction *transaction) {
  ((ComYahooAndroidSqliteSQLiteSession_Transaction *) nil_chk(transaction))->mParent_ = self->mTransactionPool_;
  transaction->mListener_ = nil;
  self->mTransactionPool_ = transaction;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteSQLiteSession)

@implementation ComYahooAndroidSqliteSQLiteSession_Transaction

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComYahooAndroidSqliteSQLiteSession_Transaction_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "mParent_", NULL, 0x1, "Lcom.yahoo.android.sqlite.SQLiteSession$Transaction;", NULL, NULL, .constantValue.asLong = 0 },
    { "mMode_", NULL, 0x1, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "mListener_", NULL, 0x1, "Lcom.yahoo.android.sqlite.SQLiteTransactionListener;", NULL, NULL, .constantValue.asLong = 0 },
    { "mMarkedSuccessful_", NULL, 0x1, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "mChildFailed_", NULL, 0x1, "Z", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ComYahooAndroidSqliteSQLiteSession_Transaction = { 2, "Transaction", "com.yahoo.android.sqlite", "SQLiteSession", 0x1a, 1, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComYahooAndroidSqliteSQLiteSession_Transaction;
}

@end

void ComYahooAndroidSqliteSQLiteSession_Transaction_init(ComYahooAndroidSqliteSQLiteSession_Transaction *self) {
  NSObject_init(self);
}

ComYahooAndroidSqliteSQLiteSession_Transaction *new_ComYahooAndroidSqliteSQLiteSession_Transaction_init() {
  ComYahooAndroidSqliteSQLiteSession_Transaction *self = [ComYahooAndroidSqliteSQLiteSession_Transaction alloc];
  ComYahooAndroidSqliteSQLiteSession_Transaction_init(self);
  return self;
}

ComYahooAndroidSqliteSQLiteSession_Transaction *create_ComYahooAndroidSqliteSQLiteSession_Transaction_init() {
  return new_ComYahooAndroidSqliteSQLiteSession_Transaction_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteSQLiteSession_Transaction)
