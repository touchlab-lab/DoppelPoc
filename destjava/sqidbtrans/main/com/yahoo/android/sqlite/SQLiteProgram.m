//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/squidb/squidb-ios/src/com/yahoo/android/sqlite/SQLiteProgram.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/yahoo/android/sqlite/DatabaseUtils.h"
#include "com/yahoo/android/sqlite/SQLiteClosable.h"
#include "com/yahoo/android/sqlite/SQLiteDatabase.h"
#include "com/yahoo/android/sqlite/SQLiteProgram.h"
#include "com/yahoo/android/sqlite/SQLiteSession.h"
#include "com/yahoo/android/sqlite/SQLiteStatementInfo.h"
#include "java/lang/Deprecated.h"
#include "java/lang/Double.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Long.h"
#include "java/lang/System.h"
#include "java/util/Arrays.h"

@interface ComYahooAndroidSqliteSQLiteProgram () {
 @public
  ComYahooAndroidSqliteSQLiteDatabase *mDatabase_;
  NSString *mSql_;
  jboolean mReadOnly_;
  IOSObjectArray *mColumnNames_;
  jint mNumParameters_;
  IOSObjectArray *mBindArgs_;
}

- (void)bindWithInt:(jint)index
             withId:(id)value;

@end

J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteProgram, mDatabase_, ComYahooAndroidSqliteSQLiteDatabase *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteProgram, mSql_, NSString *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteProgram, mColumnNames_, IOSObjectArray *)
J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteSQLiteProgram, mBindArgs_, IOSObjectArray *)

inline IOSObjectArray *ComYahooAndroidSqliteSQLiteProgram_get_EMPTY_STRING_ARRAY();
static IOSObjectArray *ComYahooAndroidSqliteSQLiteProgram_EMPTY_STRING_ARRAY;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ComYahooAndroidSqliteSQLiteProgram, EMPTY_STRING_ARRAY, IOSObjectArray *)

__attribute__((unused)) static void ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(ComYahooAndroidSqliteSQLiteProgram *self, jint index, id value);

J2OBJC_INITIALIZED_DEFN(ComYahooAndroidSqliteSQLiteProgram)

@implementation ComYahooAndroidSqliteSQLiteProgram

- (instancetype)initWithComYahooAndroidSqliteSQLiteDatabase:(ComYahooAndroidSqliteSQLiteDatabase *)db
                                               withNSString:(NSString *)sql
                                          withNSObjectArray:(IOSObjectArray *)bindArgs {
  ComYahooAndroidSqliteSQLiteProgram_initWithComYahooAndroidSqliteSQLiteDatabase_withNSString_withNSObjectArray_(self, db, sql, bindArgs);
  return self;
}

- (ComYahooAndroidSqliteSQLiteDatabase *)getDatabase {
  return mDatabase_;
}

- (NSString *)getSql {
  return mSql_;
}

- (IOSObjectArray *)getBindArgs {
  return mBindArgs_;
}

- (IOSObjectArray *)getColumnNames {
  return mColumnNames_;
}

- (ComYahooAndroidSqliteSQLiteSession *)getSession {
  return [((ComYahooAndroidSqliteSQLiteDatabase *) nil_chk(mDatabase_)) getThreadSession];
}

- (jint)getConnectionFlags {
  return [((ComYahooAndroidSqliteSQLiteDatabase *) nil_chk(mDatabase_)) getThreadDefaultConnectionFlagsWithBoolean:mReadOnly_];
}

- (void)onCorruption {
  [((ComYahooAndroidSqliteSQLiteDatabase *) nil_chk(mDatabase_)) onCorruption];
}

- (jint)getUniqueId {
  return -1;
}

- (void)bindNullWithInt:(jint)index {
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, nil);
}

- (void)bindLongWithInt:(jint)index
               withLong:(jlong)value {
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, JavaLangLong_valueOfWithLong_(value));
}

- (void)bindDoubleWithInt:(jint)index
               withDouble:(jdouble)value {
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, JavaLangDouble_valueOfWithDouble_(value));
}

- (void)bindStringWithInt:(jint)index
             withNSString:(NSString *)value {
  if (value == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$", @"the bind value at index ", index, @" is null"));
  }
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, value);
}

- (void)bindBlobWithInt:(jint)index
          withByteArray:(IOSByteArray *)value {
  if (value == nil) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$", @"the bind value at index ", index, @" is null"));
  }
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, value);
}

- (void)clearBindings {
  if (mBindArgs_ != nil) {
    JavaUtilArrays_fillWithNSObjectArray_withId_(mBindArgs_, nil);
  }
}

- (void)bindAllArgsAsStringsWithNSStringArray:(IOSObjectArray *)bindArgs {
  if (bindArgs != nil) {
    for (jint i = bindArgs->size_; i != 0; i--) {
      [self bindStringWithInt:i withNSString:IOSObjectArray_Get(bindArgs, i - 1)];
    }
  }
}

- (void)onAllReferencesReleased {
  [self clearBindings];
}

- (void)bindWithInt:(jint)index
             withId:(id)value {
  ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(self, index, value);
}

+ (void)initialize {
  if (self == [ComYahooAndroidSqliteSQLiteProgram class]) {
    ComYahooAndroidSqliteSQLiteProgram_EMPTY_STRING_ARRAY = [IOSObjectArray newArrayWithLength:0 type:NSString_class_()];
    J2OBJC_SET_INITIALIZED(ComYahooAndroidSqliteSQLiteProgram)
  }
}

+ (IOSObjectArray *)__annotations_getUniqueId {
  return [IOSObjectArray arrayWithObjects:(id[]) { [[JavaLangDeprecated alloc] init] } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithComYahooAndroidSqliteSQLiteDatabase:withNSString:withNSObjectArray:", "SQLiteProgram", NULL, 0x0, NULL, NULL },
    { "getDatabase", NULL, "Lcom.yahoo.android.sqlite.SQLiteDatabase;", 0x10, NULL, NULL },
    { "getSql", NULL, "Ljava.lang.String;", 0x10, NULL, NULL },
    { "getBindArgs", NULL, "[Ljava.lang.Object;", 0x10, NULL, NULL },
    { "getColumnNames", NULL, "[Ljava.lang.String;", 0x10, NULL, NULL },
    { "getSession", NULL, "Lcom.yahoo.android.sqlite.SQLiteSession;", 0x14, NULL, NULL },
    { "getConnectionFlags", NULL, "I", 0x14, NULL, NULL },
    { "onCorruption", NULL, "V", 0x14, NULL, NULL },
    { "getUniqueId", NULL, "I", 0x11, NULL, NULL },
    { "bindNullWithInt:", "bindNull", "V", 0x1, NULL, NULL },
    { "bindLongWithInt:withLong:", "bindLong", "V", 0x1, NULL, NULL },
    { "bindDoubleWithInt:withDouble:", "bindDouble", "V", 0x1, NULL, NULL },
    { "bindStringWithInt:withNSString:", "bindString", "V", 0x1, NULL, NULL },
    { "bindBlobWithInt:withByteArray:", "bindBlob", "V", 0x1, NULL, NULL },
    { "clearBindings", NULL, "V", 0x1, NULL, NULL },
    { "bindAllArgsAsStringsWithNSStringArray:", "bindAllArgsAsStrings", "V", 0x1, NULL, NULL },
    { "onAllReferencesReleased", NULL, "V", 0x4, NULL, NULL },
    { "bindWithInt:withId:", "bind", "V", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "EMPTY_STRING_ARRAY", "EMPTY_STRING_ARRAY", 0x1a, "[Ljava.lang.String;", &ComYahooAndroidSqliteSQLiteProgram_EMPTY_STRING_ARRAY, NULL, .constantValue.asLong = 0 },
    { "mDatabase_", NULL, 0x12, "Lcom.yahoo.android.sqlite.SQLiteDatabase;", NULL, NULL, .constantValue.asLong = 0 },
    { "mSql_", NULL, 0x12, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "mReadOnly_", NULL, 0x12, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "mColumnNames_", NULL, 0x12, "[Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
    { "mNumParameters_", NULL, 0x12, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "mBindArgs_", NULL, 0x12, "[Ljava.lang.Object;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ComYahooAndroidSqliteSQLiteProgram = { 2, "SQLiteProgram", "com.yahoo.android.sqlite", NULL, 0x401, 18, methods, 7, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComYahooAndroidSqliteSQLiteProgram;
}

@end

void ComYahooAndroidSqliteSQLiteProgram_initWithComYahooAndroidSqliteSQLiteDatabase_withNSString_withNSObjectArray_(ComYahooAndroidSqliteSQLiteProgram *self, ComYahooAndroidSqliteSQLiteDatabase *db, NSString *sql, IOSObjectArray *bindArgs) {
  ComYahooAndroidSqliteSQLiteClosable_init(self);
  self->mDatabase_ = db;
  self->mSql_ = [((NSString *) nil_chk(sql)) trim];
  jint n = ComYahooAndroidSqliteDatabaseUtils_getSqlStatementTypeWithNSString_(self->mSql_);
  {
    jboolean assumeReadOnly;
    ComYahooAndroidSqliteSQLiteStatementInfo *info;
    switch (n) {
      case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_BEGIN:
      case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_COMMIT:
      case ComYahooAndroidSqliteDatabaseUtils_STATEMENT_ABORT:
      self->mReadOnly_ = false;
      self->mColumnNames_ = ComYahooAndroidSqliteSQLiteProgram_EMPTY_STRING_ARRAY;
      self->mNumParameters_ = 0;
      break;
      default:
      assumeReadOnly = (n == ComYahooAndroidSqliteDatabaseUtils_STATEMENT_SELECT);
      info = new_ComYahooAndroidSqliteSQLiteStatementInfo_init();
      [((ComYahooAndroidSqliteSQLiteSession *) nil_chk([((ComYahooAndroidSqliteSQLiteDatabase *) nil_chk(db)) getThreadSession])) prepareWithNSString:self->mSql_ withInt:[db getThreadDefaultConnectionFlagsWithBoolean:assumeReadOnly] withComYahooAndroidSqliteSQLiteStatementInfo:info];
      self->mReadOnly_ = info->readOnly_;
      self->mColumnNames_ = info->columnNames_;
      self->mNumParameters_ = info->numParameters_;
      break;
    }
  }
  if (bindArgs != nil && bindArgs->size_ > self->mNumParameters_) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$I$", @"Too many bind arguments.  ", bindArgs->size_, @" arguments were provided but the statement needs ", self->mNumParameters_, @" arguments."));
  }
  if (self->mNumParameters_ != 0) {
    self->mBindArgs_ = [IOSObjectArray newArrayWithLength:self->mNumParameters_ type:NSObject_class_()];
    if (bindArgs != nil) {
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(bindArgs, 0, self->mBindArgs_, 0, bindArgs->size_);
    }
  }
  else {
    self->mBindArgs_ = nil;
  }
}

void ComYahooAndroidSqliteSQLiteProgram_bindWithInt_withId_(ComYahooAndroidSqliteSQLiteProgram *self, jint index, id value) {
  if (index < 1 || index > self->mNumParameters_) {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("$I$I$", @"Cannot bind argument at index ", index, @" because the index is out of range.  The statement has ", self->mNumParameters_, @" parameters."));
  }
  (void) IOSObjectArray_Set(nil_chk(self->mBindArgs_), index - 1, value);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteSQLiteProgram)
