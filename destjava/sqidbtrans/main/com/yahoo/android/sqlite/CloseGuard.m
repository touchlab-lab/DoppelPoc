//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/squidb/squidb-ios/src/com/yahoo/android/sqlite/CloseGuard.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/yahoo/android/sqlite/CloseGuard.h"
#include "com/yahoo/squidb/utility/Logger.h"
#include "java/lang/NullPointerException.h"

@interface ComYahooAndroidSqliteCloseGuard () {
 @public
  NSException *allocationSite_;
}

- (instancetype)init;

@end

J2OBJC_FIELD_SETTER(ComYahooAndroidSqliteCloseGuard, allocationSite_, NSException *)

inline ComYahooAndroidSqliteCloseGuard *ComYahooAndroidSqliteCloseGuard_get_NOOP();
static ComYahooAndroidSqliteCloseGuard *ComYahooAndroidSqliteCloseGuard_NOOP;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ComYahooAndroidSqliteCloseGuard, NOOP, ComYahooAndroidSqliteCloseGuard *)

inline jboolean ComYahooAndroidSqliteCloseGuard_get_ENABLED();
inline jboolean ComYahooAndroidSqliteCloseGuard_set_ENABLED(jboolean value);
static volatile_jboolean ComYahooAndroidSqliteCloseGuard_ENABLED = true;
J2OBJC_STATIC_FIELD_PRIMITIVE_VOLATILE(ComYahooAndroidSqliteCloseGuard, ENABLED, jboolean)

inline id<ComYahooAndroidSqliteCloseGuard_Reporter> ComYahooAndroidSqliteCloseGuard_get_REPORTER();
inline id<ComYahooAndroidSqliteCloseGuard_Reporter> ComYahooAndroidSqliteCloseGuard_set_REPORTER(id<ComYahooAndroidSqliteCloseGuard_Reporter> value);
static volatile_id ComYahooAndroidSqliteCloseGuard_REPORTER;
J2OBJC_STATIC_FIELD_OBJ_VOLATILE(ComYahooAndroidSqliteCloseGuard, REPORTER, id<ComYahooAndroidSqliteCloseGuard_Reporter>)

__attribute__((unused)) static void ComYahooAndroidSqliteCloseGuard_init(ComYahooAndroidSqliteCloseGuard *self);

__attribute__((unused)) static ComYahooAndroidSqliteCloseGuard *new_ComYahooAndroidSqliteCloseGuard_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static ComYahooAndroidSqliteCloseGuard *create_ComYahooAndroidSqliteCloseGuard_init();

@interface ComYahooAndroidSqliteCloseGuard_Reporter : NSObject

@end

@interface ComYahooAndroidSqliteCloseGuard_DefaultReporter : NSObject < ComYahooAndroidSqliteCloseGuard_Reporter >

- (void)reportWithNSString:(NSString *)message
           withNSException:(NSException *)allocationSite;
#ifdef J2OBJC_RENAME_ALIASES
#define withJavaLangThrowable withNSException
#endif // J2OBJC_RENAME_ALIASES

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ComYahooAndroidSqliteCloseGuard_DefaultReporter)

__attribute__((unused)) static void ComYahooAndroidSqliteCloseGuard_DefaultReporter_init(ComYahooAndroidSqliteCloseGuard_DefaultReporter *self);

__attribute__((unused)) static ComYahooAndroidSqliteCloseGuard_DefaultReporter *new_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static ComYahooAndroidSqliteCloseGuard_DefaultReporter *create_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init();

J2OBJC_TYPE_LITERAL_HEADER(ComYahooAndroidSqliteCloseGuard_DefaultReporter)

J2OBJC_INITIALIZED_DEFN(ComYahooAndroidSqliteCloseGuard)

@implementation ComYahooAndroidSqliteCloseGuard

+ (ComYahooAndroidSqliteCloseGuard *)get {
  return ComYahooAndroidSqliteCloseGuard_get();
}

+ (void)setEnabledWithBoolean:(jboolean)enabled {
  ComYahooAndroidSqliteCloseGuard_setEnabledWithBoolean_(enabled);
}

+ (void)setReporterWithComYahooAndroidSqliteCloseGuard_Reporter:(id<ComYahooAndroidSqliteCloseGuard_Reporter>)reporter {
  ComYahooAndroidSqliteCloseGuard_setReporterWithComYahooAndroidSqliteCloseGuard_Reporter_(reporter);
}

+ (id<ComYahooAndroidSqliteCloseGuard_Reporter>)getReporter {
  return ComYahooAndroidSqliteCloseGuard_getReporter();
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComYahooAndroidSqliteCloseGuard_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)openWithNSString:(NSString *)closer {
  if (closer == nil) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"closer == null");
  }
  if (self == ComYahooAndroidSqliteCloseGuard_NOOP || !JreLoadVolatileBoolean(&ComYahooAndroidSqliteCloseGuard_ENABLED)) {
    return;
  }
  NSString *message = JreStrcat("$$$", @"Explicit termination method '", closer, @"' not called");
  allocationSite_ = new_NSException_initWithNSString_(message);
}

- (void)close {
  allocationSite_ = nil;
}

- (void)warnIfOpen {
  if (allocationSite_ == nil || !JreLoadVolatileBoolean(&ComYahooAndroidSqliteCloseGuard_ENABLED)) {
    return;
  }
  NSString *message = (@"A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.");
  [((id<ComYahooAndroidSqliteCloseGuard_Reporter>) nil_chk(JreLoadVolatileId(&ComYahooAndroidSqliteCloseGuard_REPORTER))) reportWithNSString:message withNSException:allocationSite_];
}

+ (void)initialize {
  if (self == [ComYahooAndroidSqliteCloseGuard class]) {
    ComYahooAndroidSqliteCloseGuard_NOOP = new_ComYahooAndroidSqliteCloseGuard_init();
    (void) JreVolatileStrongAssign(&ComYahooAndroidSqliteCloseGuard_REPORTER, new_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init());
    J2OBJC_SET_INITIALIZED(ComYahooAndroidSqliteCloseGuard)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "get", NULL, "Lcom.yahoo.android.sqlite.CloseGuard;", 0x9, NULL, NULL },
    { "setEnabledWithBoolean:", "setEnabled", "V", 0x9, NULL, NULL },
    { "setReporterWithComYahooAndroidSqliteCloseGuard_Reporter:", "setReporter", "V", 0x9, NULL, NULL },
    { "getReporter", NULL, "Lcom.yahoo.android.sqlite.CloseGuard$Reporter;", 0x9, NULL, NULL },
    { "init", "CloseGuard", NULL, 0x2, NULL, NULL },
    { "openWithNSString:", "open", "V", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "warnIfOpen", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "NOOP", "NOOP", 0x1a, "Lcom.yahoo.android.sqlite.CloseGuard;", &ComYahooAndroidSqliteCloseGuard_NOOP, NULL, .constantValue.asLong = 0 },
    { "ENABLED", "ENABLED", 0x4a, "Z", &ComYahooAndroidSqliteCloseGuard_ENABLED, NULL, .constantValue.asLong = 0 },
    { "REPORTER", "REPORTER", 0x4a, "Lcom.yahoo.android.sqlite.CloseGuard$Reporter;", &ComYahooAndroidSqliteCloseGuard_REPORTER, NULL, .constantValue.asLong = 0 },
    { "allocationSite_", NULL, 0x2, "Ljava.lang.Throwable;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lcom.yahoo.android.sqlite.CloseGuard$Reporter;", "Lcom.yahoo.android.sqlite.CloseGuard$DefaultReporter;"};
  static const J2ObjcClassInfo _ComYahooAndroidSqliteCloseGuard = { 2, "CloseGuard", "com.yahoo.android.sqlite", NULL, 0x11, 8, methods, 4, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_ComYahooAndroidSqliteCloseGuard;
}

@end

ComYahooAndroidSqliteCloseGuard *ComYahooAndroidSqliteCloseGuard_get() {
  ComYahooAndroidSqliteCloseGuard_initialize();
  if (!JreLoadVolatileBoolean(&ComYahooAndroidSqliteCloseGuard_ENABLED)) {
    return ComYahooAndroidSqliteCloseGuard_NOOP;
  }
  return new_ComYahooAndroidSqliteCloseGuard_init();
}

void ComYahooAndroidSqliteCloseGuard_setEnabledWithBoolean_(jboolean enabled) {
  ComYahooAndroidSqliteCloseGuard_initialize();
  JreAssignVolatileBoolean(&ComYahooAndroidSqliteCloseGuard_ENABLED, enabled);
}

void ComYahooAndroidSqliteCloseGuard_setReporterWithComYahooAndroidSqliteCloseGuard_Reporter_(id<ComYahooAndroidSqliteCloseGuard_Reporter> reporter) {
  ComYahooAndroidSqliteCloseGuard_initialize();
  if (reporter == nil) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"reporter == null");
  }
  (void) JreVolatileStrongAssign(&ComYahooAndroidSqliteCloseGuard_REPORTER, reporter);
}

id<ComYahooAndroidSqliteCloseGuard_Reporter> ComYahooAndroidSqliteCloseGuard_getReporter() {
  ComYahooAndroidSqliteCloseGuard_initialize();
  return JreLoadVolatileId(&ComYahooAndroidSqliteCloseGuard_REPORTER);
}

void ComYahooAndroidSqliteCloseGuard_init(ComYahooAndroidSqliteCloseGuard *self) {
  NSObject_init(self);
}

ComYahooAndroidSqliteCloseGuard *new_ComYahooAndroidSqliteCloseGuard_init() {
  ComYahooAndroidSqliteCloseGuard *self = [ComYahooAndroidSqliteCloseGuard alloc];
  ComYahooAndroidSqliteCloseGuard_init(self);
  return self;
}

ComYahooAndroidSqliteCloseGuard *create_ComYahooAndroidSqliteCloseGuard_init() {
  return new_ComYahooAndroidSqliteCloseGuard_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteCloseGuard)

@implementation ComYahooAndroidSqliteCloseGuard_Reporter

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "reportWithNSString:withNSException:", "report", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComYahooAndroidSqliteCloseGuard_Reporter = { 2, "Reporter", "com.yahoo.android.sqlite", "CloseGuard", 0x609, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComYahooAndroidSqliteCloseGuard_Reporter;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteCloseGuard_Reporter)

@implementation ComYahooAndroidSqliteCloseGuard_DefaultReporter

- (void)reportWithNSString:(NSString *)message
           withNSException:(NSException *)allocationSite {
  ComYahooSquidbUtilityLogger_wWithNSString_withNSString_withNSException_(ComYahooSquidbUtilityLogger_LOG_TAG, message, allocationSite);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComYahooAndroidSqliteCloseGuard_DefaultReporter_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "reportWithNSString:withNSException:", "report", "V", 0x1, NULL, NULL },
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComYahooAndroidSqliteCloseGuard_DefaultReporter = { 2, "DefaultReporter", "com.yahoo.android.sqlite", "CloseGuard", 0x1a, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComYahooAndroidSqliteCloseGuard_DefaultReporter;
}

@end

void ComYahooAndroidSqliteCloseGuard_DefaultReporter_init(ComYahooAndroidSqliteCloseGuard_DefaultReporter *self) {
  NSObject_init(self);
}

ComYahooAndroidSqliteCloseGuard_DefaultReporter *new_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init() {
  ComYahooAndroidSqliteCloseGuard_DefaultReporter *self = [ComYahooAndroidSqliteCloseGuard_DefaultReporter alloc];
  ComYahooAndroidSqliteCloseGuard_DefaultReporter_init(self);
  return self;
}

ComYahooAndroidSqliteCloseGuard_DefaultReporter *create_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init() {
  return new_ComYahooAndroidSqliteCloseGuard_DefaultReporter_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComYahooAndroidSqliteCloseGuard_DefaultReporter)
