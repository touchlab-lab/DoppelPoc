//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/gson/gson/src/main/java/com/google/gson/DefaultDateTypeAdapter.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/google/gson/DefaultDateTypeAdapter.h"
#include "com/google/gson/JsonDeserializationContext.h"
#include "com/google/gson/JsonElement.h"
#include "com/google/gson/JsonParseException.h"
#include "com/google/gson/JsonPrimitive.h"
#include "com/google/gson/JsonSerializationContext.h"
#include "com/google/gson/JsonSyntaxException.h"
#include "com/google/gson/internal/bind/util/ISO8601Utils.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/reflect/Type.h"
#include "java/sql/Date.h"
#include "java/sql/Timestamp.h"
#include "java/text/DateFormat.h"
#include "java/text/ParseException.h"
#include "java/text/ParsePosition.h"
#include "java/text/SimpleDateFormat.h"
#include "java/util/Date.h"
#include "java/util/Locale.h"

@interface DPGSDefaultDateTypeAdapter () {
 @public
  JavaTextDateFormat *enUsFormat_;
  JavaTextDateFormat *localFormat_;
}

- (JavaUtilDate *)deserializeToDateWithDPGSJsonElement:(DPGSJsonElement *)json;

@end

J2OBJC_FIELD_SETTER(DPGSDefaultDateTypeAdapter, enUsFormat_, JavaTextDateFormat *)
J2OBJC_FIELD_SETTER(DPGSDefaultDateTypeAdapter, localFormat_, JavaTextDateFormat *)

__attribute__((unused)) static JavaUtilDate *DPGSDefaultDateTypeAdapter_deserializeToDateWithDPGSJsonElement_(DPGSDefaultDateTypeAdapter *self, DPGSJsonElement *json);

@implementation DPGSDefaultDateTypeAdapter

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  DPGSDefaultDateTypeAdapter_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (instancetype)initWithNSString:(NSString *)datePattern {
  DPGSDefaultDateTypeAdapter_initWithNSString_(self, datePattern);
  return self;
}

- (instancetype)initWithInt:(jint)style {
  DPGSDefaultDateTypeAdapter_initWithInt_(self, style);
  return self;
}

- (instancetype)initWithInt:(jint)dateStyle
                    withInt:(jint)timeStyle {
  DPGSDefaultDateTypeAdapter_initWithInt_withInt_(self, dateStyle, timeStyle);
  return self;
}

- (instancetype)initWithJavaTextDateFormat:(JavaTextDateFormat *)enUsFormat
                    withJavaTextDateFormat:(JavaTextDateFormat *)localFormat {
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, enUsFormat, localFormat);
  return self;
}

- (DPGSJsonElement *)serializeWithId:(JavaUtilDate *)src
             withJavaLangReflectType:(id<JavaLangReflectType>)typeOfSrc
    withDPGSJsonSerializationContext:(id<DPGSJsonSerializationContext>)context {
  @synchronized(localFormat_) {
    NSString *dateFormatAsString = [((JavaTextDateFormat *) nil_chk(enUsFormat_)) formatWithJavaUtilDate:src];
    return new_DPGSJsonPrimitive_initWithNSString_(dateFormatAsString);
  }
}

- (JavaUtilDate *)deserializeWithDPGSJsonElement:(DPGSJsonElement *)json
                         withJavaLangReflectType:(id<JavaLangReflectType>)typeOfT
              withDPGSJsonDeserializationContext:(id<DPGSJsonDeserializationContext>)context {
  if (!([json isKindOfClass:[DPGSJsonPrimitive class]])) {
    @throw new_DPGSJsonParseException_initWithNSString_(@"The date should be a string value");
  }
  JavaUtilDate *date = DPGSDefaultDateTypeAdapter_deserializeToDateWithDPGSJsonElement_(self, json);
  if (typeOfT == JavaUtilDate_class_()) {
    return date;
  }
  else if (typeOfT == JavaSqlTimestamp_class_()) {
    return new_JavaSqlTimestamp_initWithLong_([((JavaUtilDate *) nil_chk(date)) getTime]);
  }
  else if (typeOfT == JavaSqlDate_class_()) {
    return new_JavaSqlDate_initWithLong_([((JavaUtilDate *) nil_chk(date)) getTime]);
  }
  else {
    @throw new_JavaLangIllegalArgumentException_initWithNSString_(JreStrcat("@$@", [self getClass], @" cannot deserialize to ", typeOfT));
  }
}

- (JavaUtilDate *)deserializeToDateWithDPGSJsonElement:(DPGSJsonElement *)json {
  return DPGSDefaultDateTypeAdapter_deserializeToDateWithDPGSJsonElement_(self, json);
}

- (NSString *)description {
  JavaLangStringBuilder *sb = new_JavaLangStringBuilder_init();
  (void) [sb appendWithNSString:[DPGSDefaultDateTypeAdapter_class_() getSimpleName]];
  (void) [((JavaLangStringBuilder *) nil_chk([((JavaLangStringBuilder *) nil_chk([sb appendWithChar:'('])) appendWithNSString:[[((JavaTextDateFormat *) nil_chk(localFormat_)) getClass] getSimpleName]])) appendWithChar:')'];
  return [sb description];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "DefaultDateTypeAdapter", NULL, 0x0, NULL, NULL },
    { "initWithNSString:", "DefaultDateTypeAdapter", NULL, 0x0, NULL, NULL },
    { "initWithInt:", "DefaultDateTypeAdapter", NULL, 0x0, NULL, NULL },
    { "initWithInt:withInt:", "DefaultDateTypeAdapter", NULL, 0x1, NULL, NULL },
    { "initWithJavaTextDateFormat:withJavaTextDateFormat:", "DefaultDateTypeAdapter", NULL, 0x0, NULL, NULL },
    { "serializeWithId:withJavaLangReflectType:withDPGSJsonSerializationContext:", "serialize", "Lcom.google.gson.JsonElement;", 0x1, NULL, NULL },
    { "deserializeWithDPGSJsonElement:withJavaLangReflectType:withDPGSJsonDeserializationContext:", "deserialize", "Ljava.util.Date;", 0x1, "Lcom.google.gson.JsonParseException;", NULL },
    { "deserializeToDateWithDPGSJsonElement:", "deserializeToDate", "Ljava.util.Date;", 0x2, NULL, NULL },
    { "description", "toString", "Ljava.lang.String;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "enUsFormat_", NULL, 0x12, "Ljava.text.DateFormat;", NULL, NULL, .constantValue.asLong = 0 },
    { "localFormat_", NULL, 0x12, "Ljava.text.DateFormat;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _DPGSDefaultDateTypeAdapter = { 2, "DefaultDateTypeAdapter", "com.google.gson", NULL, 0x10, 9, methods, 2, fields, 0, NULL, 0, NULL, NULL, "Ljava/lang/Object;Lcom/google/gson/JsonSerializer<Ljava/util/Date;>;Lcom/google/gson/JsonDeserializer<Ljava/util/Date;>;" };
  return &_DPGSDefaultDateTypeAdapter;
}

@end

void DPGSDefaultDateTypeAdapter_init(DPGSDefaultDateTypeAdapter *self) {
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, JavaTextDateFormat_getDateTimeInstanceWithInt_withInt_withJavaUtilLocale_(JavaTextDateFormat_DEFAULT, JavaTextDateFormat_DEFAULT, JreLoadStatic(JavaUtilLocale, US)), JavaTextDateFormat_getDateTimeInstanceWithInt_withInt_(JavaTextDateFormat_DEFAULT, JavaTextDateFormat_DEFAULT));
}

DPGSDefaultDateTypeAdapter *new_DPGSDefaultDateTypeAdapter_init() {
  DPGSDefaultDateTypeAdapter *self = [DPGSDefaultDateTypeAdapter alloc];
  DPGSDefaultDateTypeAdapter_init(self);
  return self;
}

DPGSDefaultDateTypeAdapter *create_DPGSDefaultDateTypeAdapter_init() {
  return new_DPGSDefaultDateTypeAdapter_init();
}

void DPGSDefaultDateTypeAdapter_initWithNSString_(DPGSDefaultDateTypeAdapter *self, NSString *datePattern) {
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, new_JavaTextSimpleDateFormat_initWithNSString_withJavaUtilLocale_(datePattern, JreLoadStatic(JavaUtilLocale, US)), new_JavaTextSimpleDateFormat_initWithNSString_(datePattern));
}

DPGSDefaultDateTypeAdapter *new_DPGSDefaultDateTypeAdapter_initWithNSString_(NSString *datePattern) {
  DPGSDefaultDateTypeAdapter *self = [DPGSDefaultDateTypeAdapter alloc];
  DPGSDefaultDateTypeAdapter_initWithNSString_(self, datePattern);
  return self;
}

DPGSDefaultDateTypeAdapter *create_DPGSDefaultDateTypeAdapter_initWithNSString_(NSString *datePattern) {
  return new_DPGSDefaultDateTypeAdapter_initWithNSString_(datePattern);
}

void DPGSDefaultDateTypeAdapter_initWithInt_(DPGSDefaultDateTypeAdapter *self, jint style) {
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, JavaTextDateFormat_getDateInstanceWithInt_withJavaUtilLocale_(style, JreLoadStatic(JavaUtilLocale, US)), JavaTextDateFormat_getDateInstanceWithInt_(style));
}

DPGSDefaultDateTypeAdapter *new_DPGSDefaultDateTypeAdapter_initWithInt_(jint style) {
  DPGSDefaultDateTypeAdapter *self = [DPGSDefaultDateTypeAdapter alloc];
  DPGSDefaultDateTypeAdapter_initWithInt_(self, style);
  return self;
}

DPGSDefaultDateTypeAdapter *create_DPGSDefaultDateTypeAdapter_initWithInt_(jint style) {
  return new_DPGSDefaultDateTypeAdapter_initWithInt_(style);
}

void DPGSDefaultDateTypeAdapter_initWithInt_withInt_(DPGSDefaultDateTypeAdapter *self, jint dateStyle, jint timeStyle) {
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, JavaTextDateFormat_getDateTimeInstanceWithInt_withInt_withJavaUtilLocale_(dateStyle, timeStyle, JreLoadStatic(JavaUtilLocale, US)), JavaTextDateFormat_getDateTimeInstanceWithInt_withInt_(dateStyle, timeStyle));
}

DPGSDefaultDateTypeAdapter *new_DPGSDefaultDateTypeAdapter_initWithInt_withInt_(jint dateStyle, jint timeStyle) {
  DPGSDefaultDateTypeAdapter *self = [DPGSDefaultDateTypeAdapter alloc];
  DPGSDefaultDateTypeAdapter_initWithInt_withInt_(self, dateStyle, timeStyle);
  return self;
}

DPGSDefaultDateTypeAdapter *create_DPGSDefaultDateTypeAdapter_initWithInt_withInt_(jint dateStyle, jint timeStyle) {
  return new_DPGSDefaultDateTypeAdapter_initWithInt_withInt_(dateStyle, timeStyle);
}

void DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(DPGSDefaultDateTypeAdapter *self, JavaTextDateFormat *enUsFormat, JavaTextDateFormat *localFormat) {
  NSObject_init(self);
  self->enUsFormat_ = enUsFormat;
  self->localFormat_ = localFormat;
}

DPGSDefaultDateTypeAdapter *new_DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(JavaTextDateFormat *enUsFormat, JavaTextDateFormat *localFormat) {
  DPGSDefaultDateTypeAdapter *self = [DPGSDefaultDateTypeAdapter alloc];
  DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(self, enUsFormat, localFormat);
  return self;
}

DPGSDefaultDateTypeAdapter *create_DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(JavaTextDateFormat *enUsFormat, JavaTextDateFormat *localFormat) {
  return new_DPGSDefaultDateTypeAdapter_initWithJavaTextDateFormat_withJavaTextDateFormat_(enUsFormat, localFormat);
}

JavaUtilDate *DPGSDefaultDateTypeAdapter_deserializeToDateWithDPGSJsonElement_(DPGSDefaultDateTypeAdapter *self, DPGSJsonElement *json) {
  @synchronized(self->localFormat_) {
    @try {
      return [((JavaTextDateFormat *) nil_chk(self->localFormat_)) parseWithNSString:[((DPGSJsonElement *) nil_chk(json)) getAsString]];
    }
    @catch (JavaTextParseException *ignored) {
    }
    @try {
      return [((JavaTextDateFormat *) nil_chk(self->enUsFormat_)) parseWithNSString:[((DPGSJsonElement *) nil_chk(json)) getAsString]];
    }
    @catch (JavaTextParseException *ignored) {
    }
    @try {
      return ComGoogleGsonInternalBindUtilISO8601Utils_parseWithNSString_withJavaTextParsePosition_([((DPGSJsonElement *) nil_chk(json)) getAsString], new_JavaTextParsePosition_initWithInt_(0));
    }
    @catch (JavaTextParseException *e) {
      @throw new_DPGSJsonSyntaxException_initWithNSString_withNSException_([((DPGSJsonElement *) nil_chk(json)) getAsString], e);
    }
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(DPGSDefaultDateTypeAdapter)
