//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/gson/gson/src/main/java/com/google/gson/internal/bind/ArrayTypeAdapter.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/google/gson/Gson.h"
#include "com/google/gson/TypeAdapter.h"
#include "com/google/gson/TypeAdapterFactory.h"
#include "com/google/gson/internal/$Gson$Types.h"
#include "com/google/gson/internal/bind/ArrayTypeAdapter.h"
#include "com/google/gson/internal/bind/TypeAdapterRuntimeTypeWrapper.h"
#include "com/google/gson/reflect/TypeToken.h"
#include "com/google/gson/stream/JsonReader.h"
#include "com/google/gson/stream/JsonToken.h"
#include "com/google/gson/stream/JsonWriter.h"
#include "java/io/IOException.h"
#include "java/lang/reflect/Array.h"
#include "java/lang/reflect/GenericArrayType.h"
#include "java/lang/reflect/Type.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"

@interface ComGoogleGsonInternalBindArrayTypeAdapter () {
 @public
  IOSClass *componentType_;
  DPGSTypeAdapter *componentTypeAdapter_;
}

@end

J2OBJC_FIELD_SETTER(ComGoogleGsonInternalBindArrayTypeAdapter, componentType_, IOSClass *)
J2OBJC_FIELD_SETTER(ComGoogleGsonInternalBindArrayTypeAdapter, componentTypeAdapter_, DPGSTypeAdapter *)

@interface ComGoogleGsonInternalBindArrayTypeAdapter_$1 : NSObject < DPGSTypeAdapterFactory >

- (DPGSTypeAdapter *)createWithDPGSGson:(DPGSGson *)gson
               withDPGSReflectTypeToken:(DPGSReflectTypeToken *)typeToken;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(ComGoogleGsonInternalBindArrayTypeAdapter_$1)

__attribute__((unused)) static void ComGoogleGsonInternalBindArrayTypeAdapter_$1_init(ComGoogleGsonInternalBindArrayTypeAdapter_$1 *self);

__attribute__((unused)) static ComGoogleGsonInternalBindArrayTypeAdapter_$1 *new_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static ComGoogleGsonInternalBindArrayTypeAdapter_$1 *create_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init();

J2OBJC_TYPE_LITERAL_HEADER(ComGoogleGsonInternalBindArrayTypeAdapter_$1)

J2OBJC_INITIALIZED_DEFN(ComGoogleGsonInternalBindArrayTypeAdapter)

id<DPGSTypeAdapterFactory> ComGoogleGsonInternalBindArrayTypeAdapter_FACTORY;

@implementation ComGoogleGsonInternalBindArrayTypeAdapter

- (instancetype)initWithDPGSGson:(DPGSGson *)context
             withDPGSTypeAdapter:(DPGSTypeAdapter *)componentTypeAdapter
                    withIOSClass:(IOSClass *)componentType {
  ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(self, context, componentTypeAdapter, componentType);
  return self;
}

- (id)readWithDPGSStreamJsonReader:(DPGSStreamJsonReader *)inArg {
  if ([((DPGSStreamJsonReader *) nil_chk(inArg)) peek] == JreLoadEnum(DPGSStreamJsonToken, NULL)) {
    [inArg nextNull];
    return nil;
  }
  id<JavaUtilList> list = new_JavaUtilArrayList_init();
  [inArg beginArray];
  while ([inArg hasNext]) {
    id instance = [((DPGSTypeAdapter *) nil_chk(componentTypeAdapter_)) readWithDPGSStreamJsonReader:inArg];
    [list addWithId:instance];
  }
  [inArg endArray];
  id array = JavaLangReflectArray_newInstanceWithIOSClass_withInt_(componentType_, [list size]);
  for (jint i = 0; i < [list size]; i++) {
    JavaLangReflectArray_setWithId_withInt_withId_(array, i, [list getWithInt:i]);
  }
  return array;
}

- (void)writeWithDPGSStreamJsonWriter:(DPGSStreamJsonWriter *)outArg
                               withId:(id)array {
  if (array == nil) {
    (void) [((DPGSStreamJsonWriter *) nil_chk(outArg)) nullValue];
    return;
  }
  (void) [((DPGSStreamJsonWriter *) nil_chk(outArg)) beginArray];
  for (jint i = 0, length = JavaLangReflectArray_getLengthWithId_(array); i < length; i++) {
    id value = JavaLangReflectArray_getWithId_withInt_(array, i);
    [((DPGSTypeAdapter *) nil_chk(componentTypeAdapter_)) writeWithDPGSStreamJsonWriter:outArg withId:value];
  }
  (void) [outArg endArray];
}

+ (void)initialize {
  if (self == [ComGoogleGsonInternalBindArrayTypeAdapter class]) {
    ComGoogleGsonInternalBindArrayTypeAdapter_FACTORY = new_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init();
    J2OBJC_SET_INITIALIZED(ComGoogleGsonInternalBindArrayTypeAdapter)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDPGSGson:withDPGSTypeAdapter:withIOSClass:", "ArrayTypeAdapter", NULL, 0x1, NULL, "(Lcom/google/gson/Gson;Lcom/google/gson/TypeAdapter<TE;>;Ljava/lang/Class<TE;>;)V" },
    { "readWithDPGSStreamJsonReader:", "read", "Ljava.lang.Object;", 0x1, "Ljava.io.IOException;", "(Lcom/google/gson/stream/JsonReader;)Ljava/lang/Object;" },
    { "writeWithDPGSStreamJsonWriter:withId:", "write", "V", 0x1, "Ljava.io.IOException;", "(Lcom/google/gson/stream/JsonWriter;Ljava/lang/Object;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "FACTORY", "FACTORY", 0x19, "Lcom.google.gson.TypeAdapterFactory;", &ComGoogleGsonInternalBindArrayTypeAdapter_FACTORY, NULL, .constantValue.asLong = 0 },
    { "componentType_", NULL, 0x12, "Ljava.lang.Class;", NULL, "Ljava/lang/Class<TE;>;", .constantValue.asLong = 0 },
    { "componentTypeAdapter_", NULL, 0x12, "Lcom.google.gson.TypeAdapter;", NULL, "Lcom/google/gson/TypeAdapter<TE;>;", .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"Ljava.lang.Object;"};
  static const J2ObjcClassInfo _ComGoogleGsonInternalBindArrayTypeAdapter = { 2, "ArrayTypeAdapter", "com.google.gson.internal.bind", NULL, 0x11, 3, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lcom/google/gson/TypeAdapter<Ljava/lang/Object;>;" };
  return &_ComGoogleGsonInternalBindArrayTypeAdapter;
}

@end

void ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(ComGoogleGsonInternalBindArrayTypeAdapter *self, DPGSGson *context, DPGSTypeAdapter *componentTypeAdapter, IOSClass *componentType) {
  DPGSTypeAdapter_init(self);
  self->componentTypeAdapter_ = new_ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(context, componentTypeAdapter, componentType);
  self->componentType_ = componentType;
}

ComGoogleGsonInternalBindArrayTypeAdapter *new_ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(DPGSGson *context, DPGSTypeAdapter *componentTypeAdapter, IOSClass *componentType) {
  ComGoogleGsonInternalBindArrayTypeAdapter *self = [ComGoogleGsonInternalBindArrayTypeAdapter alloc];
  ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(self, context, componentTypeAdapter, componentType);
  return self;
}

ComGoogleGsonInternalBindArrayTypeAdapter *create_ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(DPGSGson *context, DPGSTypeAdapter *componentTypeAdapter, IOSClass *componentType) {
  return new_ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(context, componentTypeAdapter, componentType);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoogleGsonInternalBindArrayTypeAdapter)

@implementation ComGoogleGsonInternalBindArrayTypeAdapter_$1

- (DPGSTypeAdapter *)createWithDPGSGson:(DPGSGson *)gson
               withDPGSReflectTypeToken:(DPGSReflectTypeToken *)typeToken {
  id<JavaLangReflectType> type = [((DPGSReflectTypeToken *) nil_chk(typeToken)) getType];
  if (!([JavaLangReflectGenericArrayType_class_() isInstance:type] || ([type isKindOfClass:[IOSClass class]] && [((IOSClass *) nil_chk(((IOSClass *) cast_chk(type, [IOSClass class])))) isArray]))) {
    return nil;
  }
  id<JavaLangReflectType> componentType = DPGSInternal$Gson$Types_getArrayComponentTypeWithJavaLangReflectType_(type);
  DPGSTypeAdapter *componentTypeAdapter = [((DPGSGson *) nil_chk(gson)) getAdapterWithDPGSReflectTypeToken:DPGSReflectTypeToken_getWithJavaLangReflectType_(componentType)];
  return new_ComGoogleGsonInternalBindArrayTypeAdapter_initWithDPGSGson_withDPGSTypeAdapter_withIOSClass_(gson, componentTypeAdapter, DPGSInternal$Gson$Types_getRawTypeWithJavaLangReflectType_(componentType));
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComGoogleGsonInternalBindArrayTypeAdapter_$1_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "createWithDPGSGson:withDPGSReflectTypeToken:", "create", "Lcom.google.gson.TypeAdapter;", 0x1, NULL, "<T:Ljava/lang/Object;>(Lcom/google/gson/Gson;Lcom/google/gson/reflect/TypeToken<TT;>;)Lcom/google/gson/TypeAdapter<TT;>;" },
    { "init", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcClassInfo _ComGoogleGsonInternalBindArrayTypeAdapter_$1 = { 2, "", "com.google.gson.internal.bind", "ArrayTypeAdapter", 0x8008, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComGoogleGsonInternalBindArrayTypeAdapter_$1;
}

@end

void ComGoogleGsonInternalBindArrayTypeAdapter_$1_init(ComGoogleGsonInternalBindArrayTypeAdapter_$1 *self) {
  NSObject_init(self);
}

ComGoogleGsonInternalBindArrayTypeAdapter_$1 *new_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init() {
  ComGoogleGsonInternalBindArrayTypeAdapter_$1 *self = [ComGoogleGsonInternalBindArrayTypeAdapter_$1 alloc];
  ComGoogleGsonInternalBindArrayTypeAdapter_$1_init(self);
  return self;
}

ComGoogleGsonInternalBindArrayTypeAdapter_$1 *create_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init() {
  return new_ComGoogleGsonInternalBindArrayTypeAdapter_$1_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoogleGsonInternalBindArrayTypeAdapter_$1)
