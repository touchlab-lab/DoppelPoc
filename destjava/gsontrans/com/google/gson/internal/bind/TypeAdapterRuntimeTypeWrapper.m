//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/gson/gson/src/main/java/com/google/gson/internal/bind/TypeAdapterRuntimeTypeWrapper.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/google/gson/Gson.h"
#include "com/google/gson/TypeAdapter.h"
#include "com/google/gson/internal/bind/ReflectiveTypeAdapterFactory.h"
#include "com/google/gson/internal/bind/TypeAdapterRuntimeTypeWrapper.h"
#include "com/google/gson/reflect/TypeToken.h"
#include "com/google/gson/stream/JsonReader.h"
#include "com/google/gson/stream/JsonWriter.h"
#include "java/io/IOException.h"
#include "java/lang/reflect/Type.h"
#include "java/lang/reflect/TypeVariable.h"

@interface ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper () {
 @public
  DPGSGson *context_;
  DPGSTypeAdapter *delegate_;
  id<JavaLangReflectType> type_;
}

- (id<JavaLangReflectType>)getRuntimeTypeIfMoreSpecificWithJavaLangReflectType:(id<JavaLangReflectType>)type
                                                                        withId:(id)value;

@end

J2OBJC_FIELD_SETTER(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper, context_, DPGSGson *)
J2OBJC_FIELD_SETTER(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper, delegate_, DPGSTypeAdapter *)
J2OBJC_FIELD_SETTER(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper, type_, id<JavaLangReflectType>)

__attribute__((unused)) static id<JavaLangReflectType> ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_getRuntimeTypeIfMoreSpecificWithJavaLangReflectType_withId_(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *self, id<JavaLangReflectType> type, id value);

@implementation ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper

- (instancetype)initWithDPGSGson:(DPGSGson *)context
             withDPGSTypeAdapter:(DPGSTypeAdapter *)delegate
         withJavaLangReflectType:(id<JavaLangReflectType>)type {
  ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(self, context, delegate, type);
  return self;
}

- (id)readWithDPGSStreamJsonReader:(DPGSStreamJsonReader *)inArg {
  return [((DPGSTypeAdapter *) nil_chk(delegate_)) readWithDPGSStreamJsonReader:inArg];
}

- (void)writeWithDPGSStreamJsonWriter:(DPGSStreamJsonWriter *)outArg
                               withId:(id)value {
  DPGSTypeAdapter *chosen = delegate_;
  id<JavaLangReflectType> runtimeType = ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_getRuntimeTypeIfMoreSpecificWithJavaLangReflectType_withId_(self, type_, value);
  if (runtimeType != type_) {
    DPGSTypeAdapter *runtimeTypeAdapter = [((DPGSGson *) nil_chk(context_)) getAdapterWithDPGSReflectTypeToken:DPGSReflectTypeToken_getWithJavaLangReflectType_(runtimeType)];
    if (!([runtimeTypeAdapter isKindOfClass:[ComGoogleGsonInternalBindReflectiveTypeAdapterFactory_Adapter class]])) {
      chosen = runtimeTypeAdapter;
    }
    else if (!([delegate_ isKindOfClass:[ComGoogleGsonInternalBindReflectiveTypeAdapterFactory_Adapter class]])) {
      chosen = delegate_;
    }
    else {
      chosen = runtimeTypeAdapter;
    }
  }
  [((DPGSTypeAdapter *) nil_chk(chosen)) writeWithDPGSStreamJsonWriter:outArg withId:value];
}

- (id<JavaLangReflectType>)getRuntimeTypeIfMoreSpecificWithJavaLangReflectType:(id<JavaLangReflectType>)type
                                                                        withId:(id)value {
  return ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_getRuntimeTypeIfMoreSpecificWithJavaLangReflectType_withId_(self, type, value);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithDPGSGson:withDPGSTypeAdapter:withJavaLangReflectType:", "TypeAdapterRuntimeTypeWrapper", NULL, 0x0, NULL, "(Lcom/google/gson/Gson;Lcom/google/gson/TypeAdapter<TT;>;Ljava/lang/reflect/Type;)V" },
    { "readWithDPGSStreamJsonReader:", "read", "TT;", 0x1, "Ljava.io.IOException;", "(Lcom/google/gson/stream/JsonReader;)TT;" },
    { "writeWithDPGSStreamJsonWriter:withId:", "write", "V", 0x1, "Ljava.io.IOException;", "(Lcom/google/gson/stream/JsonWriter;TT;)V" },
    { "getRuntimeTypeIfMoreSpecificWithJavaLangReflectType:withId:", "getRuntimeTypeIfMoreSpecific", "Ljava.lang.reflect.Type;", 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "context_", NULL, 0x12, "Lcom.google.gson.Gson;", NULL, NULL, .constantValue.asLong = 0 },
    { "delegate_", NULL, 0x12, "Lcom.google.gson.TypeAdapter;", NULL, "Lcom/google/gson/TypeAdapter<TT;>;", .constantValue.asLong = 0 },
    { "type_", NULL, 0x12, "Ljava.lang.reflect.Type;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TT;"};
  static const J2ObjcClassInfo _ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper = { 2, "TypeAdapterRuntimeTypeWrapper", "com.google.gson.internal.bind", NULL, 0x10, 4, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "<T:Ljava/lang/Object;>Lcom/google/gson/TypeAdapter<TT;>;" };
  return &_ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper;
}

@end

void ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *self, DPGSGson *context, DPGSTypeAdapter *delegate, id<JavaLangReflectType> type) {
  DPGSTypeAdapter_init(self);
  self->context_ = context;
  self->delegate_ = delegate;
  self->type_ = type;
}

ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *new_ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(DPGSGson *context, DPGSTypeAdapter *delegate, id<JavaLangReflectType> type) {
  ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *self = [ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper alloc];
  ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(self, context, delegate, type);
  return self;
}

ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *create_ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(DPGSGson *context, DPGSTypeAdapter *delegate, id<JavaLangReflectType> type) {
  return new_ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_initWithDPGSGson_withDPGSTypeAdapter_withJavaLangReflectType_(context, delegate, type);
}

id<JavaLangReflectType> ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper_getRuntimeTypeIfMoreSpecificWithJavaLangReflectType_withId_(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper *self, id<JavaLangReflectType> type, id value) {
  if (value != nil && (type == NSObject_class_() || [JavaLangReflectTypeVariable_class_() isInstance:type] || [type isKindOfClass:[IOSClass class]])) {
    type = [value getClass];
  }
  return type;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComGoogleGsonInternalBindTypeAdapterRuntimeTypeWrapper)
