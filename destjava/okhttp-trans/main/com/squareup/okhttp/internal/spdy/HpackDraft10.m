//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/sourcejava/okhttp/okhttp/src/main/java/com/squareup/okhttp/internal/spdy/HpackDraft10.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "com/squareup/okhttp/internal/spdy/HpackDraft10.h"
#include "com/squareup/okhttp/internal/spdy/Huffman.h"
#include "com/squareup/okhttp/internal/spdy/SpdyHeader.h"
#include "java/io/IOException.h"
#include "java/lang/Integer.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/Arrays.h"
#include "java/util/Collections.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "okio/Buffer.h"
#include "okio/BufferedSource.h"
#include "okio/ByteString.h"
#include "okio/Okio.h"
#include "okio/Source.h"

@interface ComSquareupOkhttpInternalSpdyHpackDraft10 ()

- (instancetype)init;

+ (id<JavaUtilMap>)nameToFirstIndex;

+ (OkioByteString *)checkLowercaseWithOkioByteString:(OkioByteString *)name;

@end

inline jint ComSquareupOkhttpInternalSpdyHpackDraft10_get_PREFIX_4_BITS();
#define ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_4_BITS 15
J2OBJC_STATIC_FIELD_CONSTANT(ComSquareupOkhttpInternalSpdyHpackDraft10, PREFIX_4_BITS, jint)

inline jint ComSquareupOkhttpInternalSpdyHpackDraft10_get_PREFIX_5_BITS();
#define ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_5_BITS 31
J2OBJC_STATIC_FIELD_CONSTANT(ComSquareupOkhttpInternalSpdyHpackDraft10, PREFIX_5_BITS, jint)

inline jint ComSquareupOkhttpInternalSpdyHpackDraft10_get_PREFIX_6_BITS();
#define ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_6_BITS 63
J2OBJC_STATIC_FIELD_CONSTANT(ComSquareupOkhttpInternalSpdyHpackDraft10, PREFIX_6_BITS, jint)

inline jint ComSquareupOkhttpInternalSpdyHpackDraft10_get_PREFIX_7_BITS();
#define ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_7_BITS 127
J2OBJC_STATIC_FIELD_CONSTANT(ComSquareupOkhttpInternalSpdyHpackDraft10, PREFIX_7_BITS, jint)

inline IOSObjectArray *ComSquareupOkhttpInternalSpdyHpackDraft10_get_STATIC_HEADER_TABLE();
static IOSObjectArray *ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE, IOSObjectArray *)

inline id<JavaUtilMap> ComSquareupOkhttpInternalSpdyHpackDraft10_get_NAME_TO_FIRST_INDEX();
static id<JavaUtilMap> ComSquareupOkhttpInternalSpdyHpackDraft10_NAME_TO_FIRST_INDEX;
J2OBJC_STATIC_FIELD_OBJ_FINAL(ComSquareupOkhttpInternalSpdyHpackDraft10, NAME_TO_FIRST_INDEX, id<JavaUtilMap>)

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_init(ComSquareupOkhttpInternalSpdyHpackDraft10 *self);

__attribute__((unused)) static ComSquareupOkhttpInternalSpdyHpackDraft10 *new_ComSquareupOkhttpInternalSpdyHpackDraft10_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static ComSquareupOkhttpInternalSpdyHpackDraft10 *create_ComSquareupOkhttpInternalSpdyHpackDraft10_init();

__attribute__((unused)) static id<JavaUtilMap> ComSquareupOkhttpInternalSpdyHpackDraft10_nameToFirstIndex();

__attribute__((unused)) static OkioByteString *ComSquareupOkhttpInternalSpdyHpackDraft10_checkLowercaseWithOkioByteString_(OkioByteString *name);

@interface ComSquareupOkhttpInternalSpdyHpackDraft10_Reader () {
 @public
  id<JavaUtilList> headerList_;
  id<OkioBufferedSource> source_;
  jint headerTableSizeSetting_;
  jint maxDynamicTableByteCount_;
}

- (void)adjustDynamicTableByteCount;

- (void)clearDynamicTable;

- (jint)evictToRecoverBytesWithInt:(jint)bytesToRecover;

- (void)readIndexedHeaderWithInt:(jint)index;

- (jint)dynamicTableIndexWithInt:(jint)index;

- (void)readLiteralHeaderWithoutIndexingIndexedNameWithInt:(jint)index;

- (void)readLiteralHeaderWithoutIndexingNewName;

- (void)readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt:(jint)nameIndex;

- (void)readLiteralHeaderWithIncrementalIndexingNewName;

- (OkioByteString *)getNameWithInt:(jint)index;

- (jboolean)isStaticHeaderWithInt:(jint)index;

- (void)insertIntoDynamicTableWithInt:(jint)index
withComSquareupOkhttpInternalSpdySpdyHeader:(ComSquareupOkhttpInternalSpdySpdyHeader *)entry_;

- (jint)readByte;

@end

J2OBJC_FIELD_SETTER(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader, headerList_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader, source_, id<OkioBufferedSource>)

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_adjustDynamicTableByteCount(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_clearDynamicTable(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self);

__attribute__((unused)) static jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_evictToRecoverBytesWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint bytesToRecover);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readIndexedHeaderWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index);

__attribute__((unused)) static jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingIndexedNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingNewName(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint nameIndex);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingNewName(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self);

__attribute__((unused)) static OkioByteString *ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_getNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index);

__attribute__((unused)) static jboolean ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_isStaticHeaderWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index);

__attribute__((unused)) static void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_insertIntoDynamicTableWithInt_withComSquareupOkhttpInternalSpdySpdyHeader_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index, ComSquareupOkhttpInternalSpdySpdyHeader *entry_);

__attribute__((unused)) static jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readByte(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self);

@interface ComSquareupOkhttpInternalSpdyHpackDraft10_Writer () {
 @public
  OkioBuffer *out_;
}

@end

J2OBJC_FIELD_SETTER(ComSquareupOkhttpInternalSpdyHpackDraft10_Writer, out_, OkioBuffer *)

J2OBJC_INITIALIZED_DEFN(ComSquareupOkhttpInternalSpdyHpackDraft10)

@implementation ComSquareupOkhttpInternalSpdyHpackDraft10

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  ComSquareupOkhttpInternalSpdyHpackDraft10_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (id<JavaUtilMap>)nameToFirstIndex {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_nameToFirstIndex();
}

+ (OkioByteString *)checkLowercaseWithOkioByteString:(OkioByteString *)name {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_checkLowercaseWithOkioByteString_(name);
}

+ (void)initialize {
  if (self == [ComSquareupOkhttpInternalSpdyHpackDraft10 class]) {
    ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE = [IOSObjectArray newArrayWithObjects:(id[]){ new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_AUTHORITY), @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_METHOD), @"GET"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_METHOD), @"POST"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_PATH), @"/"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_PATH), @"/index.html"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_SCHEME), @"http"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, TARGET_SCHEME), @"https"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"200"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"204"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"206"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"304"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"400"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"404"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withNSString_(JreLoadStatic(ComSquareupOkhttpInternalSpdySpdyHeader, RESPONSE_STATUS), @"500"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"accept-charset", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"accept-encoding", @"gzip, deflate"), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"accept-language", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"accept-ranges", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"accept", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"access-control-allow-origin", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"age", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"allow", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"authorization", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"cache-control", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-disposition", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-encoding", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-language", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-length", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-location", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-range", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"content-type", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"cookie", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"date", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"etag", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"expect", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"expires", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"from", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"host", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"if-match", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"if-modified-since", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"if-none-match", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"if-range", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"if-unmodified-since", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"last-modified", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"link", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"location", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"max-forwards", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"proxy-authenticate", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"proxy-authorization", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"range", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"referer", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"refresh", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"retry-after", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"server", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"set-cookie", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"strict-transport-security", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"transfer-encoding", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"user-agent", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"vary", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"via", @""), new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithNSString_withNSString_(@"www-authenticate", @"") } count:61 type:ComSquareupOkhttpInternalSpdySpdyHeader_class_()];
    ComSquareupOkhttpInternalSpdyHpackDraft10_NAME_TO_FIRST_INDEX = ComSquareupOkhttpInternalSpdyHpackDraft10_nameToFirstIndex();
    J2OBJC_SET_INITIALIZED(ComSquareupOkhttpInternalSpdyHpackDraft10)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "HpackDraft10", NULL, 0x2, NULL, NULL },
    { "nameToFirstIndex", NULL, "Ljava.util.Map;", 0xa, NULL, "()Ljava/util/Map<Lokio/ByteString;Ljava/lang/Integer;>;" },
    { "checkLowercaseWithOkioByteString:", "checkLowercase", "Lokio.ByteString;", 0xa, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "PREFIX_4_BITS", "PREFIX_4_BITS", 0x1a, "I", NULL, NULL, .constantValue.asInt = ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_4_BITS },
    { "PREFIX_5_BITS", "PREFIX_5_BITS", 0x1a, "I", NULL, NULL, .constantValue.asInt = ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_5_BITS },
    { "PREFIX_6_BITS", "PREFIX_6_BITS", 0x1a, "I", NULL, NULL, .constantValue.asInt = ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_6_BITS },
    { "PREFIX_7_BITS", "PREFIX_7_BITS", 0x1a, "I", NULL, NULL, .constantValue.asInt = ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_7_BITS },
    { "STATIC_HEADER_TABLE", "STATIC_HEADER_TABLE", 0x1a, "[Lcom.squareup.okhttp.internal.spdy.SpdyHeader;", &ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE, NULL, .constantValue.asLong = 0 },
    { "NAME_TO_FIRST_INDEX", "NAME_TO_FIRST_INDEX", 0x1a, "Ljava.util.Map;", &ComSquareupOkhttpInternalSpdyHpackDraft10_NAME_TO_FIRST_INDEX, "Ljava/util/Map<Lokio/ByteString;Ljava/lang/Integer;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lcom.squareup.okhttp.internal.spdy.HpackDraft10$Reader;", "Lcom.squareup.okhttp.internal.spdy.HpackDraft10$Writer;"};
  static const J2ObjcClassInfo _ComSquareupOkhttpInternalSpdyHpackDraft10 = { 2, "HpackDraft10", "com.squareup.okhttp.internal.spdy", NULL, 0x10, 3, methods, 6, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_ComSquareupOkhttpInternalSpdyHpackDraft10;
}

@end

void ComSquareupOkhttpInternalSpdyHpackDraft10_init(ComSquareupOkhttpInternalSpdyHpackDraft10 *self) {
  NSObject_init(self);
}

ComSquareupOkhttpInternalSpdyHpackDraft10 *new_ComSquareupOkhttpInternalSpdyHpackDraft10_init() {
  ComSquareupOkhttpInternalSpdyHpackDraft10 *self = [ComSquareupOkhttpInternalSpdyHpackDraft10 alloc];
  ComSquareupOkhttpInternalSpdyHpackDraft10_init(self);
  return self;
}

ComSquareupOkhttpInternalSpdyHpackDraft10 *create_ComSquareupOkhttpInternalSpdyHpackDraft10_init() {
  return new_ComSquareupOkhttpInternalSpdyHpackDraft10_init();
}

id<JavaUtilMap> ComSquareupOkhttpInternalSpdyHpackDraft10_nameToFirstIndex() {
  ComSquareupOkhttpInternalSpdyHpackDraft10_initialize();
  id<JavaUtilMap> result = new_JavaUtilLinkedHashMap_initWithInt_(((IOSObjectArray *) nil_chk(ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE))->size_);
  for (jint i = 0; i < ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE->size_; i++) {
    if (![result containsKeyWithId:((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE, i)))->name_]) {
      (void) [result putWithId:((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(ComSquareupOkhttpInternalSpdyHpackDraft10_STATIC_HEADER_TABLE, i)))->name_ withId:JavaLangInteger_valueOfWithInt_(i)];
    }
  }
  return JavaUtilCollections_unmodifiableMapWithJavaUtilMap_(result);
}

OkioByteString *ComSquareupOkhttpInternalSpdyHpackDraft10_checkLowercaseWithOkioByteString_(OkioByteString *name) {
  ComSquareupOkhttpInternalSpdyHpackDraft10_initialize();
  for (jint i = 0, length = [((OkioByteString *) nil_chk(name)) size]; i < length; i++) {
    jbyte c = [name getByteWithInt:i];
    if (c >= 'A' && c <= 'Z') {
      @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$$", @"PROTOCOL_ERROR response malformed: mixed case name: ", [name utf8]));
    }
  }
  return name;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComSquareupOkhttpInternalSpdyHpackDraft10)

@implementation ComSquareupOkhttpInternalSpdyHpackDraft10_Reader

- (instancetype)initWithInt:(jint)headerTableSizeSetting
             withOkioSource:(id<OkioSource>)source {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(self, headerTableSizeSetting, source);
  return self;
}

- (jint)maxDynamicTableByteCount {
  return maxDynamicTableByteCount_;
}

- (void)headerTableSizeSettingWithInt:(jint)headerTableSizeSetting {
  self->headerTableSizeSetting_ = headerTableSizeSetting;
  self->maxDynamicTableByteCount_ = headerTableSizeSetting;
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_adjustDynamicTableByteCount(self);
}

- (void)adjustDynamicTableByteCount {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_adjustDynamicTableByteCount(self);
}

- (void)clearDynamicTable {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_clearDynamicTable(self);
}

- (jint)evictToRecoverBytesWithInt:(jint)bytesToRecover {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_evictToRecoverBytesWithInt_(self, bytesToRecover);
}

- (void)readHeaders {
  while (![((id<OkioBufferedSource>) nil_chk(source_)) exhausted]) {
    jint b = [source_ readByte] & (jint) 0xff;
    if (b == (jint) 0x80) {
      @throw new_JavaIoIOException_initWithNSString_(@"index == 0");
    }
    else if ((b & (jint) 0x80) == (jint) 0x80) {
      jint index = [self readIntWithInt:b withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_7_BITS];
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readIndexedHeaderWithInt_(self, index - 1);
    }
    else if (b == (jint) 0x40) {
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingNewName(self);
    }
    else if ((b & (jint) 0x40) == (jint) 0x40) {
      jint index = [self readIntWithInt:b withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_6_BITS];
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt_(self, index - 1);
    }
    else if ((b & (jint) 0x20) == (jint) 0x20) {
      maxDynamicTableByteCount_ = [self readIntWithInt:b withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_5_BITS];
      if (maxDynamicTableByteCount_ < 0 || maxDynamicTableByteCount_ > headerTableSizeSetting_) {
        @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$I", @"Invalid dynamic table size update ", maxDynamicTableByteCount_));
      }
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_adjustDynamicTableByteCount(self);
    }
    else if (b == (jint) 0x10 || b == 0) {
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingNewName(self);
    }
    else {
      jint index = [self readIntWithInt:b withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_4_BITS];
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingIndexedNameWithInt_(self, index - 1);
    }
  }
}

- (id<JavaUtilList>)getAndResetHeaderList {
  id<JavaUtilList> result = new_JavaUtilArrayList_initWithJavaUtilCollection_(headerList_);
  [((id<JavaUtilList>) nil_chk(headerList_)) clear];
  return result;
}

- (void)readIndexedHeaderWithInt:(jint)index {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readIndexedHeaderWithInt_(self, index);
}

- (jint)dynamicTableIndexWithInt:(jint)index {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(self, index);
}

- (void)readLiteralHeaderWithoutIndexingIndexedNameWithInt:(jint)index {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingIndexedNameWithInt_(self, index);
}

- (void)readLiteralHeaderWithoutIndexingNewName {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingNewName(self);
}

- (void)readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt:(jint)nameIndex {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt_(self, nameIndex);
}

- (void)readLiteralHeaderWithIncrementalIndexingNewName {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingNewName(self);
}

- (OkioByteString *)getNameWithInt:(jint)index {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_getNameWithInt_(self, index);
}

- (jboolean)isStaticHeaderWithInt:(jint)index {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_isStaticHeaderWithInt_(self, index);
}

- (void)insertIntoDynamicTableWithInt:(jint)index
withComSquareupOkhttpInternalSpdySpdyHeader:(ComSquareupOkhttpInternalSpdySpdyHeader *)entry_ {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_insertIntoDynamicTableWithInt_withComSquareupOkhttpInternalSpdySpdyHeader_(self, index, entry_);
}

- (jint)readByte {
  return ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readByte(self);
}

- (jint)readIntWithInt:(jint)firstByte
               withInt:(jint)prefixMask {
  jint prefix = firstByte & prefixMask;
  if (prefix < prefixMask) {
    return prefix;
  }
  jint result = prefixMask;
  jint shift = 0;
  while (true) {
    jint b = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readByte(self);
    if ((b & (jint) 0x80) != 0) {
      result += JreLShift32((b & (jint) 0x7f), shift);
      shift += 7;
    }
    else {
      result += JreLShift32(b, shift);
      break;
    }
  }
  return result;
}

- (OkioByteString *)readByteString {
  jint firstByte = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readByte(self);
  jboolean huffmanDecode = (firstByte & (jint) 0x80) == (jint) 0x80;
  jint length = [self readIntWithInt:firstByte withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_7_BITS];
  if (huffmanDecode) {
    return OkioByteString_ofWithByteArray_([((ComSquareupOkhttpInternalSpdyHuffman *) nil_chk(ComSquareupOkhttpInternalSpdyHuffman_get())) decodeWithByteArray:[((id<OkioBufferedSource>) nil_chk(source_)) readByteArrayWithLong:length]]);
  }
  else {
    return [((id<OkioBufferedSource>) nil_chk(source_)) readByteStringWithLong:length];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:withOkioSource:", "Reader", NULL, 0x0, NULL, NULL },
    { "maxDynamicTableByteCount", NULL, "I", 0x0, NULL, NULL },
    { "headerTableSizeSettingWithInt:", "headerTableSizeSetting", "V", 0x0, NULL, NULL },
    { "adjustDynamicTableByteCount", NULL, "V", 0x2, NULL, NULL },
    { "clearDynamicTable", NULL, "V", 0x2, NULL, NULL },
    { "evictToRecoverBytesWithInt:", "evictToRecoverBytes", "I", 0x2, NULL, NULL },
    { "readHeaders", NULL, "V", 0x0, "Ljava.io.IOException;", NULL },
    { "getAndResetHeaderList", NULL, "Ljava.util.List;", 0x1, NULL, "()Ljava/util/List<Lcom/squareup/okhttp/internal/spdy/SpdyHeader;>;" },
    { "readIndexedHeaderWithInt:", "readIndexedHeader", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "dynamicTableIndexWithInt:", "dynamicTableIndex", "I", 0x2, NULL, NULL },
    { "readLiteralHeaderWithoutIndexingIndexedNameWithInt:", "readLiteralHeaderWithoutIndexingIndexedName", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "readLiteralHeaderWithoutIndexingNewName", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt:", "readLiteralHeaderWithIncrementalIndexingIndexedName", "V", 0x2, "Ljava.io.IOException;", NULL },
    { "readLiteralHeaderWithIncrementalIndexingNewName", NULL, "V", 0x2, "Ljava.io.IOException;", NULL },
    { "getNameWithInt:", "getName", "Lokio.ByteString;", 0x2, NULL, NULL },
    { "isStaticHeaderWithInt:", "isStaticHeader", "Z", 0x2, NULL, NULL },
    { "insertIntoDynamicTableWithInt:withComSquareupOkhttpInternalSpdySpdyHeader:", "insertIntoDynamicTable", "V", 0x2, NULL, NULL },
    { "readByte", NULL, "I", 0x2, "Ljava.io.IOException;", NULL },
    { "readIntWithInt:withInt:", "readInt", "I", 0x0, "Ljava.io.IOException;", NULL },
    { "readByteString", NULL, "Lokio.ByteString;", 0x0, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "headerList_", NULL, 0x12, "Ljava.util.List;", NULL, "Ljava/util/List<Lcom/squareup/okhttp/internal/spdy/SpdyHeader;>;", .constantValue.asLong = 0 },
    { "source_", NULL, 0x12, "Lokio.BufferedSource;", NULL, NULL, .constantValue.asLong = 0 },
    { "headerTableSizeSetting_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "maxDynamicTableByteCount_", NULL, 0x2, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "dynamicTable_", NULL, 0x0, "[Lcom.squareup.okhttp.internal.spdy.SpdyHeader;", NULL, NULL, .constantValue.asLong = 0 },
    { "nextHeaderIndex_", NULL, 0x0, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "headerCount_", NULL, 0x0, "I", NULL, NULL, .constantValue.asLong = 0 },
    { "dynamicTableByteCount_", NULL, 0x0, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ComSquareupOkhttpInternalSpdyHpackDraft10_Reader = { 2, "Reader", "com.squareup.okhttp.internal.spdy", "HpackDraft10", 0x18, 20, methods, 8, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComSquareupOkhttpInternalSpdyHpackDraft10_Reader;
}

@end

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint headerTableSizeSetting, id<OkioSource> source) {
  NSObject_init(self);
  self->headerList_ = new_JavaUtilArrayList_init();
  self->dynamicTable_ = [IOSObjectArray newArrayWithLength:8 type:ComSquareupOkhttpInternalSpdySpdyHeader_class_()];
  self->nextHeaderIndex_ = self->dynamicTable_->size_ - 1;
  self->headerCount_ = 0;
  self->dynamicTableByteCount_ = 0;
  self->headerTableSizeSetting_ = headerTableSizeSetting;
  self->maxDynamicTableByteCount_ = headerTableSizeSetting;
  self->source_ = OkioOkio_bufferWithOkioSource_(source);
}

ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *new_ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(jint headerTableSizeSetting, id<OkioSource> source) {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self = [ComSquareupOkhttpInternalSpdyHpackDraft10_Reader alloc];
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(self, headerTableSizeSetting, source);
  return self;
}

ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *create_ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(jint headerTableSizeSetting, id<OkioSource> source) {
  return new_ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_initWithInt_withOkioSource_(headerTableSizeSetting, source);
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_adjustDynamicTableByteCount(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self) {
  if (self->maxDynamicTableByteCount_ < self->dynamicTableByteCount_) {
    if (self->maxDynamicTableByteCount_ == 0) {
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_clearDynamicTable(self);
    }
    else {
      ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_evictToRecoverBytesWithInt_(self, self->dynamicTableByteCount_ - self->maxDynamicTableByteCount_);
    }
  }
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_clearDynamicTable(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self) {
  [((id<JavaUtilList>) nil_chk(self->headerList_)) clear];
  JavaUtilArrays_fillWithNSObjectArray_withId_(self->dynamicTable_, nil);
  self->nextHeaderIndex_ = ((IOSObjectArray *) nil_chk(self->dynamicTable_))->size_ - 1;
  self->headerCount_ = 0;
  self->dynamicTableByteCount_ = 0;
}

jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_evictToRecoverBytesWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint bytesToRecover) {
  jint entriesToEvict = 0;
  if (bytesToRecover > 0) {
    for (jint j = ((IOSObjectArray *) nil_chk(self->dynamicTable_))->size_ - 1; j >= self->nextHeaderIndex_ && bytesToRecover > 0; j--) {
      bytesToRecover -= ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(self->dynamicTable_, j)))->hpackSize_;
      self->dynamicTableByteCount_ -= ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(self->dynamicTable_, j)))->hpackSize_;
      self->headerCount_--;
      entriesToEvict++;
    }
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->dynamicTable_, self->nextHeaderIndex_ + 1, self->dynamicTable_, self->nextHeaderIndex_ + 1 + entriesToEvict, self->headerCount_);
    self->nextHeaderIndex_ += entriesToEvict;
  }
  return entriesToEvict;
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readIndexedHeaderWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index) {
  if (ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_isStaticHeaderWithInt_(self, index)) {
    ComSquareupOkhttpInternalSpdySpdyHeader *staticEntry = IOSObjectArray_Get(nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE)), index);
    [((id<JavaUtilList>) nil_chk(self->headerList_)) addWithId:staticEntry];
  }
  else {
    jint dynamicTableIndex = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(self, index - ((IOSObjectArray *) nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE)))->size_);
    if (dynamicTableIndex < 0 || dynamicTableIndex > ((IOSObjectArray *) nil_chk(self->dynamicTable_))->size_ - 1) {
      @throw new_JavaIoIOException_initWithNSString_(JreStrcat("$I", @"Header index too large ", (index + 1)));
    }
    [((id<JavaUtilList>) nil_chk(self->headerList_)) addWithId:IOSObjectArray_Get(nil_chk(self->dynamicTable_), dynamicTableIndex)];
  }
}

jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index) {
  return self->nextHeaderIndex_ + 1 + index;
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingIndexedNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index) {
  OkioByteString *name = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_getNameWithInt_(self, index);
  OkioByteString *value = [self readByteString];
  [((id<JavaUtilList>) nil_chk(self->headerList_)) addWithId:new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withOkioByteString_(name, value)];
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithoutIndexingNewName(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self) {
  OkioByteString *name = ComSquareupOkhttpInternalSpdyHpackDraft10_checkLowercaseWithOkioByteString_([self readByteString]);
  OkioByteString *value = [self readByteString];
  [((id<JavaUtilList>) nil_chk(self->headerList_)) addWithId:new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withOkioByteString_(name, value)];
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingIndexedNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint nameIndex) {
  OkioByteString *name = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_getNameWithInt_(self, nameIndex);
  OkioByteString *value = [self readByteString];
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_insertIntoDynamicTableWithInt_withComSquareupOkhttpInternalSpdySpdyHeader_(self, -1, new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withOkioByteString_(name, value));
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readLiteralHeaderWithIncrementalIndexingNewName(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self) {
  OkioByteString *name = ComSquareupOkhttpInternalSpdyHpackDraft10_checkLowercaseWithOkioByteString_([self readByteString]);
  OkioByteString *value = [self readByteString];
  ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_insertIntoDynamicTableWithInt_withComSquareupOkhttpInternalSpdySpdyHeader_(self, -1, new_ComSquareupOkhttpInternalSpdySpdyHeader_initWithOkioByteString_withOkioByteString_(name, value));
}

OkioByteString *ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_getNameWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index) {
  if (ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_isStaticHeaderWithInt_(self, index)) {
    return ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE)), index)))->name_;
  }
  else {
    return ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(nil_chk(self->dynamicTable_), ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(self, index - ((IOSObjectArray *) nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE)))->size_))))->name_;
  }
}

jboolean ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_isStaticHeaderWithInt_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index) {
  return index >= 0 && index <= ((IOSObjectArray *) nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, STATIC_HEADER_TABLE)))->size_ - 1;
}

void ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_insertIntoDynamicTableWithInt_withComSquareupOkhttpInternalSpdySpdyHeader_(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self, jint index, ComSquareupOkhttpInternalSpdySpdyHeader *entry_) {
  [((id<JavaUtilList>) nil_chk(self->headerList_)) addWithId:entry_];
  jint delta = ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(entry_))->hpackSize_;
  if (index != -1) {
    delta -= ((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk(IOSObjectArray_Get(nil_chk(self->dynamicTable_), ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(self, index))))->hpackSize_;
  }
  if (delta > self->maxDynamicTableByteCount_) {
    ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_clearDynamicTable(self);
    return;
  }
  jint bytesToRecover = (self->dynamicTableByteCount_ + delta) - self->maxDynamicTableByteCount_;
  jint entriesEvicted = ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_evictToRecoverBytesWithInt_(self, bytesToRecover);
  if (index == -1) {
    if (self->headerCount_ + 1 > ((IOSObjectArray *) nil_chk(self->dynamicTable_))->size_) {
      IOSObjectArray *doubled = [IOSObjectArray newArrayWithLength:self->dynamicTable_->size_ * 2 type:ComSquareupOkhttpInternalSpdySpdyHeader_class_()];
      JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(self->dynamicTable_, 0, doubled, self->dynamicTable_->size_, self->dynamicTable_->size_);
      self->nextHeaderIndex_ = self->dynamicTable_->size_ - 1;
      self->dynamicTable_ = doubled;
    }
    index = self->nextHeaderIndex_--;
    (void) IOSObjectArray_Set(self->dynamicTable_, index, entry_);
    self->headerCount_++;
  }
  else {
    index += ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_dynamicTableIndexWithInt_(self, index) + entriesEvicted;
    (void) IOSObjectArray_Set(nil_chk(self->dynamicTable_), index, entry_);
  }
  self->dynamicTableByteCount_ += delta;
}

jint ComSquareupOkhttpInternalSpdyHpackDraft10_Reader_readByte(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader *self) {
  return [((id<OkioBufferedSource>) nil_chk(self->source_)) readByte] & (jint) 0xff;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComSquareupOkhttpInternalSpdyHpackDraft10_Reader)

@implementation ComSquareupOkhttpInternalSpdyHpackDraft10_Writer

- (instancetype)initWithOkioBuffer:(OkioBuffer *)outArg {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(self, outArg);
  return self;
}

- (void)writeHeadersWithJavaUtilList:(id<JavaUtilList>)headerBlock {
  for (jint i = 0, size = [((id<JavaUtilList>) nil_chk(headerBlock)) size]; i < size; i++) {
    OkioByteString *name = [((OkioByteString *) nil_chk(((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk([headerBlock getWithInt:i]))->name_)) toAsciiLowercase];
    JavaLangInteger *staticIndex = [((id<JavaUtilMap>) nil_chk(JreLoadStatic(ComSquareupOkhttpInternalSpdyHpackDraft10, NAME_TO_FIRST_INDEX))) getWithId:name];
    if (staticIndex != nil) {
      [self writeIntWithInt:[staticIndex intValue] + 1 withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_4_BITS withInt:0];
      [self writeByteStringWithOkioByteString:((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk([headerBlock getWithInt:i]))->value_];
    }
    else {
      (void) [((OkioBuffer *) nil_chk(out_)) writeByteWithInt:(jint) 0x00];
      [self writeByteStringWithOkioByteString:name];
      [self writeByteStringWithOkioByteString:((ComSquareupOkhttpInternalSpdySpdyHeader *) nil_chk([headerBlock getWithInt:i]))->value_];
    }
  }
}

- (void)writeIntWithInt:(jint)value
                withInt:(jint)prefixMask
                withInt:(jint)bits {
  if (value < prefixMask) {
    (void) [((OkioBuffer *) nil_chk(out_)) writeByteWithInt:bits | value];
    return;
  }
  (void) [((OkioBuffer *) nil_chk(out_)) writeByteWithInt:bits | prefixMask];
  value -= prefixMask;
  while (value >= (jint) 0x80) {
    jint b = value & (jint) 0x7f;
    (void) [out_ writeByteWithInt:b | (jint) 0x80];
    JreURShiftAssignInt(&value, 7);
  }
  (void) [out_ writeByteWithInt:value];
}

- (void)writeByteStringWithOkioByteString:(OkioByteString *)data {
  [self writeIntWithInt:[((OkioByteString *) nil_chk(data)) size] withInt:ComSquareupOkhttpInternalSpdyHpackDraft10_PREFIX_7_BITS withInt:0];
  (void) [((OkioBuffer *) nil_chk(out_)) writeWithOkioByteString:data];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOkioBuffer:", "Writer", NULL, 0x0, NULL, NULL },
    { "writeHeadersWithJavaUtilList:", "writeHeaders", "V", 0x0, "Ljava.io.IOException;", "(Ljava/util/List<Lcom/squareup/okhttp/internal/spdy/SpdyHeader;>;)V" },
    { "writeIntWithInt:withInt:withInt:", "writeInt", "V", 0x0, "Ljava.io.IOException;", NULL },
    { "writeByteStringWithOkioByteString:", "writeByteString", "V", 0x0, "Ljava.io.IOException;", NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "out_", NULL, 0x12, "Lokio.Buffer;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _ComSquareupOkhttpInternalSpdyHpackDraft10_Writer = { 2, "Writer", "com.squareup.okhttp.internal.spdy", "HpackDraft10", 0x18, 4, methods, 1, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_ComSquareupOkhttpInternalSpdyHpackDraft10_Writer;
}

@end

void ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(ComSquareupOkhttpInternalSpdyHpackDraft10_Writer *self, OkioBuffer *outArg) {
  NSObject_init(self);
  self->out_ = outArg;
}

ComSquareupOkhttpInternalSpdyHpackDraft10_Writer *new_ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(OkioBuffer *outArg) {
  ComSquareupOkhttpInternalSpdyHpackDraft10_Writer *self = [ComSquareupOkhttpInternalSpdyHpackDraft10_Writer alloc];
  ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(self, outArg);
  return self;
}

ComSquareupOkhttpInternalSpdyHpackDraft10_Writer *create_ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(OkioBuffer *outArg) {
  return new_ComSquareupOkhttpInternalSpdyHpackDraft10_Writer_initWithOkioBuffer_(outArg);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(ComSquareupOkhttpInternalSpdyHpackDraft10_Writer)
