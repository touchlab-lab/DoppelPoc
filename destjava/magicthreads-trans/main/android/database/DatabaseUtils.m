//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/androidbase/AndroidBase/lib/src/main/java/android/database/DatabaseUtils.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "android/database/Cursor.h"
#include "android/database/CursorWindow.h"
#include "android/database/DatabaseUtils.h"
#include "android/database/sqlite/SQLiteDatabase.h"
#include "android/database/sqlite/SQLiteProgram.h"
#include "android/database/sqlite/SQLiteStatement.h"
#include "android/text/TextUtils.h"
#include "java/lang/Boolean.h"
#include "java/lang/Byte.h"
#include "java/lang/Double.h"
#include "java/lang/Float.h"
#include "java/lang/Integer.h"
#include "java/lang/Long.h"
#include "java/lang/Math.h"
#include "java/lang/Short.h"
#include "java/lang/StringBuilder.h"
#include "java/util/Locale.h"

@implementation AndroidDatabaseDatabaseUtils

+ (jint)getSqlStatementTypeWithNSString:(NSString *)sql {
  return AndroidDatabaseDatabaseUtils_getSqlStatementTypeWithNSString_(sql);
}

+ (jint)getTypeOfObjectWithId:(id)obj {
  return AndroidDatabaseDatabaseUtils_getTypeOfObjectWithId_(obj);
}

+ (jint)findRowIdColumnIndexWithNSStringArray:(IOSObjectArray *)columnNames {
  return AndroidDatabaseDatabaseUtils_findRowIdColumnIndexWithNSStringArray_(columnNames);
}

+ (jint)cursorPickFillWindowStartPositionWithInt:(jint)cursorPosition
                                         withInt:(jint)cursorWindowCapacity {
  return AndroidDatabaseDatabaseUtils_cursorPickFillWindowStartPositionWithInt_withInt_(cursorPosition, cursorWindowCapacity);
}

+ (void)appendEscapedSQLStringWithJavaLangStringBuilder:(JavaLangStringBuilder *)sb
                                           withNSString:(NSString *)sqlString {
  AndroidDatabaseDatabaseUtils_appendEscapedSQLStringWithJavaLangStringBuilder_withNSString_(sb, sqlString);
}

+ (jlong)longForQueryWithAndroidDatabaseSqliteSQLiteDatabase:(AndroidDatabaseSqliteSQLiteDatabase *)db
                                                withNSString:(NSString *)query
                                           withNSStringArray:(IOSObjectArray *)selectionArgs {
  return AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSStringArray_(db, query, selectionArgs);
}

+ (jlong)longForQueryWithAndroidDatabaseSqliteSQLiteStatement:(AndroidDatabaseSqliteSQLiteStatement *)prog
                                            withNSStringArray:(IOSObjectArray *)selectionArgs {
  return AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteStatement_withNSStringArray_(prog, selectionArgs);
}

+ (void)cursorFillWindowWithAndroidDatabaseCursor:(id<AndroidDatabaseCursor>)cursor
                                          withInt:(jint)position
                  withAndroidDatabaseCursorWindow:(AndroidDatabaseCursorWindow *)window {
  AndroidDatabaseDatabaseUtils_cursorFillWindowWithAndroidDatabaseCursor_withInt_withAndroidDatabaseCursorWindow_(cursor, position, window);
}

+ (void)bindObjectToProgramWithAndroidDatabaseSqliteSQLiteProgram:(AndroidDatabaseSqliteSQLiteProgram *)prog
                                                          withInt:(jint)index
                                                           withId:(id)value {
  AndroidDatabaseDatabaseUtils_bindObjectToProgramWithAndroidDatabaseSqliteSQLiteProgram_withInt_withId_(prog, index, value);
}

+ (jlong)queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:(AndroidDatabaseSqliteSQLiteDatabase *)db
                                                   withNSString:(NSString *)table {
  return AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_(db, table);
}

+ (jlong)queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:(AndroidDatabaseSqliteSQLiteDatabase *)db
                                                   withNSString:(NSString *)table
                                                   withNSString:(NSString *)selection {
  return AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_(db, table, selection);
}

+ (jlong)queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:(AndroidDatabaseSqliteSQLiteDatabase *)db
                                                   withNSString:(NSString *)table
                                                   withNSString:(NSString *)selection
                                              withNSStringArray:(IOSObjectArray *)selectionArgs {
  return AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_withNSStringArray_(db, table, selection, selectionArgs);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  AndroidDatabaseDatabaseUtils_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getSqlStatementTypeWithNSString:", "getSqlStatementType", "I", 0x9, NULL, NULL },
    { "getTypeOfObjectWithId:", "getTypeOfObject", "I", 0x9, NULL, NULL },
    { "findRowIdColumnIndexWithNSStringArray:", "findRowIdColumnIndex", "I", 0x9, NULL, NULL },
    { "cursorPickFillWindowStartPositionWithInt:withInt:", "cursorPickFillWindowStartPosition", "I", 0x9, NULL, NULL },
    { "appendEscapedSQLStringWithJavaLangStringBuilder:withNSString:", "appendEscapedSQLString", "V", 0x9, NULL, NULL },
    { "longForQueryWithAndroidDatabaseSqliteSQLiteDatabase:withNSString:withNSStringArray:", "longForQuery", "J", 0x9, NULL, NULL },
    { "longForQueryWithAndroidDatabaseSqliteSQLiteStatement:withNSStringArray:", "longForQuery", "J", 0x9, NULL, NULL },
    { "cursorFillWindowWithAndroidDatabaseCursor:withInt:withAndroidDatabaseCursorWindow:", "cursorFillWindow", "V", 0x9, NULL, NULL },
    { "bindObjectToProgramWithAndroidDatabaseSqliteSQLiteProgram:withInt:withId:", "bindObjectToProgram", "V", 0x9, NULL, NULL },
    { "queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:withNSString:", "queryNumEntries", "J", 0x9, NULL, NULL },
    { "queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:withNSString:withNSString:", "queryNumEntries", "J", 0x9, NULL, NULL },
    { "queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase:withNSString:withNSString:withNSStringArray:", "queryNumEntries", "J", 0x9, NULL, NULL },
    { "init", "DatabaseUtils", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "STATEMENT_SELECT", "STATEMENT_SELECT", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_SELECT },
    { "STATEMENT_UPDATE", "STATEMENT_UPDATE", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_UPDATE },
    { "STATEMENT_ATTACH", "STATEMENT_ATTACH", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_ATTACH },
    { "STATEMENT_BEGIN", "STATEMENT_BEGIN", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_BEGIN },
    { "STATEMENT_COMMIT", "STATEMENT_COMMIT", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_COMMIT },
    { "STATEMENT_ABORT", "STATEMENT_ABORT", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_ABORT },
    { "STATEMENT_PRAGMA", "STATEMENT_PRAGMA", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_PRAGMA },
    { "STATEMENT_DDL", "STATEMENT_DDL", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_DDL },
    { "STATEMENT_UNPREPARED", "STATEMENT_UNPREPARED", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_UNPREPARED },
    { "STATEMENT_OTHER", "STATEMENT_OTHER", 0x19, "I", NULL, NULL, .constantValue.asInt = AndroidDatabaseDatabaseUtils_STATEMENT_OTHER },
  };
  static const J2ObjcClassInfo _AndroidDatabaseDatabaseUtils = { 2, "DatabaseUtils", "android.database", NULL, 0x1, 13, methods, 10, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_AndroidDatabaseDatabaseUtils;
}

@end

jint AndroidDatabaseDatabaseUtils_getSqlStatementTypeWithNSString_(NSString *sql) {
  AndroidDatabaseDatabaseUtils_initialize();
  sql = [((NSString *) nil_chk(sql)) trim];
  if (((jint) [((NSString *) nil_chk(sql)) length]) < 3) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_OTHER;
  }
  NSString *prefixSql = [((NSString *) nil_chk([sql substring:0 endIndex:3])) uppercaseStringWithJRELocale:JreLoadStatic(JavaUtilLocale, ROOT)];
  if ([((NSString *) nil_chk(prefixSql)) isEqual:@"SEL"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_SELECT;
  }
  else if ([prefixSql isEqual:@"INS"] || [prefixSql isEqual:@"UPD"] || [prefixSql isEqual:@"REP"] || [prefixSql isEqual:@"DEL"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_UPDATE;
  }
  else if ([prefixSql isEqual:@"ATT"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_ATTACH;
  }
  else if ([prefixSql isEqual:@"COM"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_COMMIT;
  }
  else if ([prefixSql isEqual:@"END"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_COMMIT;
  }
  else if ([prefixSql isEqual:@"ROL"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_ABORT;
  }
  else if ([prefixSql isEqual:@"BEG"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_BEGIN;
  }
  else if ([prefixSql isEqual:@"PRA"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_PRAGMA;
  }
  else if ([prefixSql isEqual:@"CRE"] || [prefixSql isEqual:@"DRO"] || [prefixSql isEqual:@"ALT"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_DDL;
  }
  else if ([prefixSql isEqual:@"ANA"] || [prefixSql isEqual:@"DET"]) {
    return AndroidDatabaseDatabaseUtils_STATEMENT_UNPREPARED;
  }
  return AndroidDatabaseDatabaseUtils_STATEMENT_OTHER;
}

jint AndroidDatabaseDatabaseUtils_getTypeOfObjectWithId_(id obj) {
  AndroidDatabaseDatabaseUtils_initialize();
  if (obj == nil) {
    return AndroidDatabaseCursor_FIELD_TYPE_NULL;
  }
  else if ([obj isKindOfClass:[IOSByteArray class]]) {
    return AndroidDatabaseCursor_FIELD_TYPE_BLOB;
  }
  else if ([obj isKindOfClass:[JavaLangFloat class]] || [obj isKindOfClass:[JavaLangDouble class]]) {
    return AndroidDatabaseCursor_FIELD_TYPE_FLOAT;
  }
  else if ([obj isKindOfClass:[JavaLangLong class]] || [obj isKindOfClass:[JavaLangInteger class]] || [obj isKindOfClass:[JavaLangShort class]] || [obj isKindOfClass:[JavaLangByte class]]) {
    return AndroidDatabaseCursor_FIELD_TYPE_INTEGER;
  }
  else {
    return AndroidDatabaseCursor_FIELD_TYPE_STRING;
  }
}

jint AndroidDatabaseDatabaseUtils_findRowIdColumnIndexWithNSStringArray_(IOSObjectArray *columnNames) {
  AndroidDatabaseDatabaseUtils_initialize();
  jint length = ((IOSObjectArray *) nil_chk(columnNames))->size_;
  for (jint i = 0; i < length; i++) {
    if ([((NSString *) nil_chk(IOSObjectArray_Get(columnNames, i))) isEqual:@"_id"]) {
      return i;
    }
  }
  return -1;
}

jint AndroidDatabaseDatabaseUtils_cursorPickFillWindowStartPositionWithInt_withInt_(jint cursorPosition, jint cursorWindowCapacity) {
  AndroidDatabaseDatabaseUtils_initialize();
  return JavaLangMath_maxWithInt_withInt_(cursorPosition - cursorWindowCapacity / 3, 0);
}

void AndroidDatabaseDatabaseUtils_appendEscapedSQLStringWithJavaLangStringBuilder_withNSString_(JavaLangStringBuilder *sb, NSString *sqlString) {
  AndroidDatabaseDatabaseUtils_initialize();
  (void) [((JavaLangStringBuilder *) nil_chk(sb)) appendWithChar:'\''];
  if ([((NSString *) nil_chk(sqlString)) indexOf:'\''] != -1) {
    jint length = ((jint) [sqlString length]);
    for (jint i = 0; i < length; i++) {
      jchar c = [sqlString charAtWithInt:i];
      if (c == '\'') {
        (void) [sb appendWithChar:'\''];
      }
      (void) [sb appendWithChar:c];
    }
  }
  else {
    (void) [sb appendWithNSString:sqlString];
  }
  (void) [sb appendWithChar:'\''];
}

jlong AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSStringArray_(AndroidDatabaseSqliteSQLiteDatabase *db, NSString *query, IOSObjectArray *selectionArgs) {
  AndroidDatabaseDatabaseUtils_initialize();
  AndroidDatabaseSqliteSQLiteStatement *prog = [((AndroidDatabaseSqliteSQLiteDatabase *) nil_chk(db)) compileStatementWithNSString:query];
  @try {
    return AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteStatement_withNSStringArray_(prog, selectionArgs);
  }
  @finally {
    [((AndroidDatabaseSqliteSQLiteStatement *) nil_chk(prog)) close];
  }
}

jlong AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteStatement_withNSStringArray_(AndroidDatabaseSqliteSQLiteStatement *prog, IOSObjectArray *selectionArgs) {
  AndroidDatabaseDatabaseUtils_initialize();
  [((AndroidDatabaseSqliteSQLiteStatement *) nil_chk(prog)) bindAllArgsAsStringsWithNSStringArray:selectionArgs];
  return [prog simpleQueryForLong];
}

void AndroidDatabaseDatabaseUtils_cursorFillWindowWithAndroidDatabaseCursor_withInt_withAndroidDatabaseCursorWindow_(id<AndroidDatabaseCursor> cursor, jint position, AndroidDatabaseCursorWindow *window) {
  AndroidDatabaseDatabaseUtils_initialize();
  if (position < 0 || position >= [((id<AndroidDatabaseCursor>) nil_chk(cursor)) getCount]) {
    return;
  }
  jint oldPos = [((id<AndroidDatabaseCursor>) nil_chk(cursor)) getPosition];
  jint numColumns = [cursor getColumnCount];
  [((AndroidDatabaseCursorWindow *) nil_chk(window)) clear];
  [window setStartPositionWithInt:position];
  [window setNumColumnsWithInt:numColumns];
  if ([cursor moveToPositionWithInt:position]) {
    do {
      if (![window allocRow]) {
        break;
      }
      for (jint i = 0; i < numColumns; i++) {
        jint type = [cursor getTypeWithInt:i];
        jboolean success;
        switch (type) {
          case AndroidDatabaseCursor_FIELD_TYPE_NULL:
          success = [window putNullWithInt:position withInt:i];
          break;
          case AndroidDatabaseCursor_FIELD_TYPE_INTEGER:
          success = [window putLongWithLong:[cursor getLongWithInt:i] withInt:position withInt:i];
          break;
          case AndroidDatabaseCursor_FIELD_TYPE_FLOAT:
          success = [window putDoubleWithDouble:[cursor getDoubleWithInt:i] withInt:position withInt:i];
          break;
          case AndroidDatabaseCursor_FIELD_TYPE_BLOB:
          {
            IOSByteArray *value = [cursor getBlobWithInt:i];
            success = value != nil ? [window putBlobWithByteArray:value withInt:position withInt:i] : [window putNullWithInt:position withInt:i];
            break;
          }
          default:
          case AndroidDatabaseCursor_FIELD_TYPE_STRING:
          {
            NSString *value = [cursor getStringWithInt:i];
            success = value != nil ? [window putStringWithNSString:value withInt:position withInt:i] : [window putNullWithInt:position withInt:i];
            break;
          }
        }
        if (!success) {
          [window freeLastRow];
          break;
        }
      }
      position += 1;
    }
    while ([cursor moveToNext]);
  }
  [cursor moveToPositionWithInt:oldPos];
}

void AndroidDatabaseDatabaseUtils_bindObjectToProgramWithAndroidDatabaseSqliteSQLiteProgram_withInt_withId_(AndroidDatabaseSqliteSQLiteProgram *prog, jint index, id value) {
  AndroidDatabaseDatabaseUtils_initialize();
  if (value == nil) {
    [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindNullWithInt:index];
  }
  else if ([value isKindOfClass:[JavaLangDouble class]] || [value isKindOfClass:[JavaLangFloat class]]) {
    [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindDoubleWithInt:index withDouble:[((NSNumber *) cast_chk(value, [NSNumber class])) doubleValue]];
  }
  else if ([value isKindOfClass:[NSNumber class]]) {
    [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindLongWithInt:index withLong:[((NSNumber *) cast_chk(value, [NSNumber class])) longLongValue]];
  }
  else if ([value isKindOfClass:[JavaLangBoolean class]]) {
    JavaLangBoolean *bool_ = (JavaLangBoolean *) cast_chk(value, [JavaLangBoolean class]);
    if ([bool_ booleanValue]) {
      [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindLongWithInt:index withLong:1];
    }
    else {
      [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindLongWithInt:index withLong:0];
    }
  }
  else if ([value isKindOfClass:[IOSByteArray class]]) {
    [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindBlobWithInt:index withByteArray:(IOSByteArray *) cast_chk(value, [IOSByteArray class])];
  }
  else {
    [((AndroidDatabaseSqliteSQLiteProgram *) nil_chk(prog)) bindStringWithInt:index withNSString:[value description]];
  }
}

jlong AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_(AndroidDatabaseSqliteSQLiteDatabase *db, NSString *table) {
  AndroidDatabaseDatabaseUtils_initialize();
  return AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_withNSStringArray_(db, table, nil, nil);
}

jlong AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_(AndroidDatabaseSqliteSQLiteDatabase *db, NSString *table, NSString *selection) {
  AndroidDatabaseDatabaseUtils_initialize();
  return AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_withNSStringArray_(db, table, selection, nil);
}

jlong AndroidDatabaseDatabaseUtils_queryNumEntriesWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSString_withNSStringArray_(AndroidDatabaseSqliteSQLiteDatabase *db, NSString *table, NSString *selection, IOSObjectArray *selectionArgs) {
  AndroidDatabaseDatabaseUtils_initialize();
  NSString *s = (!AndroidTextTextUtils_isEmptyWithJavaLangCharSequence_(selection)) ? JreStrcat("$$", @" where ", selection) : @"";
  return AndroidDatabaseDatabaseUtils_longForQueryWithAndroidDatabaseSqliteSQLiteDatabase_withNSString_withNSStringArray_(db, JreStrcat("$$$", @"select count(*) from ", table, s), selectionArgs);
}

void AndroidDatabaseDatabaseUtils_init(AndroidDatabaseDatabaseUtils *self) {
  NSObject_init(self);
}

AndroidDatabaseDatabaseUtils *new_AndroidDatabaseDatabaseUtils_init() {
  J2OBJC_NEW_IMPL(AndroidDatabaseDatabaseUtils, init)
}

AndroidDatabaseDatabaseUtils *create_AndroidDatabaseDatabaseUtils_init() {
  J2OBJC_CREATE_IMPL(AndroidDatabaseDatabaseUtils, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AndroidDatabaseDatabaseUtils)
