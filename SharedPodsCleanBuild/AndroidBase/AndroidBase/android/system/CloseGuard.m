//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/androidbase/AndroidBase/lib/src/main/java/android/system/CloseGuard.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "android/system/CloseGuard.h"
#include "java/lang/NullPointerException.h"

@interface AndroidSystemCloseGuard () {
 @public
  NSException *allocationSite_;
}

- (instancetype)init;

@end

J2OBJC_FIELD_SETTER(AndroidSystemCloseGuard, allocationSite_, NSException *)

inline AndroidSystemCloseGuard *AndroidSystemCloseGuard_get_NOOP();
static AndroidSystemCloseGuard *AndroidSystemCloseGuard_NOOP;
J2OBJC_STATIC_FIELD_OBJ_FINAL(AndroidSystemCloseGuard, NOOP, AndroidSystemCloseGuard *)

inline jboolean AndroidSystemCloseGuard_get_ENABLED();
inline jboolean AndroidSystemCloseGuard_set_ENABLED(jboolean value);
static volatile_jboolean AndroidSystemCloseGuard_ENABLED = true;
J2OBJC_STATIC_FIELD_PRIMITIVE_VOLATILE(AndroidSystemCloseGuard, ENABLED, jboolean)

inline id<AndroidSystemCloseGuard_Reporter> AndroidSystemCloseGuard_get_REPORTER();
inline id<AndroidSystemCloseGuard_Reporter> AndroidSystemCloseGuard_set_REPORTER(id<AndroidSystemCloseGuard_Reporter> value);
static volatile_id AndroidSystemCloseGuard_REPORTER;
J2OBJC_STATIC_FIELD_OBJ_VOLATILE(AndroidSystemCloseGuard, REPORTER, id<AndroidSystemCloseGuard_Reporter>)

__attribute__((unused)) static void AndroidSystemCloseGuard_init(AndroidSystemCloseGuard *self);

__attribute__((unused)) static AndroidSystemCloseGuard *new_AndroidSystemCloseGuard_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static AndroidSystemCloseGuard *create_AndroidSystemCloseGuard_init();

@interface AndroidSystemCloseGuard_Reporter : NSObject

@end

@interface AndroidSystemCloseGuard_DefaultReporter : NSObject < AndroidSystemCloseGuard_Reporter >

- (void)reportWithNSString:(NSString *)message
           withNSException:(NSException *)allocationSite;
#ifdef J2OBJC_RENAME_ALIASES
#define withJavaLangThrowable withNSException
#endif // J2OBJC_RENAME_ALIASES

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(AndroidSystemCloseGuard_DefaultReporter)

__attribute__((unused)) static void AndroidSystemCloseGuard_DefaultReporter_init(AndroidSystemCloseGuard_DefaultReporter *self);

__attribute__((unused)) static AndroidSystemCloseGuard_DefaultReporter *new_AndroidSystemCloseGuard_DefaultReporter_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static AndroidSystemCloseGuard_DefaultReporter *create_AndroidSystemCloseGuard_DefaultReporter_init();

J2OBJC_TYPE_LITERAL_HEADER(AndroidSystemCloseGuard_DefaultReporter)

J2OBJC_INITIALIZED_DEFN(AndroidSystemCloseGuard)

@implementation AndroidSystemCloseGuard

+ (AndroidSystemCloseGuard *)get {
  return AndroidSystemCloseGuard_get();
}

+ (void)setEnabledWithBoolean:(jboolean)enabled {
  AndroidSystemCloseGuard_setEnabledWithBoolean_(enabled);
}

+ (void)setReporterWithAndroidSystemCloseGuard_Reporter:(id<AndroidSystemCloseGuard_Reporter>)reporter {
  AndroidSystemCloseGuard_setReporterWithAndroidSystemCloseGuard_Reporter_(reporter);
}

+ (id<AndroidSystemCloseGuard_Reporter>)getReporter {
  return AndroidSystemCloseGuard_getReporter();
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  AndroidSystemCloseGuard_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)openWithNSString:(NSString *)closer {
  if (closer == nil) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"closer == null");
  }
  if (self == AndroidSystemCloseGuard_NOOP || !JreLoadVolatileBoolean(&AndroidSystemCloseGuard_ENABLED)) {
    return;
  }
  NSString *message = JreStrcat("$$$", @"Explicit termination method '", closer, @"' not called");
  allocationSite_ = new_NSException_initWithNSString_(message);
}

- (void)close {
  allocationSite_ = nil;
}

- (void)warnIfOpen {
  if (allocationSite_ == nil || !JreLoadVolatileBoolean(&AndroidSystemCloseGuard_ENABLED)) {
    return;
  }
  NSString *message = (@"A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.");
  [((id<AndroidSystemCloseGuard_Reporter>) nil_chk(JreLoadVolatileId(&AndroidSystemCloseGuard_REPORTER))) reportWithNSString:message withNSException:allocationSite_];
}

+ (void)initialize {
  if (self == [AndroidSystemCloseGuard class]) {
    AndroidSystemCloseGuard_NOOP = new_AndroidSystemCloseGuard_init();
    (void) JreVolatileStrongAssign(&AndroidSystemCloseGuard_REPORTER, new_AndroidSystemCloseGuard_DefaultReporter_init());
    J2OBJC_SET_INITIALIZED(AndroidSystemCloseGuard)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "get", NULL, "Landroid.system.CloseGuard;", 0x9, NULL, NULL },
    { "setEnabledWithBoolean:", "setEnabled", "V", 0x9, NULL, NULL },
    { "setReporterWithAndroidSystemCloseGuard_Reporter:", "setReporter", "V", 0x9, NULL, NULL },
    { "getReporter", NULL, "Landroid.system.CloseGuard$Reporter;", 0x9, NULL, NULL },
    { "init", "CloseGuard", NULL, 0x2, NULL, NULL },
    { "openWithNSString:", "open", "V", 0x1, NULL, NULL },
    { "close", NULL, "V", 0x1, NULL, NULL },
    { "warnIfOpen", NULL, "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "NOOP", "NOOP", 0x1a, "Landroid.system.CloseGuard;", &AndroidSystemCloseGuard_NOOP, NULL, .constantValue.asLong = 0 },
    { "ENABLED", "ENABLED", 0x4a, "Z", &AndroidSystemCloseGuard_ENABLED, NULL, .constantValue.asLong = 0 },
    { "REPORTER", "REPORTER", 0x4a, "Landroid.system.CloseGuard$Reporter;", &AndroidSystemCloseGuard_REPORTER, NULL, .constantValue.asLong = 0 },
    { "allocationSite_", NULL, 0x2, "Ljava.lang.Throwable;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Landroid.system.CloseGuard$Reporter;", "Landroid.system.CloseGuard$DefaultReporter;"};
  static const J2ObjcClassInfo _AndroidSystemCloseGuard = { 2, "CloseGuard", "android.system", NULL, 0x11, 8, methods, 4, fields, 0, NULL, 2, inner_classes, NULL, NULL };
  return &_AndroidSystemCloseGuard;
}

@end

AndroidSystemCloseGuard *AndroidSystemCloseGuard_get() {
  AndroidSystemCloseGuard_initialize();
  if (!JreLoadVolatileBoolean(&AndroidSystemCloseGuard_ENABLED)) {
    return AndroidSystemCloseGuard_NOOP;
  }
  return new_AndroidSystemCloseGuard_init();
}

void AndroidSystemCloseGuard_setEnabledWithBoolean_(jboolean enabled) {
  AndroidSystemCloseGuard_initialize();
  JreAssignVolatileBoolean(&AndroidSystemCloseGuard_ENABLED, enabled);
}

void AndroidSystemCloseGuard_setReporterWithAndroidSystemCloseGuard_Reporter_(id<AndroidSystemCloseGuard_Reporter> reporter) {
  AndroidSystemCloseGuard_initialize();
  if (reporter == nil) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"reporter == null");
  }
  (void) JreVolatileStrongAssign(&AndroidSystemCloseGuard_REPORTER, reporter);
}

id<AndroidSystemCloseGuard_Reporter> AndroidSystemCloseGuard_getReporter() {
  AndroidSystemCloseGuard_initialize();
  return JreLoadVolatileId(&AndroidSystemCloseGuard_REPORTER);
}

void AndroidSystemCloseGuard_init(AndroidSystemCloseGuard *self) {
  NSObject_init(self);
}

AndroidSystemCloseGuard *new_AndroidSystemCloseGuard_init() {
  AndroidSystemCloseGuard *self = [AndroidSystemCloseGuard alloc];
  AndroidSystemCloseGuard_init(self);
  return self;
}

AndroidSystemCloseGuard *create_AndroidSystemCloseGuard_init() {
  return new_AndroidSystemCloseGuard_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AndroidSystemCloseGuard)

@implementation AndroidSystemCloseGuard_Reporter

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "reportWithNSString:withNSException:", "report", "V", 0x401, NULL, NULL },
  };
  static const J2ObjcClassInfo _AndroidSystemCloseGuard_Reporter = { 2, "Reporter", "android.system", "CloseGuard", 0x609, 1, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_AndroidSystemCloseGuard_Reporter;
}

@end

J2OBJC_INTERFACE_TYPE_LITERAL_SOURCE(AndroidSystemCloseGuard_Reporter)

@implementation AndroidSystemCloseGuard_DefaultReporter

- (void)reportWithNSString:(NSString *)message
           withNSException:(NSException *)allocationSite {
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  AndroidSystemCloseGuard_DefaultReporter_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "reportWithNSString:withNSException:", "report", "V", 0x1, NULL, NULL },
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcClassInfo _AndroidSystemCloseGuard_DefaultReporter = { 2, "DefaultReporter", "android.system", "CloseGuard", 0x1a, 2, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_AndroidSystemCloseGuard_DefaultReporter;
}

@end

void AndroidSystemCloseGuard_DefaultReporter_init(AndroidSystemCloseGuard_DefaultReporter *self) {
  NSObject_init(self);
}

AndroidSystemCloseGuard_DefaultReporter *new_AndroidSystemCloseGuard_DefaultReporter_init() {
  AndroidSystemCloseGuard_DefaultReporter *self = [AndroidSystemCloseGuard_DefaultReporter alloc];
  AndroidSystemCloseGuard_DefaultReporter_init(self);
  return self;
}

AndroidSystemCloseGuard_DefaultReporter *create_AndroidSystemCloseGuard_DefaultReporter_init() {
  return new_AndroidSystemCloseGuard_DefaultReporter_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(AndroidSystemCloseGuard_DefaultReporter)
