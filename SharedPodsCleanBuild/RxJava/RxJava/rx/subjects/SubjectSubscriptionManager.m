//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/sourcejava/RxJava/src/main/java/rx/subjects/SubjectSubscriptionManager.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/System.h"
#include "java/util/ArrayList.h"
#include "java/util/List.h"
#include "java/util/concurrent/atomic/AtomicReferenceFieldUpdater.h"
#include "rx/Observer.h"
#include "rx/Subscriber.h"
#include "rx/Subscription.h"
#include "rx/functions/Action0.h"
#include "rx/functions/Action1.h"
#include "rx/functions/Actions.h"
#include "rx/internal/operators/NotificationLite.h"
#include "rx/subjects/SubjectSubscriptionManager.h"
#include "rx/subscriptions/Subscriptions.h"

@interface RxSubjectsSubjectSubscriptionManager_SubjectObserver () {
 @public
  volatile_id index_;
}

@end

J2OBJC_VOLATILE_FIELD_SETTER(RxSubjectsSubjectSubscriptionManager_SubjectObserver, index_, id)

@interface RxSubjectsSubjectSubscriptionManager_$1 : NSObject < RxFunctionsAction0 > {
 @public
  RxSubjectsSubjectSubscriptionManager *this$0_;
  RxSubjectsSubjectSubscriptionManager_SubjectObserver *val$bo_;
}

- (void)call;

- (instancetype)initWithRxSubjectsSubjectSubscriptionManager:(RxSubjectsSubjectSubscriptionManager *)outer$
    withRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxSubjectsSubjectSubscriptionManager_$1)

J2OBJC_FIELD_SETTER(RxSubjectsSubjectSubscriptionManager_$1, this$0_, RxSubjectsSubjectSubscriptionManager *)
J2OBJC_FIELD_SETTER(RxSubjectsSubjectSubscriptionManager_$1, val$bo_, RxSubjectsSubjectSubscriptionManager_SubjectObserver *)

__attribute__((unused)) static void RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager_$1 *self, RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0);

__attribute__((unused)) static RxSubjectsSubjectSubscriptionManager_$1 *new_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxSubjectsSubjectSubscriptionManager_$1 *create_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxSubjectsSubjectSubscriptionManager_$1)

J2OBJC_INITIALIZED_DEFN(RxSubjectsSubjectSubscriptionManager)

JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *RxSubjectsSubjectSubscriptionManager_STATE_UPDATER;
JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *RxSubjectsSubjectSubscriptionManager_LATEST_UPDATER;

@implementation RxSubjectsSubjectSubscriptionManager

- (void)callWithId:(RxSubscriber *)child {
  RxSubjectsSubjectSubscriptionManager_SubjectObserver *bo = new_RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(child);
  [self addUnsubscriberWithRxSubscriber:child withRxSubjectsSubjectSubscriptionManager_SubjectObserver:bo];
  [((id<RxFunctionsAction1>) nil_chk(onStart_)) callWithId:bo];
  if (![((RxSubscriber *) nil_chk(child)) isUnsubscribed]) {
    if ([self addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:bo] && [child isUnsubscribed]) {
      [self removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:bo];
    }
  }
}

- (void)addUnsubscriberWithRxSubscriber:(RxSubscriber *)child
withRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)bo {
  [((RxSubscriber *) nil_chk(child)) addWithRxSubscription:RxSubscriptionsSubscriptions_createWithRxFunctionsAction0_(new_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(self, bo))];
}

- (void)setWithId:(id)value {
  (void) JreVolatileStrongAssign(&latest_, value);
}

- (id)get {
  return JreLoadVolatileId(&latest_);
}

- (IOSObjectArray *)observers {
  return ((RxSubjectsSubjectSubscriptionManager_State *) nil_chk(JreLoadVolatileId(&state_)))->observers_;
}

- (jboolean)addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)o {
  do {
    RxSubjectsSubjectSubscriptionManager_State *oldState = JreLoadVolatileId(&state_);
    if (((RxSubjectsSubjectSubscriptionManager_State *) nil_chk(oldState))->terminated_) {
      [((id<RxFunctionsAction1>) nil_chk(onTerminated_)) callWithId:o];
      return false;
    }
    RxSubjectsSubjectSubscriptionManager_State *newState = [oldState addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:o];
    if ([((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(RxSubjectsSubjectSubscriptionManager_STATE_UPDATER)) compareAndSetWithId:self withId:oldState withId:newState]) {
      [((id<RxFunctionsAction1>) nil_chk(onAdded_)) callWithId:o];
      return true;
    }
  }
  while (true);
}

- (void)removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)o {
  do {
    RxSubjectsSubjectSubscriptionManager_State *oldState = JreLoadVolatileId(&state_);
    if (((RxSubjectsSubjectSubscriptionManager_State *) nil_chk(oldState))->terminated_) {
      return;
    }
    RxSubjectsSubjectSubscriptionManager_State *newState = [oldState removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:o];
    if (newState == oldState || [((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(RxSubjectsSubjectSubscriptionManager_STATE_UPDATER)) compareAndSetWithId:self withId:oldState withId:newState]) {
      return;
    }
  }
  while (true);
}

- (IOSObjectArray *)nextWithId:(id)n {
  [self setWithId:n];
  return ((RxSubjectsSubjectSubscriptionManager_State *) nil_chk(JreLoadVolatileId(&state_)))->observers_;
}

- (IOSObjectArray *)terminateWithId:(id)n {
  [self setWithId:n];
  active_ = false;
  RxSubjectsSubjectSubscriptionManager_State *oldState = JreLoadVolatileId(&state_);
  if (((RxSubjectsSubjectSubscriptionManager_State *) nil_chk(oldState))->terminated_) {
    return JreLoadStatic(RxSubjectsSubjectSubscriptionManager_State, NO_OBSERVERS);
  }
  return ((RxSubjectsSubjectSubscriptionManager_State *) nil_chk([((JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater *) nil_chk(RxSubjectsSubjectSubscriptionManager_STATE_UPDATER)) getAndSetWithId:self withId:JreLoadStatic(RxSubjectsSubjectSubscriptionManager_State, TERMINATED)]))->observers_;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  RxSubjectsSubjectSubscriptionManager_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (void)dealloc {
  JreReleaseVolatile(&state_);
  JreReleaseVolatile(&latest_);
}

- (void)__javaClone:(RxSubjectsSubjectSubscriptionManager *)original {
  [super __javaClone:original];
  JreCloneVolatileStrong(&state_, &original->state_);
  JreCloneVolatileStrong(&latest_, &original->latest_);
}

+ (void)initialize {
  if (self == [RxSubjectsSubjectSubscriptionManager class]) {
    RxSubjectsSubjectSubscriptionManager_STATE_UPDATER = JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater_newUpdaterWithIOSClass_withIOSClass_withNSString_(RxSubjectsSubjectSubscriptionManager_class_(), RxSubjectsSubjectSubscriptionManager_State_class_(), @"state");
    RxSubjectsSubjectSubscriptionManager_LATEST_UPDATER = JavaUtilConcurrentAtomicAtomicReferenceFieldUpdater_newUpdaterWithIOSClass_withIOSClass_withNSString_(RxSubjectsSubjectSubscriptionManager_class_(), NSObject_class_(), @"latest");
    J2OBJC_SET_INITIALIZED(RxSubjectsSubjectSubscriptionManager)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "call", "V", 0x1, NULL, "(Lrx/Subscriber<-TT;>;)V" },
    { "addUnsubscriberWithRxSubscriber:withRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "addUnsubscriber", "V", 0x0, NULL, "(Lrx/Subscriber<-TT;>;Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;)V" },
    { "setWithId:", "set", "V", 0x0, NULL, NULL },
    { "get", NULL, "Ljava.lang.Object;", 0x0, NULL, NULL },
    { "observers", NULL, "[Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", 0x0, NULL, NULL },
    { "addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "add", "Z", 0x0, NULL, "(Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;)Z" },
    { "removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "remove", "V", 0x0, NULL, "(Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;)V" },
    { "nextWithId:", "next", "[Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", 0x0, NULL, NULL },
    { "terminateWithId:", "terminate", "[Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", 0x0, NULL, NULL },
    { "init", NULL, NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "state_", NULL, 0x40, "Lrx.subjects.SubjectSubscriptionManager$State;", NULL, "Lrx/subjects/SubjectSubscriptionManager$State<TT;>;", .constantValue.asLong = 0 },
    { "STATE_UPDATER", "STATE_UPDATER", 0x18, "Ljava.util.concurrent.atomic.AtomicReferenceFieldUpdater;", &RxSubjectsSubjectSubscriptionManager_STATE_UPDATER, "Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater<Lrx/subjects/SubjectSubscriptionManager;Lrx/subjects/SubjectSubscriptionManager$State;>;", .constantValue.asLong = 0 },
    { "latest_", NULL, 0x40, "Ljava.lang.Object;", NULL, NULL, .constantValue.asLong = 0 },
    { "LATEST_UPDATER", "LATEST_UPDATER", 0x18, "Ljava.util.concurrent.atomic.AtomicReferenceFieldUpdater;", &RxSubjectsSubjectSubscriptionManager_LATEST_UPDATER, "Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater<Lrx/subjects/SubjectSubscriptionManager;Ljava/lang/Object;>;", .constantValue.asLong = 0 },
    { "active_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "onStart_", NULL, 0x0, "Lrx.functions.Action1;", NULL, "Lrx/functions/Action1<Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;>;", .constantValue.asLong = 0 },
    { "onAdded_", NULL, 0x0, "Lrx.functions.Action1;", NULL, "Lrx/functions/Action1<Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;>;", .constantValue.asLong = 0 },
    { "onTerminated_", NULL, 0x0, "Lrx.functions.Action1;", NULL, "Lrx/functions/Action1<Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;>;", .constantValue.asLong = 0 },
    { "nl_", NULL, 0x11, "Lrx.internal.operators.NotificationLite;", NULL, "Lrx/internal/operators/NotificationLite<TT;>;", .constantValue.asLong = 0 },
  };
  static const char *inner_classes[] = {"Lrx.subjects.SubjectSubscriptionManager$State;", "Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;"};
  static const J2ObjcClassInfo _RxSubjectsSubjectSubscriptionManager = { 2, "SubjectSubscriptionManager", "rx.subjects", NULL, 0x10, 10, methods, 9, fields, 0, NULL, 2, inner_classes, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;Lrx/Observable$OnSubscribe<TT;>;" };
  return &_RxSubjectsSubjectSubscriptionManager;
}

@end

void RxSubjectsSubjectSubscriptionManager_init(RxSubjectsSubjectSubscriptionManager *self) {
  NSObject_init(self);
  (void) JreVolatileStrongAssign(&self->state_, JreLoadStatic(RxSubjectsSubjectSubscriptionManager_State, EMPTY));
  self->active_ = true;
  self->onStart_ = RxFunctionsActions_empty();
  self->onAdded_ = RxFunctionsActions_empty();
  self->onTerminated_ = RxFunctionsActions_empty();
  self->nl_ = RxInternalOperatorsNotificationLite_instance();
}

RxSubjectsSubjectSubscriptionManager *new_RxSubjectsSubjectSubscriptionManager_init() {
  RxSubjectsSubjectSubscriptionManager *self = [RxSubjectsSubjectSubscriptionManager alloc];
  RxSubjectsSubjectSubscriptionManager_init(self);
  return self;
}

RxSubjectsSubjectSubscriptionManager *create_RxSubjectsSubjectSubscriptionManager_init() {
  return new_RxSubjectsSubjectSubscriptionManager_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxSubjectsSubjectSubscriptionManager)

J2OBJC_INITIALIZED_DEFN(RxSubjectsSubjectSubscriptionManager_State)

IOSObjectArray *RxSubjectsSubjectSubscriptionManager_State_NO_OBSERVERS;
RxSubjectsSubjectSubscriptionManager_State *RxSubjectsSubjectSubscriptionManager_State_TERMINATED;
RxSubjectsSubjectSubscriptionManager_State *RxSubjectsSubjectSubscriptionManager_State_EMPTY;

@implementation RxSubjectsSubjectSubscriptionManager_State

- (instancetype)initWithBoolean:(jboolean)terminated
withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray:(IOSObjectArray *)observers {
  RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(self, terminated, observers);
  return self;
}

- (RxSubjectsSubjectSubscriptionManager_State *)addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)o {
  IOSObjectArray *a = observers_;
  jint n = ((IOSObjectArray *) nil_chk(a))->size_;
  IOSObjectArray *b = [IOSObjectArray newArrayWithLength:n + 1 type:RxSubjectsSubjectSubscriptionManager_SubjectObserver_class_()];
  JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(observers_, 0, b, 0, n);
  (void) IOSObjectArray_Set(b, n, o);
  return new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(terminated_, b);
}

- (RxSubjectsSubjectSubscriptionManager_State *)removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)o {
  IOSObjectArray *a = observers_;
  jint n = ((IOSObjectArray *) nil_chk(a))->size_;
  if (n == 1 && IOSObjectArray_Get(a, 0) == o) {
    return RxSubjectsSubjectSubscriptionManager_State_EMPTY;
  }
  else if (n == 0) {
    return self;
  }
  IOSObjectArray *b = [IOSObjectArray newArrayWithLength:n - 1 type:RxSubjectsSubjectSubscriptionManager_SubjectObserver_class_()];
  jint j = 0;
  for (jint i = 0; i < n; i++) {
    RxSubjectsSubjectSubscriptionManager_SubjectObserver *ai = IOSObjectArray_Get(a, i);
    if (ai != o) {
      if (j == n - 1) {
        return self;
      }
      (void) IOSObjectArray_Set(b, j++, ai);
    }
  }
  if (j == 0) {
    return RxSubjectsSubjectSubscriptionManager_State_EMPTY;
  }
  if (j < n - 1) {
    IOSObjectArray *c = [IOSObjectArray newArrayWithLength:j type:RxSubjectsSubjectSubscriptionManager_SubjectObserver_class_()];
    JavaLangSystem_arraycopyWithId_withInt_withId_withInt_withInt_(b, 0, c, 0, j);
    b = c;
  }
  return new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(terminated_, b);
}

+ (void)initialize {
  if (self == [RxSubjectsSubjectSubscriptionManager_State class]) {
    RxSubjectsSubjectSubscriptionManager_State_NO_OBSERVERS = [IOSObjectArray newArrayWithLength:0 type:RxSubjectsSubjectSubscriptionManager_SubjectObserver_class_()];
    RxSubjectsSubjectSubscriptionManager_State_TERMINATED = new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(true, RxSubjectsSubjectSubscriptionManager_State_NO_OBSERVERS);
    RxSubjectsSubjectSubscriptionManager_State_EMPTY = new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(false, RxSubjectsSubjectSubscriptionManager_State_NO_OBSERVERS);
    J2OBJC_SET_INITIALIZED(RxSubjectsSubjectSubscriptionManager_State)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithBoolean:withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray:", "State", NULL, 0x1, NULL, NULL },
    { "addWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "add", "Lrx.subjects.SubjectSubscriptionManager$State;", 0x1, NULL, NULL },
    { "removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "remove", "Lrx.subjects.SubjectSubscriptionManager$State;", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "terminated_", NULL, 0x10, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "observers_", NULL, 0x10, "[Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", NULL, NULL, .constantValue.asLong = 0 },
    { "NO_OBSERVERS", "NO_OBSERVERS", 0x18, "[Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", &RxSubjectsSubjectSubscriptionManager_State_NO_OBSERVERS, NULL, .constantValue.asLong = 0 },
    { "TERMINATED", "TERMINATED", 0x18, "Lrx.subjects.SubjectSubscriptionManager$State;", &RxSubjectsSubjectSubscriptionManager_State_TERMINATED, NULL, .constantValue.asLong = 0 },
    { "EMPTY", "EMPTY", 0x18, "Lrx.subjects.SubjectSubscriptionManager$State;", &RxSubjectsSubjectSubscriptionManager_State_EMPTY, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _RxSubjectsSubjectSubscriptionManager_State = { 2, "State", "rx.subjects", "SubjectSubscriptionManager", 0x1c, 3, methods, 5, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_RxSubjectsSubjectSubscriptionManager_State;
}

@end

void RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(RxSubjectsSubjectSubscriptionManager_State *self, jboolean terminated, IOSObjectArray *observers) {
  NSObject_init(self);
  self->terminated_ = terminated;
  self->observers_ = observers;
}

RxSubjectsSubjectSubscriptionManager_State *new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(jboolean terminated, IOSObjectArray *observers) {
  RxSubjectsSubjectSubscriptionManager_State *self = [RxSubjectsSubjectSubscriptionManager_State alloc];
  RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(self, terminated, observers);
  return self;
}

RxSubjectsSubjectSubscriptionManager_State *create_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(jboolean terminated, IOSObjectArray *observers) {
  return new_RxSubjectsSubjectSubscriptionManager_State_initWithBoolean_withRxSubjectsSubjectSubscriptionManager_SubjectObserverArray_(terminated, observers);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxSubjectsSubjectSubscriptionManager_State)

@implementation RxSubjectsSubjectSubscriptionManager_SubjectObserver

- (instancetype)initWithRxObserver:(id<RxObserver>)actual {
  RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(self, actual);
  return self;
}

- (void)onNextWithId:(id)t {
  [((id<RxObserver>) nil_chk(actual_)) onNextWithId:t];
}

- (void)onErrorWithNSException:(NSException *)e {
  [((id<RxObserver>) nil_chk(actual_)) onErrorWithNSException:e];
}

- (void)onCompleted {
  [((id<RxObserver>) nil_chk(actual_)) onCompleted];
}

- (void)emitNextWithId:(id)n
withRxInternalOperatorsNotificationLite:(RxInternalOperatorsNotificationLite *)nl {
  if (!fastPath_) {
    @synchronized(self) {
      first_ = false;
      if (emitting_) {
        if (queue_ == nil) {
          queue_ = new_JavaUtilArrayList_init();
        }
        [((id<JavaUtilList>) nil_chk(queue_)) addWithId:n];
        return;
      }
    }
    fastPath_ = true;
  }
  [((RxInternalOperatorsNotificationLite *) nil_chk(nl)) acceptWithRxObserver:actual_ withId:n];
}

- (void)emitFirstWithId:(id)n
withRxInternalOperatorsNotificationLite:(RxInternalOperatorsNotificationLite *)nl {
  @synchronized(self) {
    if (!first_ || emitting_) {
      return;
    }
    first_ = false;
    emitting_ = (n != nil);
  }
  if (n != nil) {
    [self emitLoopWithJavaUtilList:nil withId:n withRxInternalOperatorsNotificationLite:nl];
  }
}

- (void)emitLoopWithJavaUtilList:(id<JavaUtilList>)localQueue
                          withId:(id)current
withRxInternalOperatorsNotificationLite:(RxInternalOperatorsNotificationLite *)nl {
  jboolean once = true;
  jboolean skipFinal = false;
  @try {
    do {
      if (localQueue != nil) {
        for (id __strong n in localQueue) {
          [self acceptWithId:n withRxInternalOperatorsNotificationLite:nl];
        }
      }
      if (once) {
        once = false;
        [self acceptWithId:current withRxInternalOperatorsNotificationLite:nl];
      }
      @synchronized(self) {
        localQueue = queue_;
        queue_ = nil;
        if (localQueue == nil) {
          emitting_ = false;
          skipFinal = true;
          break;
        }
      }
    }
    while (true);
  }
  @finally {
    if (!skipFinal) {
      @synchronized(self) {
        emitting_ = false;
      }
    }
  }
}

- (void)acceptWithId:(id)n
withRxInternalOperatorsNotificationLite:(RxInternalOperatorsNotificationLite *)nl {
  if (n != nil) {
    [((RxInternalOperatorsNotificationLite *) nil_chk(nl)) acceptWithRxObserver:actual_ withId:n];
  }
}

- (id<RxObserver>)getActual {
  return actual_;
}

- (id)index {
  return JreLoadVolatileId(&index_);
}

- (void)indexWithId:(id)newIndex {
  (void) JreVolatileStrongAssign(&self->index_, newIndex);
}

- (void)dealloc {
  JreReleaseVolatile(&index_);
}

- (void)__javaClone:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)original {
  [super __javaClone:original];
  JreCloneVolatileStrong(&index_, &original->index_);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxObserver:", "SubjectObserver", NULL, 0x1, NULL, "(Lrx/Observer<-TT;>;)V" },
    { "onNextWithId:", "onNext", "V", 0x1, NULL, "(TT;)V" },
    { "onErrorWithNSException:", "onError", "V", 0x1, NULL, NULL },
    { "onCompleted", NULL, "V", 0x1, NULL, NULL },
    { "emitNextWithId:withRxInternalOperatorsNotificationLite:", "emitNext", "V", 0x4, NULL, "(Ljava/lang/Object;Lrx/internal/operators/NotificationLite<TT;>;)V" },
    { "emitFirstWithId:withRxInternalOperatorsNotificationLite:", "emitFirst", "V", 0x4, NULL, "(Ljava/lang/Object;Lrx/internal/operators/NotificationLite<TT;>;)V" },
    { "emitLoopWithJavaUtilList:withId:withRxInternalOperatorsNotificationLite:", "emitLoop", "V", 0x4, NULL, "(Ljava/util/List<Ljava/lang/Object;>;Ljava/lang/Object;Lrx/internal/operators/NotificationLite<TT;>;)V" },
    { "acceptWithId:withRxInternalOperatorsNotificationLite:", "accept", "V", 0x4, NULL, "(Ljava/lang/Object;Lrx/internal/operators/NotificationLite<TT;>;)V" },
    { "getActual", NULL, "Lrx.Observer;", 0x4, NULL, "()Lrx/Observer<-TT;>;" },
    { "index", NULL, "TI;", 0x1, NULL, "<I:Ljava/lang/Object;>()TI;" },
    { "indexWithId:", "index", "V", 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "actual_", NULL, 0x10, "Lrx.Observer;", NULL, "Lrx/Observer<-TT;>;", .constantValue.asLong = 0 },
    { "first_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "emitting_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "queue_", NULL, 0x0, "Ljava.util.List;", NULL, "Ljava/util/List<Ljava/lang/Object;>;", .constantValue.asLong = 0 },
    { "fastPath_", NULL, 0x0, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "caughtUp_", NULL, 0x44, "Z", NULL, NULL, .constantValue.asLong = 0 },
    { "index_", NULL, 0x42, "Ljava.lang.Object;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _RxSubjectsSubjectSubscriptionManager_SubjectObserver = { 2, "SubjectObserver", "rx.subjects", "SubjectSubscriptionManager", 0x1c, 11, methods, 7, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;Lrx/Observer<TT;>;" };
  return &_RxSubjectsSubjectSubscriptionManager_SubjectObserver;
}

@end

void RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(RxSubjectsSubjectSubscriptionManager_SubjectObserver *self, id<RxObserver> actual) {
  NSObject_init(self);
  self->first_ = true;
  self->actual_ = actual;
}

RxSubjectsSubjectSubscriptionManager_SubjectObserver *new_RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(id<RxObserver> actual) {
  RxSubjectsSubjectSubscriptionManager_SubjectObserver *self = [RxSubjectsSubjectSubscriptionManager_SubjectObserver alloc];
  RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(self, actual);
  return self;
}

RxSubjectsSubjectSubscriptionManager_SubjectObserver *create_RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(id<RxObserver> actual) {
  return new_RxSubjectsSubjectSubscriptionManager_SubjectObserver_initWithRxObserver_(actual);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxSubjectsSubjectSubscriptionManager_SubjectObserver)

@implementation RxSubjectsSubjectSubscriptionManager_$1

- (void)call {
  [this$0_ removeWithRxSubjectsSubjectSubscriptionManager_SubjectObserver:val$bo_];
}

- (instancetype)initWithRxSubjectsSubjectSubscriptionManager:(RxSubjectsSubjectSubscriptionManager *)outer$
    withRxSubjectsSubjectSubscriptionManager_SubjectObserver:(RxSubjectsSubjectSubscriptionManager_SubjectObserver *)capture$0 {
  RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(self, outer$, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", NULL, "V", 0x1, NULL, NULL },
    { "initWithRxSubjectsSubjectSubscriptionManager:withRxSubjectsSubjectSubscriptionManager_SubjectObserver:", "", NULL, 0x0, NULL, "(Lrx/subjects/SubjectSubscriptionManager;Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lrx.subjects.SubjectSubscriptionManager;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$bo_", NULL, 0x1012, "Lrx.subjects.SubjectSubscriptionManager$SubjectObserver;", NULL, "Lrx/subjects/SubjectSubscriptionManager$SubjectObserver<TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxSubjectsSubjectSubscriptionManager", "addUnsubscriberWithRxSubscriber:withRxSubjectsSubjectSubscriptionManager_SubjectObserver:" };
  static const J2ObjcClassInfo _RxSubjectsSubjectSubscriptionManager_$1 = { 2, "", "rx.subjects", "SubjectSubscriptionManager", 0x8008, 2, methods, 2, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_RxSubjectsSubjectSubscriptionManager_$1;
}

@end

void RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager_$1 *self, RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0) {
  self->this$0_ = outer$;
  self->val$bo_ = capture$0;
  NSObject_init(self);
}

RxSubjectsSubjectSubscriptionManager_$1 *new_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0) {
  RxSubjectsSubjectSubscriptionManager_$1 *self = [RxSubjectsSubjectSubscriptionManager_$1 alloc];
  RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(self, outer$, capture$0);
  return self;
}

RxSubjectsSubjectSubscriptionManager_$1 *create_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(RxSubjectsSubjectSubscriptionManager *outer$, RxSubjectsSubjectSubscriptionManager_SubjectObserver *capture$0) {
  return new_RxSubjectsSubjectSubscriptionManager_$1_initWithRxSubjectsSubjectSubscriptionManager_withRxSubjectsSubjectSubscriptionManager_SubjectObserver_(outer$, capture$0);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxSubjectsSubjectSubscriptionManager_$1)
