//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/RxJava/src/main/java/rx/internal/util/unsafe/SpscArrayQueue.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/lang/NoSuchFieldException.h"
#include "java/lang/NullPointerException.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/reflect/Field.h"
#include "rx/internal/util/unsafe/ConcurrentCircularArrayQueue.h"
#include "rx/internal/util/unsafe/SpscArrayQueue.h"
#include "rx/internal/util/unsafe/UnsafeAccess.h"
#include "sun/misc/Unsafe.h"

inline JavaLangInteger *RxInternalUtilUnsafeSpscArrayQueueColdField_get_MAX_LOOK_AHEAD_STEP();
static JavaLangInteger *RxInternalUtilUnsafeSpscArrayQueueColdField_MAX_LOOK_AHEAD_STEP;
J2OBJC_STATIC_FIELD_OBJ_FINAL(RxInternalUtilUnsafeSpscArrayQueueColdField, MAX_LOOK_AHEAD_STEP, JavaLangInteger *)

inline jlong RxInternalUtilUnsafeSpscArrayQueueProducerFields_get_P_INDEX_OFFSET();
static jlong RxInternalUtilUnsafeSpscArrayQueueProducerFields_P_INDEX_OFFSET;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(RxInternalUtilUnsafeSpscArrayQueueProducerFields, P_INDEX_OFFSET, jlong)

__attribute__((unused)) static jlong RxInternalUtilUnsafeSpscArrayQueueProducerFields_lvProducerIndex(RxInternalUtilUnsafeSpscArrayQueueProducerFields *self);

inline jlong RxInternalUtilUnsafeSpscArrayQueueConsumerField_get_C_INDEX_OFFSET();
static jlong RxInternalUtilUnsafeSpscArrayQueueConsumerField_C_INDEX_OFFSET;
J2OBJC_STATIC_FIELD_PRIMITIVE_FINAL(RxInternalUtilUnsafeSpscArrayQueueConsumerField, C_INDEX_OFFSET, jlong)

__attribute__((unused)) static jlong RxInternalUtilUnsafeSpscArrayQueueConsumerField_lvConsumerIndex(RxInternalUtilUnsafeSpscArrayQueueConsumerField *self);

J2OBJC_INITIALIZED_DEFN(RxInternalUtilUnsafeSpscArrayQueueColdField)

@implementation RxInternalUtilUnsafeSpscArrayQueueColdField

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueColdField_initWithInt_(self, capacity);
  return self;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (void)initialize {
  if (self == [RxInternalUtilUnsafeSpscArrayQueueColdField class]) {
    RxInternalUtilUnsafeSpscArrayQueueColdField_MAX_LOOK_AHEAD_STEP = JavaLangInteger_getIntegerWithNSString_withInt_(@"jctoolts.spsc.max.lookahead.step", 4096);
    J2OBJC_SET_INITIALIZED(RxInternalUtilUnsafeSpscArrayQueueColdField)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueColdField", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "MAX_LOOK_AHEAD_STEP", "MAX_LOOK_AHEAD_STEP", 0x1a, "Ljava.lang.Integer;", &RxInternalUtilUnsafeSpscArrayQueueColdField_MAX_LOOK_AHEAD_STEP, NULL, .constantValue.asLong = 0 },
    { "lookAheadStep_", NULL, 0x14, "I", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueColdField = { 2, "SpscArrayQueueColdField", "rx.internal.util.unsafe", NULL, 0x400, 1, methods, 2, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/ConcurrentCircularArrayQueue<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueColdField;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueColdField_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueColdField *self, jint capacity) {
  RxInternalUtilUnsafeConcurrentCircularArrayQueue_initWithInt_(self, capacity);
  self->lookAheadStep_ = JavaLangMath_minWithInt_withInt_(capacity / 4, [((JavaLangInteger *) nil_chk(RxInternalUtilUnsafeSpscArrayQueueColdField_MAX_LOOK_AHEAD_STEP)) intValue]);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueColdField)

@implementation RxInternalUtilUnsafeSpscArrayQueueL1Pad

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueL1Pad_initWithInt_(self, capacity);
  return self;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueL1Pad", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "p10_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p11_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p12_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p13_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p14_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p15_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p16_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p30_SpscArrayQueueL1Pad_", "p30", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p31_SpscArrayQueueL1Pad_", "p31", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p32_SpscArrayQueueL1Pad_", "p32", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p33_SpscArrayQueueL1Pad_", "p33", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p34_SpscArrayQueueL1Pad_", "p34", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p35_SpscArrayQueueL1Pad_", "p35", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p36_SpscArrayQueueL1Pad_", "p36", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p37_SpscArrayQueueL1Pad_", "p37", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueL1Pad = { 2, "SpscArrayQueueL1Pad", "rx.internal.util.unsafe", NULL, 0x400, 1, methods, 15, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueColdField<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueL1Pad;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueL1Pad_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueL1Pad *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueColdField_initWithInt_(self, capacity);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueL1Pad)

J2OBJC_INITIALIZED_DEFN(RxInternalUtilUnsafeSpscArrayQueueProducerFields)

@implementation RxInternalUtilUnsafeSpscArrayQueueProducerFields

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueProducerFields_initWithInt_(self, capacity);
  return self;
}

- (jlong)lvProducerIndex {
  return RxInternalUtilUnsafeSpscArrayQueueProducerFields_lvProducerIndex(self);
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (void)initialize {
  if (self == [RxInternalUtilUnsafeSpscArrayQueueProducerFields class]) {
    {
      @try {
        RxInternalUtilUnsafeSpscArrayQueueProducerFields_P_INDEX_OFFSET = [((SunMiscUnsafe *) nil_chk(JreLoadStatic(RxInternalUtilUnsafeUnsafeAccess, UNSAFE))) objectFieldOffsetWithJavaLangReflectField:[RxInternalUtilUnsafeSpscArrayQueueProducerFields_class_() getDeclaredField:@"producerIndex"]];
      }
      @catch (JavaLangNoSuchFieldException *e) {
        @throw new_JavaLangRuntimeException_initWithNSException_(e);
      }
    }
    J2OBJC_SET_INITIALIZED(RxInternalUtilUnsafeSpscArrayQueueProducerFields)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueProducerFields", NULL, 0x1, NULL, NULL },
    { "lvProducerIndex", NULL, "J", 0x14, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "P_INDEX_OFFSET", "P_INDEX_OFFSET", 0x1a, "J", &RxInternalUtilUnsafeSpscArrayQueueProducerFields_P_INDEX_OFFSET, NULL, .constantValue.asLong = 0 },
    { "producerIndex_", NULL, 0x4, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "producerLookAhead_", NULL, 0x4, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueProducerFields = { 2, "SpscArrayQueueProducerFields", "rx.internal.util.unsafe", NULL, 0x400, 2, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueL1Pad<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueProducerFields;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueProducerFields_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueProducerFields *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueL1Pad_initWithInt_(self, capacity);
}

jlong RxInternalUtilUnsafeSpscArrayQueueProducerFields_lvProducerIndex(RxInternalUtilUnsafeSpscArrayQueueProducerFields *self) {
  return [((SunMiscUnsafe *) nil_chk(JreLoadStatic(RxInternalUtilUnsafeUnsafeAccess, UNSAFE))) getLongVolatileWithId:self withLong:RxInternalUtilUnsafeSpscArrayQueueProducerFields_P_INDEX_OFFSET];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueProducerFields)

@implementation RxInternalUtilUnsafeSpscArrayQueueL2Pad

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueL2Pad_initWithInt_(self, capacity);
  return self;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueL2Pad", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "p20_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p21_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p22_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p23_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p24_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p25_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p26_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p30_SpscArrayQueueL2Pad_", "p30", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p31_SpscArrayQueueL2Pad_", "p31", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p32_SpscArrayQueueL2Pad_", "p32", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p33_SpscArrayQueueL2Pad_", "p33", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p34_SpscArrayQueueL2Pad_", "p34", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p35_SpscArrayQueueL2Pad_", "p35", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p36_SpscArrayQueueL2Pad_", "p36", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p37_SpscArrayQueueL2Pad_", "p37", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueL2Pad = { 2, "SpscArrayQueueL2Pad", "rx.internal.util.unsafe", NULL, 0x400, 1, methods, 15, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueProducerFields<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueL2Pad;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueL2Pad_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueL2Pad *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueProducerFields_initWithInt_(self, capacity);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueL2Pad)

J2OBJC_INITIALIZED_DEFN(RxInternalUtilUnsafeSpscArrayQueueConsumerField)

@implementation RxInternalUtilUnsafeSpscArrayQueueConsumerField

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueConsumerField_initWithInt_(self, capacity);
  return self;
}

- (jlong)lvConsumerIndex {
  return RxInternalUtilUnsafeSpscArrayQueueConsumerField_lvConsumerIndex(self);
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (void)initialize {
  if (self == [RxInternalUtilUnsafeSpscArrayQueueConsumerField class]) {
    {
      @try {
        RxInternalUtilUnsafeSpscArrayQueueConsumerField_C_INDEX_OFFSET = [((SunMiscUnsafe *) nil_chk(JreLoadStatic(RxInternalUtilUnsafeUnsafeAccess, UNSAFE))) objectFieldOffsetWithJavaLangReflectField:[RxInternalUtilUnsafeSpscArrayQueueConsumerField_class_() getDeclaredField:@"consumerIndex"]];
      }
      @catch (JavaLangNoSuchFieldException *e) {
        @throw new_JavaLangRuntimeException_initWithNSException_(e);
      }
    }
    J2OBJC_SET_INITIALIZED(RxInternalUtilUnsafeSpscArrayQueueConsumerField)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueConsumerField", NULL, 0x1, NULL, NULL },
    { "lvConsumerIndex", NULL, "J", 0x14, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "consumerIndex_", NULL, 0x4, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "C_INDEX_OFFSET", "C_INDEX_OFFSET", 0x1a, "J", &RxInternalUtilUnsafeSpscArrayQueueConsumerField_C_INDEX_OFFSET, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueConsumerField = { 2, "SpscArrayQueueConsumerField", "rx.internal.util.unsafe", NULL, 0x400, 2, methods, 2, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueL2Pad<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueConsumerField;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueConsumerField_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueConsumerField *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueL2Pad_initWithInt_(self, capacity);
}

jlong RxInternalUtilUnsafeSpscArrayQueueConsumerField_lvConsumerIndex(RxInternalUtilUnsafeSpscArrayQueueConsumerField *self) {
  return [((SunMiscUnsafe *) nil_chk(JreLoadStatic(RxInternalUtilUnsafeUnsafeAccess, UNSAFE))) getLongVolatileWithId:self withLong:RxInternalUtilUnsafeSpscArrayQueueConsumerField_C_INDEX_OFFSET];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueConsumerField)

@implementation RxInternalUtilUnsafeSpscArrayQueueL3Pad

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueueL3Pad_initWithInt_(self, capacity);
  return self;
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueueL3Pad", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "p40_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p41_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p42_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p43_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p44_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p45_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p46_", NULL, 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p30_SpscArrayQueueL3Pad_", "p30", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p31_SpscArrayQueueL3Pad_", "p31", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p32_SpscArrayQueueL3Pad_", "p32", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p33_SpscArrayQueueL3Pad_", "p33", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p34_SpscArrayQueueL3Pad_", "p34", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p35_SpscArrayQueueL3Pad_", "p35", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p36_SpscArrayQueueL3Pad_", "p36", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "p37_SpscArrayQueueL3Pad_", "p37", 0x0, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueueL3Pad = { 2, "SpscArrayQueueL3Pad", "rx.internal.util.unsafe", NULL, 0x400, 1, methods, 15, fields, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueConsumerField<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueueL3Pad;
}

@end

void RxInternalUtilUnsafeSpscArrayQueueL3Pad_initWithInt_(RxInternalUtilUnsafeSpscArrayQueueL3Pad *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueConsumerField_initWithInt_(self, capacity);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueueL3Pad)

@implementation RxInternalUtilUnsafeSpscArrayQueue

- (instancetype)initWithInt:(jint)capacity {
  RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(self, capacity);
  return self;
}

- (jboolean)offerWithId:(id)e {
  if (nil == e) {
    @throw new_JavaLangNullPointerException_initWithNSString_(@"Null is not a valid element");
  }
  IOSObjectArray *lElementBuffer = buffer_;
  if (producerIndex_ >= producerLookAhead_) {
    if (nil != [self lvElementWithNSObjectArray:lElementBuffer withLong:[self calcElementOffsetWithLong:producerIndex_ + lookAheadStep_]]) {
      return false;
    }
    producerLookAhead_ = producerIndex_ + lookAheadStep_;
  }
  jlong offset = [self calcElementOffsetWithLong:producerIndex_];
  producerIndex_++;
  [self soElementWithNSObjectArray:lElementBuffer withLong:offset withId:e];
  return true;
}

- (id)poll {
  jlong offset = [self calcElementOffsetWithLong:consumerIndex_];
  IOSObjectArray *lElementBuffer = buffer_;
  id e = [self lvElementWithNSObjectArray:lElementBuffer withLong:offset];
  if (nil == e) {
    return nil;
  }
  consumerIndex_++;
  [self soElementWithNSObjectArray:lElementBuffer withLong:offset withId:nil];
  return e;
}

- (id)peek {
  return [self lvElementWithLong:[self calcElementOffsetWithLong:consumerIndex_]];
}

- (jint)size {
  jlong after = RxInternalUtilUnsafeSpscArrayQueueConsumerField_lvConsumerIndex(self);
  while (true) {
    jlong before = after;
    jlong currentProducerIndex = RxInternalUtilUnsafeSpscArrayQueueProducerFields_lvProducerIndex(self);
    after = RxInternalUtilUnsafeSpscArrayQueueConsumerField_lvConsumerIndex(self);
    if (before == after) {
      return (jint) (currentProducerIndex - after);
    }
  }
}

- (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(__unsafe_unretained id *)stackbuf count:(NSUInteger)len {
  return JreDefaultFastEnumeration(self, state, stackbuf, len);
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithInt:", "SpscArrayQueue", NULL, 0x1, NULL, NULL },
    { "offerWithId:", "offer", "Z", 0x1, NULL, "(TE;)Z" },
    { "poll", NULL, "TE;", 0x1, NULL, "()TE;" },
    { "peek", NULL, "TE;", 0x1, NULL, "()TE;" },
    { "size", NULL, "I", 0x1, NULL, NULL },
  };
  static const char *superclass_type_args[] = {"TE;"};
  static const J2ObjcClassInfo _RxInternalUtilUnsafeSpscArrayQueue = { 2, "SpscArrayQueue", "rx.internal.util.unsafe", NULL, 0x11, 5, methods, 0, NULL, 1, superclass_type_args, 0, NULL, NULL, "<E:Ljava/lang/Object;>Lrx/internal/util/unsafe/SpscArrayQueueL3Pad<TE;>;" };
  return &_RxInternalUtilUnsafeSpscArrayQueue;
}

@end

void RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(RxInternalUtilUnsafeSpscArrayQueue *self, jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueueL3Pad_initWithInt_(self, capacity);
}

RxInternalUtilUnsafeSpscArrayQueue *new_RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(jint capacity) {
  RxInternalUtilUnsafeSpscArrayQueue *self = [RxInternalUtilUnsafeSpscArrayQueue alloc];
  RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(self, capacity);
  return self;
}

RxInternalUtilUnsafeSpscArrayQueue *create_RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(jint capacity) {
  return new_RxInternalUtilUnsafeSpscArrayQueue_initWithInt_(capacity);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalUtilUnsafeSpscArrayQueue)
