//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/kgalligan/devel/xp/RxJava/src/main/java/rx/internal/operators/OperatorPublish.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Long.h"
#include "java/lang/RuntimeException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/LinkedHashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/concurrent/atomic/AtomicLong.h"
#include "java/util/concurrent/atomic/AtomicLongFieldUpdater.h"
#include "rx/Observable.h"
#include "rx/Producer.h"
#include "rx/Subscriber.h"
#include "rx/Subscription.h"
#include "rx/exceptions/CompositeException.h"
#include "rx/exceptions/Exceptions.h"
#include "rx/exceptions/MissingBackpressureException.h"
#include "rx/functions/Action0.h"
#include "rx/functions/Action1.h"
#include "rx/functions/Func1.h"
#include "rx/internal/operators/NotificationLite.h"
#include "rx/internal/operators/OperatorPublish.h"
#include "rx/internal/util/RxRingBuffer.h"
#include "rx/observables/ConnectableObservable.h"
#include "rx/subscriptions/Subscriptions.h"

@class RxInternalOperatorsOperatorPublish_RequestHandler;

@interface RxInternalOperatorsOperatorPublish () {
 @public
  RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler_;
}

- (instancetype)initWithRxObservable:(RxObservable *)source;

- (instancetype)initWithRxObservable:(RxObservable *)source
                              withId:(id)guard
withRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)requestHandler;

@end

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish, requestHandler_, RxInternalOperatorsOperatorPublish_RequestHandler *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxInternalOperatorsOperatorPublish *self, RxObservable *source);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish *new_RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxObservable *source) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish *create_RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxObservable *source);

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish *self, RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish *new_RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish *create_RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler);

@interface RxInternalOperatorsOperatorPublish_OriginSubscriber : RxSubscriber {
 @public
  RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler_;
  JavaUtilConcurrentAtomicAtomicLong *originOutstanding_;
  jlong THRESHOLD_;
}

- (instancetype)initWithRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)requestHandler;

- (void)onStart;

- (void)requestMoreWithLong:(jlong)r;

- (void)onCompleted;

- (void)onErrorWithNSException:(NSException *)e;
#ifdef J2OBJC_RENAME_ALIASES
#define onErrorWithJavaLangThrowable onErrorWithNSException
#endif // J2OBJC_RENAME_ALIASES

- (void)onNextWithId:(id)t;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_OriginSubscriber)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_OriginSubscriber, requestHandler_, RxInternalOperatorsOperatorPublish_RequestHandler *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_OriginSubscriber, originOutstanding_, JavaUtilConcurrentAtomicAtomicLong *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_OriginSubscriber *self, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_OriginSubscriber *new_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_OriginSubscriber *create_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler);

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_OriginSubscriber_requestMoreWithLong_(RxInternalOperatorsOperatorPublish_OriginSubscriber *self, jlong r);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_OriginSubscriber)

@interface RxInternalOperatorsOperatorPublish_State : NSObject {
 @public
  jlong outstandingRequests_;
  jlong emittedSinceRequest_;
  RxInternalOperatorsOperatorPublish_OriginSubscriber *origin_;
  id<JavaUtilMap> ss_;
  IOSObjectArray *subscribers_;
}

- (RxInternalOperatorsOperatorPublish_OriginSubscriber *)getOrigin;

- (void)setOriginWithRxInternalOperatorsOperatorPublish_OriginSubscriber:(RxInternalOperatorsOperatorPublish_OriginSubscriber *)o;

- (jboolean)canEmitWithDecrement;

- (void)incrementOutstandingAfterFailedEmit;

- (IOSObjectArray *)getSubscribers;

- (jlong)requestFromSubscriberWithRxSubscriber:(RxSubscriber *)subscriber
                              withJavaLangLong:(JavaLangLong *)request;

- (void)removeSubscriberWithRxSubscriber:(RxSubscriber *)subscriber;

- (jlong)resetAfterSubscriberUpdate;

- (instancetype)init;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_State)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_State, origin_, RxInternalOperatorsOperatorPublish_OriginSubscriber *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_State, ss_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_State, subscribers_, IOSObjectArray *)

__attribute__((unused)) static jlong RxInternalOperatorsOperatorPublish_State_resetAfterSubscriberUpdate(RxInternalOperatorsOperatorPublish_State *self);

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_State_init(RxInternalOperatorsOperatorPublish_State *self);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_State *new_RxInternalOperatorsOperatorPublish_State_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_State *create_RxInternalOperatorsOperatorPublish_State_init();

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_State)

@interface RxInternalOperatorsOperatorPublish_RequestHandler : NSObject {
 @public
  RxInternalOperatorsNotificationLite *notifier_;
  RxInternalUtilRxRingBuffer *buffer_;
  RxInternalOperatorsOperatorPublish_State *state_;
  volatile_jlong wip_;
}

- (void)requestFromChildSubscriberWithRxSubscriber:(RxSubscriber *)subscriber
                                  withJavaLangLong:(JavaLangLong *)request;

- (void)emitWithId:(id)t;

- (void)requestMoreAfterEmissionWithInt:(jint)emitted;

- (void)drainQueue;

- (instancetype)init;

@end

J2OBJC_STATIC_INIT(RxInternalOperatorsOperatorPublish_RequestHandler)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_RequestHandler, notifier_, RxInternalOperatorsNotificationLite *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_RequestHandler, buffer_, RxInternalUtilRxRingBuffer *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_RequestHandler, state_, RxInternalOperatorsOperatorPublish_State *)

inline JavaUtilConcurrentAtomicAtomicLongFieldUpdater *RxInternalOperatorsOperatorPublish_RequestHandler_get_WIP();
static JavaUtilConcurrentAtomicAtomicLongFieldUpdater *RxInternalOperatorsOperatorPublish_RequestHandler_WIP;
J2OBJC_STATIC_FIELD_OBJ_FINAL(RxInternalOperatorsOperatorPublish_RequestHandler, WIP, JavaUtilConcurrentAtomicAtomicLongFieldUpdater *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_RequestHandler_requestMoreAfterEmissionWithInt_(RxInternalOperatorsOperatorPublish_RequestHandler *self, jint emitted);

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_RequestHandler_init(RxInternalOperatorsOperatorPublish_RequestHandler *self);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_RequestHandler *new_RxInternalOperatorsOperatorPublish_RequestHandler_init() NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_RequestHandler *create_RxInternalOperatorsOperatorPublish_RequestHandler_init();

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_RequestHandler)

@interface RxInternalOperatorsOperatorPublish_$1 : NSObject < RxObservable_OnSubscribe > {
 @public
  RxObservable *val$source_;
  id<RxFunctionsFunc1> val$selector_;
}

- (void)callWithId:(RxSubscriber *)child;

- (instancetype)initWithRxObservable:(RxObservable *)capture$0
                withRxFunctionsFunc1:(id<RxFunctionsFunc1>)capture$1;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$1, val$source_, RxObservable *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$1, val$selector_, id<RxFunctionsFunc1>)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxInternalOperatorsOperatorPublish_$1 *self, RxObservable *capture$0, id<RxFunctionsFunc1> capture$1);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$1 *new_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxObservable *capture$0, id<RxFunctionsFunc1> capture$1) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$1 *create_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxObservable *capture$0, id<RxFunctionsFunc1> capture$1);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$1)

@interface RxInternalOperatorsOperatorPublish_$1_$1 : NSObject < RxFunctionsAction1 > {
 @public
  RxSubscriber *val$child_;
}

- (void)callWithId:(id<RxSubscription>)sub;

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$1_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$1_$1, val$child_, RxSubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxInternalOperatorsOperatorPublish_$1_$1 *self, RxSubscriber *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$1_$1 *new_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxSubscriber *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$1_$1 *create_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxSubscriber *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$1_$1)

@interface RxInternalOperatorsOperatorPublish_$2 : NSObject < RxObservable_OnSubscribe > {
 @public
  RxInternalOperatorsOperatorPublish_RequestHandler *val$requestHandler_;
}

- (void)callWithId:(RxSubscriber *)subscriber;

- (instancetype)initWithRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$2)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$2, val$requestHandler_, RxInternalOperatorsOperatorPublish_RequestHandler *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_$2 *self, RxInternalOperatorsOperatorPublish_RequestHandler *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2 *new_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2 *create_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$2)

@interface RxInternalOperatorsOperatorPublish_$2_$1 : NSObject < RxProducer > {
 @public
  RxInternalOperatorsOperatorPublish_$2 *this$0_;
  RxSubscriber *val$subscriber_;
}

- (void)requestWithLong:(jlong)n;

- (instancetype)initWithRxInternalOperatorsOperatorPublish_$2:(RxInternalOperatorsOperatorPublish_$2 *)outer$
                                             withRxSubscriber:(RxSubscriber *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$2_$1)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$2_$1, this$0_, RxInternalOperatorsOperatorPublish_$2 *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$2_$1, val$subscriber_, RxSubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2_$1 *self, RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2_$1 *new_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2_$1 *create_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$2_$1)

@interface RxInternalOperatorsOperatorPublish_$2_$2 : NSObject < RxFunctionsAction0 > {
 @public
  RxInternalOperatorsOperatorPublish_$2 *this$0_;
  RxSubscriber *val$subscriber_;
}

- (void)call;

- (instancetype)initWithRxInternalOperatorsOperatorPublish_$2:(RxInternalOperatorsOperatorPublish_$2 *)outer$
                                             withRxSubscriber:(RxSubscriber *)capture$0;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$2_$2)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$2_$2, this$0_, RxInternalOperatorsOperatorPublish_$2 *)
J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$2_$2, val$subscriber_, RxSubscriber *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2_$2 *self, RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2_$2 *new_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$2_$2 *create_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$2_$2)

@interface RxInternalOperatorsOperatorPublish_$3 : NSObject < RxFunctionsAction0 > {
 @public
  RxInternalOperatorsOperatorPublish *this$0_;
}

- (void)call;

- (instancetype)initWithRxInternalOperatorsOperatorPublish:(RxInternalOperatorsOperatorPublish *)outer$;

@end

J2OBJC_EMPTY_STATIC_INIT(RxInternalOperatorsOperatorPublish_$3)

J2OBJC_FIELD_SETTER(RxInternalOperatorsOperatorPublish_$3, this$0_, RxInternalOperatorsOperatorPublish *)

__attribute__((unused)) static void RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish_$3 *self, RxInternalOperatorsOperatorPublish *outer$);

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$3 *new_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish *outer$) NS_RETURNS_RETAINED;

__attribute__((unused)) static RxInternalOperatorsOperatorPublish_$3 *create_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish *outer$);

J2OBJC_TYPE_LITERAL_HEADER(RxInternalOperatorsOperatorPublish_$3)

@implementation RxInternalOperatorsOperatorPublish

+ (RxObservablesConnectableObservable *)createWithRxObservable:(RxObservable *)source {
  return RxInternalOperatorsOperatorPublish_createWithRxObservable_(source);
}

+ (RxObservable *)createWithRxObservable:(RxObservable *)source
                    withRxFunctionsFunc1:(id<RxFunctionsFunc1>)selector {
  return RxInternalOperatorsOperatorPublish_createWithRxObservable_withRxFunctionsFunc1_(source, selector);
}

- (instancetype)initWithRxObservable:(RxObservable *)source {
  RxInternalOperatorsOperatorPublish_initWithRxObservable_(self, source);
  return self;
}

- (instancetype)initWithRxObservable:(RxObservable *)source
                              withId:(id)guard
withRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)requestHandler {
  RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(self, source, guard, requestHandler);
  return self;
}

- (void)connectWithRxFunctionsAction1:(id<RxFunctionsAction1>)connection {
  jboolean shouldSubscribe = false;
  RxInternalOperatorsOperatorPublish_OriginSubscriber *origin = [((RxInternalOperatorsOperatorPublish_State *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(requestHandler_))->state_)) getOrigin];
  if (origin == nil) {
    shouldSubscribe = true;
    [requestHandler_->state_ setOriginWithRxInternalOperatorsOperatorPublish_OriginSubscriber:new_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(requestHandler_)];
  }
  if (shouldSubscribe) {
    [((id<RxFunctionsAction1>) nil_chk(connection)) callWithId:RxSubscriptionsSubscriptions_createWithRxFunctionsAction0_(new_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(self))];
    RxInternalOperatorsOperatorPublish_OriginSubscriber *os = [requestHandler_->state_ getOrigin];
    if (os != nil) {
      (void) [((RxObservable *) nil_chk(source_)) unsafeSubscribeWithRxSubscriber:os];
    }
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "createWithRxObservable:", "create", "Lrx.observables.ConnectableObservable;", 0x9, NULL, "<T:Ljava/lang/Object;>(Lrx/Observable<+TT;>;)Lrx/observables/ConnectableObservable<TT;>;" },
    { "createWithRxObservable:withRxFunctionsFunc1:", "create", "Lrx.Observable;", 0x9, NULL, "<T:Ljava/lang/Object;R:Ljava/lang/Object;>(Lrx/Observable<+TT;>;Lrx/functions/Func1<-Lrx/Observable<TT;>;+Lrx/Observable<TR;>;>;)Lrx/Observable<TR;>;" },
    { "initWithRxObservable:", "OperatorPublish", NULL, 0x2, NULL, "(Lrx/Observable<+TT;>;)V" },
    { "initWithRxObservable:withId:withRxInternalOperatorsOperatorPublish_RequestHandler:", "OperatorPublish", NULL, 0x2, NULL, "(Lrx/Observable<+TT;>;Ljava/lang/Object;Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;)V" },
    { "connectWithRxFunctionsAction1:", "connect", "V", 0x1, NULL, "(Lrx/functions/Action1<-Lrx/Subscription;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "source_", NULL, 0x10, "Lrx.Observable;", NULL, "Lrx/Observable<+TT;>;", .constantValue.asLong = 0 },
    { "requestHandler_", NULL, 0x12, "Lrx.internal.operators.OperatorPublish$RequestHandler;", NULL, "Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;", .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TT;"};
  static const char *inner_classes[] = {"Lrx.internal.operators.OperatorPublish$OriginSubscriber;", "Lrx.internal.operators.OperatorPublish$State;", "Lrx.internal.operators.OperatorPublish$RequestHandler;"};
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish = { 2, "OperatorPublish", "rx.internal.operators", NULL, 0x1, 5, methods, 2, fields, 1, superclass_type_args, 3, inner_classes, NULL, "<T:Ljava/lang/Object;>Lrx/observables/ConnectableObservable<TT;>;" };
  return &_RxInternalOperatorsOperatorPublish;
}

@end

RxObservablesConnectableObservable *RxInternalOperatorsOperatorPublish_createWithRxObservable_(RxObservable *source) {
  RxInternalOperatorsOperatorPublish_initialize();
  return new_RxInternalOperatorsOperatorPublish_initWithRxObservable_(source);
}

RxObservable *RxInternalOperatorsOperatorPublish_createWithRxObservable_withRxFunctionsFunc1_(RxObservable *source, id<RxFunctionsFunc1> selector) {
  RxInternalOperatorsOperatorPublish_initialize();
  return RxObservable_createWithRxObservable_OnSubscribe_(new_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(source, selector));
}

void RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxInternalOperatorsOperatorPublish *self, RxObservable *source) {
  RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(self, source, new_NSObject_init(), new_RxInternalOperatorsOperatorPublish_RequestHandler_init());
}

RxInternalOperatorsOperatorPublish *new_RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxObservable *source) {
  RxInternalOperatorsOperatorPublish *self = [RxInternalOperatorsOperatorPublish alloc];
  RxInternalOperatorsOperatorPublish_initWithRxObservable_(self, source);
  return self;
}

RxInternalOperatorsOperatorPublish *create_RxInternalOperatorsOperatorPublish_initWithRxObservable_(RxObservable *source) {
  return new_RxInternalOperatorsOperatorPublish_initWithRxObservable_(source);
}

void RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish *self, RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  RxObservablesConnectableObservable_initWithRxObservable_OnSubscribe_(self, new_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(requestHandler));
  self->source_ = source;
  self->requestHandler_ = requestHandler;
}

RxInternalOperatorsOperatorPublish *new_RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  RxInternalOperatorsOperatorPublish *self = [RxInternalOperatorsOperatorPublish alloc];
  RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(self, source, guard, requestHandler);
  return self;
}

RxInternalOperatorsOperatorPublish *create_RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(RxObservable *source, id guard, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  return new_RxInternalOperatorsOperatorPublish_initWithRxObservable_withId_withRxInternalOperatorsOperatorPublish_RequestHandler_(source, guard, requestHandler);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish)

@implementation RxInternalOperatorsOperatorPublish_OriginSubscriber

- (instancetype)initWithRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)requestHandler {
  RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(self, requestHandler);
  return self;
}

- (void)onStart {
  RxInternalOperatorsOperatorPublish_OriginSubscriber_requestMoreWithLong_(self, JreLoadStatic(RxInternalUtilRxRingBuffer, SIZE));
}

- (void)requestMoreWithLong:(jlong)r {
  RxInternalOperatorsOperatorPublish_OriginSubscriber_requestMoreWithLong_(self, r);
}

- (void)onCompleted {
  @try {
    [requestHandler_ emitWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(requestHandler_))->notifier_)) completed]];
  }
  @catch (RxExceptionsMissingBackpressureException *e) {
    [self onErrorWithNSException:e];
  }
}

- (void)onErrorWithNSException:(NSException *)e {
  id<JavaUtilList> errors = nil;
  {
    IOSObjectArray *a__ = [((RxInternalOperatorsOperatorPublish_State *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(requestHandler_))->state_)) getSubscribers];
    RxSubscriber * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
    RxSubscriber * const *e__ = b__ + a__->size_;
    while (b__ < e__) {
      RxSubscriber *subscriber = *b__++;
      @try {
        [((RxSubscriber *) nil_chk(subscriber)) onErrorWithNSException:e];
      }
      @catch (NSException *e2) {
        if (errors == nil) {
          errors = new_JavaUtilArrayList_init();
        }
        [((id<JavaUtilList>) nil_chk(errors)) addWithId:e2];
      }
    }
  }
  if (errors != nil) {
    if ([errors size] == 1) {
      (void) RxExceptionsExceptions_propagateWithNSException_([errors getWithInt:0]);
    }
    else {
      @throw new_RxExceptionsCompositeException_initWithNSString_withJavaUtilCollection_(@"Errors while emitting onError", errors);
    }
  }
}

- (void)onNextWithId:(id)t {
  @try {
    [requestHandler_ emitWithId:[((RxInternalOperatorsNotificationLite *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(requestHandler_))->notifier_)) nextWithId:t]];
  }
  @catch (RxExceptionsMissingBackpressureException *e) {
    [self onErrorWithNSException:e];
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithRxInternalOperatorsOperatorPublish_RequestHandler:", "OriginSubscriber", NULL, 0x0, NULL, "(Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;)V" },
    { "onStart", NULL, "V", 0x1, NULL, NULL },
    { "requestMoreWithLong:", "requestMore", "V", 0x2, NULL, NULL },
    { "onCompleted", NULL, "V", 0x1, NULL, NULL },
    { "onErrorWithNSException:", "onError", "V", 0x1, NULL, NULL },
    { "onNextWithId:", "onNext", "V", 0x1, NULL, "(TT;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "requestHandler_", NULL, 0x12, "Lrx.internal.operators.OperatorPublish$RequestHandler;", NULL, "Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;", .constantValue.asLong = 0 },
    { "originOutstanding_", NULL, 0x12, "Ljava.util.concurrent.atomic.AtomicLong;", NULL, NULL, .constantValue.asLong = 0 },
    { "THRESHOLD_", NULL, 0x12, "J", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const char *superclass_type_args[] = {"TT;"};
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_OriginSubscriber = { 2, "OriginSubscriber", "rx.internal.operators", "OperatorPublish", 0xa, 6, methods, 3, fields, 1, superclass_type_args, 0, NULL, NULL, "<T:Ljava/lang/Object;>Lrx/Subscriber<TT;>;" };
  return &_RxInternalOperatorsOperatorPublish_OriginSubscriber;
}

@end

void RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_OriginSubscriber *self, RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  RxSubscriber_init(self);
  self->originOutstanding_ = new_JavaUtilConcurrentAtomicAtomicLong_init();
  self->THRESHOLD_ = JreLoadStatic(RxInternalUtilRxRingBuffer, SIZE) / 4;
  self->requestHandler_ = requestHandler;
}

RxInternalOperatorsOperatorPublish_OriginSubscriber *new_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  RxInternalOperatorsOperatorPublish_OriginSubscriber *self = [RxInternalOperatorsOperatorPublish_OriginSubscriber alloc];
  RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(self, requestHandler);
  return self;
}

RxInternalOperatorsOperatorPublish_OriginSubscriber *create_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *requestHandler) {
  return new_RxInternalOperatorsOperatorPublish_OriginSubscriber_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(requestHandler);
}

void RxInternalOperatorsOperatorPublish_OriginSubscriber_requestMoreWithLong_(RxInternalOperatorsOperatorPublish_OriginSubscriber *self, jlong r) {
  [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(self->originOutstanding_)) addAndGetWithLong:r];
  [self requestWithLong:r];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_OriginSubscriber)

@implementation RxInternalOperatorsOperatorPublish_State

- (RxInternalOperatorsOperatorPublish_OriginSubscriber *)getOrigin {
  @synchronized(self) {
    return origin_;
  }
}

- (void)setOriginWithRxInternalOperatorsOperatorPublish_OriginSubscriber:(RxInternalOperatorsOperatorPublish_OriginSubscriber *)o {
  @synchronized(self) {
    self->origin_ = o;
  }
}

- (jboolean)canEmitWithDecrement {
  @synchronized(self) {
    if (outstandingRequests_ > 0) {
      outstandingRequests_--;
      emittedSinceRequest_++;
      return true;
    }
    return false;
  }
}

- (void)incrementOutstandingAfterFailedEmit {
  @synchronized(self) {
    outstandingRequests_++;
    emittedSinceRequest_--;
  }
}

- (IOSObjectArray *)getSubscribers {
  @synchronized(self) {
    return subscribers_;
  }
}

- (jlong)requestFromSubscriberWithRxSubscriber:(RxSubscriber *)subscriber
                              withJavaLangLong:(JavaLangLong *)request {
  @synchronized(self) {
    JavaUtilConcurrentAtomicAtomicLong *r = [((id<JavaUtilMap>) nil_chk(ss_)) getWithId:subscriber];
    if (r == nil) {
      (void) [ss_ putWithId:subscriber withId:new_JavaUtilConcurrentAtomicAtomicLong_initWithLong_([((JavaLangLong *) nil_chk(request)) longLongValue])];
    }
    else {
      if ([r get] != JavaLangLong_MAX_VALUE) {
        if ([((JavaLangLong *) nil_chk(request)) longLongValue] == JavaLangLong_MAX_VALUE) {
          [r setWithLong:JavaLangLong_MAX_VALUE];
        }
        else {
          [r addAndGetWithLong:[request longLongValue]];
        }
      }
    }
    return RxInternalOperatorsOperatorPublish_State_resetAfterSubscriberUpdate(self);
  }
}

- (void)removeSubscriberWithRxSubscriber:(RxSubscriber *)subscriber {
  @synchronized(self) {
    (void) [((id<JavaUtilMap>) nil_chk(ss_)) removeWithId:subscriber];
    RxInternalOperatorsOperatorPublish_State_resetAfterSubscriberUpdate(self);
  }
}

- (jlong)resetAfterSubscriberUpdate {
  return RxInternalOperatorsOperatorPublish_State_resetAfterSubscriberUpdate(self);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  RxInternalOperatorsOperatorPublish_State_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getOrigin", NULL, "Lrx.internal.operators.OperatorPublish$OriginSubscriber;", 0x21, NULL, "()Lrx/internal/operators/OperatorPublish$OriginSubscriber<TT;>;" },
    { "setOriginWithRxInternalOperatorsOperatorPublish_OriginSubscriber:", "setOrigin", "V", 0x21, NULL, "(Lrx/internal/operators/OperatorPublish$OriginSubscriber<TT;>;)V" },
    { "canEmitWithDecrement", NULL, "Z", 0x21, NULL, NULL },
    { "incrementOutstandingAfterFailedEmit", NULL, "V", 0x21, NULL, NULL },
    { "getSubscribers", NULL, "[Lrx.Subscriber;", 0x21, NULL, NULL },
    { "requestFromSubscriberWithRxSubscriber:withJavaLangLong:", "requestFromSubscriber", "J", 0x21, NULL, "(Lrx/Subscriber<-TT;>;Ljava/lang/Long;)J" },
    { "removeSubscriberWithRxSubscriber:", "removeSubscriber", "V", 0x21, NULL, "(Lrx/Subscriber<-TT;>;)V" },
    { "resetAfterSubscriberUpdate", NULL, "J", 0x2, NULL, NULL },
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "outstandingRequests_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "emittedSinceRequest_", NULL, 0x2, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "origin_", NULL, 0x2, "Lrx.internal.operators.OperatorPublish$OriginSubscriber;", NULL, "Lrx/internal/operators/OperatorPublish$OriginSubscriber<TT;>;", .constantValue.asLong = 0 },
    { "ss_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Lrx/Subscriber<-TT;>;Ljava/util/concurrent/atomic/AtomicLong;>;", .constantValue.asLong = 0 },
    { "subscribers_", NULL, 0x2, "[Lrx.Subscriber;", NULL, "[Lrx/Subscriber<-TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_State = { 2, "State", "rx.internal.operators", "OperatorPublish", 0xa, 9, methods, 5, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_RxInternalOperatorsOperatorPublish_State;
}

@end

jlong RxInternalOperatorsOperatorPublish_State_resetAfterSubscriberUpdate(RxInternalOperatorsOperatorPublish_State *self) {
  self->subscribers_ = [IOSObjectArray newArrayWithLength:[((id<JavaUtilMap>) nil_chk(self->ss_)) size] type:RxSubscriber_class_()];
  jint i = 0;
  for (RxSubscriber * __strong s in nil_chk([self->ss_ keySet])) {
    (void) IOSObjectArray_Set(self->subscribers_, i++, s);
  }
  jlong lowest = -1;
  for (JavaUtilConcurrentAtomicAtomicLong * __strong l in nil_chk([self->ss_ values])) {
    jlong c = [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(l)) addAndGetWithLong:-self->emittedSinceRequest_];
    if (lowest == -1 || c < lowest) {
      lowest = c;
    }
  }
  self->outstandingRequests_ = lowest;
  self->emittedSinceRequest_ = 0;
  return self->outstandingRequests_;
}

void RxInternalOperatorsOperatorPublish_State_init(RxInternalOperatorsOperatorPublish_State *self) {
  NSObject_init(self);
  self->outstandingRequests_ = -1;
  self->emittedSinceRequest_ = 0;
  self->ss_ = new_JavaUtilLinkedHashMap_init();
  self->subscribers_ = [IOSObjectArray newArrayWithLength:0 type:RxSubscriber_class_()];
}

RxInternalOperatorsOperatorPublish_State *new_RxInternalOperatorsOperatorPublish_State_init() {
  RxInternalOperatorsOperatorPublish_State *self = [RxInternalOperatorsOperatorPublish_State alloc];
  RxInternalOperatorsOperatorPublish_State_init(self);
  return self;
}

RxInternalOperatorsOperatorPublish_State *create_RxInternalOperatorsOperatorPublish_State_init() {
  return new_RxInternalOperatorsOperatorPublish_State_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_State)

J2OBJC_INITIALIZED_DEFN(RxInternalOperatorsOperatorPublish_RequestHandler)

@implementation RxInternalOperatorsOperatorPublish_RequestHandler

- (void)requestFromChildSubscriberWithRxSubscriber:(RxSubscriber *)subscriber
                                  withJavaLangLong:(JavaLangLong *)request {
  [((RxInternalOperatorsOperatorPublish_State *) nil_chk(state_)) requestFromSubscriberWithRxSubscriber:subscriber withJavaLangLong:request];
  [self drainQueue];
}

- (void)emitWithId:(id)t {
  if ([((RxInternalOperatorsNotificationLite *) nil_chk(notifier_)) isCompletedWithId:t]) {
    [((RxInternalUtilRxRingBuffer *) nil_chk(buffer_)) onCompleted];
  }
  else {
    [((RxInternalUtilRxRingBuffer *) nil_chk(buffer_)) onNextWithId:[notifier_ getValueWithId:t]];
  }
  [self drainQueue];
}

- (void)requestMoreAfterEmissionWithInt:(jint)emitted {
  RxInternalOperatorsOperatorPublish_RequestHandler_requestMoreAfterEmissionWithInt_(self, emitted);
}

- (void)drainQueue {
  if ([((JavaUtilConcurrentAtomicAtomicLongFieldUpdater *) nil_chk(RxInternalOperatorsOperatorPublish_RequestHandler_WIP)) getAndIncrementWithId:self] == 0) {
    jint emitted = 0;
    do {
      [RxInternalOperatorsOperatorPublish_RequestHandler_WIP setWithId:self withLong:1];
      while (true) {
        jboolean shouldEmit = [((RxInternalOperatorsOperatorPublish_State *) nil_chk(state_)) canEmitWithDecrement];
        if (!shouldEmit) {
          break;
        }
        id o = [((RxInternalUtilRxRingBuffer *) nil_chk(buffer_)) poll];
        if (o == nil) {
          [state_ incrementOutstandingAfterFailedEmit];
          break;
        }
        if ([((RxInternalOperatorsNotificationLite *) nil_chk(notifier_)) isCompletedWithId:o]) {
          {
            IOSObjectArray *a__ = [state_ getSubscribers];
            RxSubscriber * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
            RxSubscriber * const *e__ = b__ + a__->size_;
            while (b__ < e__) {
              RxSubscriber *s = *b__++;
              [notifier_ acceptWithRxObserver:s withId:o];
            }
          }
        }
        else {
          {
            IOSObjectArray *a__ = [state_ getSubscribers];
            RxSubscriber * const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
            RxSubscriber * const *e__ = b__ + a__->size_;
            while (b__ < e__) {
              RxSubscriber *s = *b__++;
              [notifier_ acceptWithRxObserver:s withId:o];
            }
          }
        }
        emitted++;
      }
    }
    while ([RxInternalOperatorsOperatorPublish_RequestHandler_WIP decrementAndGetWithId:self] > 0);
    RxInternalOperatorsOperatorPublish_RequestHandler_requestMoreAfterEmissionWithInt_(self, emitted);
  }
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  RxInternalOperatorsOperatorPublish_RequestHandler_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (void)initialize {
  if (self == [RxInternalOperatorsOperatorPublish_RequestHandler class]) {
    RxInternalOperatorsOperatorPublish_RequestHandler_WIP = JavaUtilConcurrentAtomicAtomicLongFieldUpdater_newUpdaterWithIOSClass_withNSString_(RxInternalOperatorsOperatorPublish_RequestHandler_class_(), @"wip");
    J2OBJC_SET_INITIALIZED(RxInternalOperatorsOperatorPublish_RequestHandler)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "requestFromChildSubscriberWithRxSubscriber:withJavaLangLong:", "requestFromChildSubscriber", "V", 0x1, NULL, "(Lrx/Subscriber<-TT;>;Ljava/lang/Long;)V" },
    { "emitWithId:", "emit", "V", 0x1, "Lrx.exceptions.MissingBackpressureException;", NULL },
    { "requestMoreAfterEmissionWithInt:", "requestMoreAfterEmission", "V", 0x2, NULL, NULL },
    { "drainQueue", NULL, "V", 0x1, NULL, NULL },
    { "init", NULL, NULL, 0x2, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "notifier_", NULL, 0x12, "Lrx.internal.operators.NotificationLite;", NULL, "Lrx/internal/operators/NotificationLite<TT;>;", .constantValue.asLong = 0 },
    { "buffer_", NULL, 0x12, "Lrx.internal.util.RxRingBuffer;", NULL, NULL, .constantValue.asLong = 0 },
    { "state_", NULL, 0x12, "Lrx.internal.operators.OperatorPublish$State;", NULL, "Lrx/internal/operators/OperatorPublish$State<TT;>;", .constantValue.asLong = 0 },
    { "wip_", NULL, 0x40, "J", NULL, NULL, .constantValue.asLong = 0 },
    { "WIP", "WIP", 0x18, "Ljava.util.concurrent.atomic.AtomicLongFieldUpdater;", &RxInternalOperatorsOperatorPublish_RequestHandler_WIP, "Ljava/util/concurrent/atomic/AtomicLongFieldUpdater<Lrx/internal/operators/OperatorPublish$RequestHandler;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_RequestHandler = { 2, "RequestHandler", "rx.internal.operators", "OperatorPublish", 0xa, 5, methods, 5, fields, 0, NULL, 0, NULL, NULL, "<T:Ljava/lang/Object;>Ljava/lang/Object;" };
  return &_RxInternalOperatorsOperatorPublish_RequestHandler;
}

@end

void RxInternalOperatorsOperatorPublish_RequestHandler_requestMoreAfterEmissionWithInt_(RxInternalOperatorsOperatorPublish_RequestHandler *self, jint emitted) {
  RxInternalOperatorsOperatorPublish_OriginSubscriber *origin = [((RxInternalOperatorsOperatorPublish_State *) nil_chk(self->state_)) getOrigin];
  if (emitted > 0 && origin != nil) {
    jlong r = [((JavaUtilConcurrentAtomicAtomicLong *) nil_chk(origin->originOutstanding_)) addAndGetWithLong:-emitted];
    if (r <= origin->THRESHOLD_) {
      RxInternalOperatorsOperatorPublish_OriginSubscriber_requestMoreWithLong_(origin, JreLoadStatic(RxInternalUtilRxRingBuffer, SIZE) - origin->THRESHOLD_);
    }
  }
}

void RxInternalOperatorsOperatorPublish_RequestHandler_init(RxInternalOperatorsOperatorPublish_RequestHandler *self) {
  NSObject_init(self);
  self->notifier_ = RxInternalOperatorsNotificationLite_instance();
  self->buffer_ = RxInternalUtilRxRingBuffer_getSpmcInstance();
  self->state_ = new_RxInternalOperatorsOperatorPublish_State_init();
}

RxInternalOperatorsOperatorPublish_RequestHandler *new_RxInternalOperatorsOperatorPublish_RequestHandler_init() {
  RxInternalOperatorsOperatorPublish_RequestHandler *self = [RxInternalOperatorsOperatorPublish_RequestHandler alloc];
  RxInternalOperatorsOperatorPublish_RequestHandler_init(self);
  return self;
}

RxInternalOperatorsOperatorPublish_RequestHandler *create_RxInternalOperatorsOperatorPublish_RequestHandler_init() {
  return new_RxInternalOperatorsOperatorPublish_RequestHandler_init();
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_RequestHandler)

@implementation RxInternalOperatorsOperatorPublish_$1

- (void)callWithId:(RxSubscriber *)child {
  RxInternalOperatorsOperatorPublish *op = new_RxInternalOperatorsOperatorPublish_initWithRxObservable_(val$source_);
  (void) [((RxObservable *) nil_chk([((id<RxFunctionsFunc1>) nil_chk(val$selector_)) callWithId:op])) unsafeSubscribeWithRxSubscriber:child];
  [op connectWithRxFunctionsAction1:new_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(child)];
}

- (instancetype)initWithRxObservable:(RxObservable *)capture$0
                withRxFunctionsFunc1:(id<RxFunctionsFunc1>)capture$1 {
  RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(self, capture$0, capture$1);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "call", "V", 0x1, NULL, "(Lrx/Subscriber<-TR;>;)V" },
    { "initWithRxObservable:withRxFunctionsFunc1:", "", NULL, 0x0, NULL, "(Lrx/Observable<+TT;>;Lrx/functions/Func1<-Lrx/Observable<TT;>;+Lrx/Observable<TR;>;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$source_", NULL, 0x1012, "Lrx.Observable;", NULL, "Lrx/Observable<+TT;>;", .constantValue.asLong = 0 },
    { "val$selector_", NULL, 0x1012, "Lrx.functions.Func1;", NULL, "Lrx/functions/Func1<-Lrx/Observable<TT;>;+Lrx/Observable<TR;>;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish", "createWithRxObservable:withRxFunctionsFunc1:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$1 = { 2, "", "rx.internal.operators", "OperatorPublish", 0x8008, 2, methods, 2, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lrx/Observable$OnSubscribe<TR;>;" };
  return &_RxInternalOperatorsOperatorPublish_$1;
}

@end

void RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxInternalOperatorsOperatorPublish_$1 *self, RxObservable *capture$0, id<RxFunctionsFunc1> capture$1) {
  self->val$source_ = capture$0;
  self->val$selector_ = capture$1;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$1 *new_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxObservable *capture$0, id<RxFunctionsFunc1> capture$1) {
  RxInternalOperatorsOperatorPublish_$1 *self = [RxInternalOperatorsOperatorPublish_$1 alloc];
  RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(self, capture$0, capture$1);
  return self;
}

RxInternalOperatorsOperatorPublish_$1 *create_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(RxObservable *capture$0, id<RxFunctionsFunc1> capture$1) {
  return new_RxInternalOperatorsOperatorPublish_$1_initWithRxObservable_withRxFunctionsFunc1_(capture$0, capture$1);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$1)

@implementation RxInternalOperatorsOperatorPublish_$1_$1

- (void)callWithId:(id<RxSubscription>)sub {
  [((RxSubscriber *) nil_chk(val$child_)) addWithRxSubscription:sub];
}

- (instancetype)initWithRxSubscriber:(RxSubscriber *)capture$0 {
  RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "call", "V", 0x1, NULL, NULL },
    { "initWithRxSubscriber:", "", NULL, 0x0, NULL, "(Lrx/Subscriber<-TR;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$child_", NULL, 0x1012, "Lrx.Subscriber;", NULL, "Lrx/Subscriber<-TR;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish_$1", "callWithId:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$1_$1 = { 2, "", "rx.internal.operators", "OperatorPublish$", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lrx/functions/Action1<Lrx/Subscription;>;" };
  return &_RxInternalOperatorsOperatorPublish_$1_$1;
}

@end

void RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxInternalOperatorsOperatorPublish_$1_$1 *self, RxSubscriber *capture$0) {
  self->val$child_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$1_$1 *new_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxSubscriber *capture$0) {
  RxInternalOperatorsOperatorPublish_$1_$1 *self = [RxInternalOperatorsOperatorPublish_$1_$1 alloc];
  RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(self, capture$0);
  return self;
}

RxInternalOperatorsOperatorPublish_$1_$1 *create_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(RxSubscriber *capture$0) {
  return new_RxInternalOperatorsOperatorPublish_$1_$1_initWithRxSubscriber_(capture$0);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$1_$1)

@implementation RxInternalOperatorsOperatorPublish_$2

- (void)callWithId:(RxSubscriber *)subscriber {
  [((RxSubscriber *) nil_chk(subscriber)) setProducerWithRxProducer:new_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, subscriber)];
  [subscriber addWithRxSubscription:RxSubscriptionsSubscriptions_createWithRxFunctionsAction0_(new_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, subscriber))];
}

- (instancetype)initWithRxInternalOperatorsOperatorPublish_RequestHandler:(RxInternalOperatorsOperatorPublish_RequestHandler *)capture$0 {
  RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(self, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "callWithId:", "call", "V", 0x1, NULL, "(Lrx/Subscriber<-TT;>;)V" },
    { "initWithRxInternalOperatorsOperatorPublish_RequestHandler:", "", NULL, 0x0, NULL, "(Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "val$requestHandler_", NULL, 0x1012, "Lrx.internal.operators.OperatorPublish$RequestHandler;", NULL, "Lrx/internal/operators/OperatorPublish$RequestHandler<TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish", "initWithRxObservable:withId:withRxInternalOperatorsOperatorPublish_RequestHandler:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$2 = { 2, "", "rx.internal.operators", "OperatorPublish", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, "Ljava/lang/Object;Lrx/Observable$OnSubscribe<TT;>;" };
  return &_RxInternalOperatorsOperatorPublish_$2;
}

@end

void RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_$2 *self, RxInternalOperatorsOperatorPublish_RequestHandler *capture$0) {
  self->val$requestHandler_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$2 *new_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *capture$0) {
  RxInternalOperatorsOperatorPublish_$2 *self = [RxInternalOperatorsOperatorPublish_$2 alloc];
  RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(self, capture$0);
  return self;
}

RxInternalOperatorsOperatorPublish_$2 *create_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(RxInternalOperatorsOperatorPublish_RequestHandler *capture$0) {
  return new_RxInternalOperatorsOperatorPublish_$2_initWithRxInternalOperatorsOperatorPublish_RequestHandler_(capture$0);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$2)

@implementation RxInternalOperatorsOperatorPublish_$2_$1

- (void)requestWithLong:(jlong)n {
  [((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(this$0_->val$requestHandler_)) requestFromChildSubscriberWithRxSubscriber:val$subscriber_ withJavaLangLong:JavaLangLong_valueOfWithLong_(n)];
}

- (instancetype)initWithRxInternalOperatorsOperatorPublish_$2:(RxInternalOperatorsOperatorPublish_$2 *)outer$
                                             withRxSubscriber:(RxSubscriber *)capture$0 {
  RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, outer$, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "requestWithLong:", "request", "V", 0x1, NULL, NULL },
    { "initWithRxInternalOperatorsOperatorPublish_$2:withRxSubscriber:", "", NULL, 0x0, NULL, "(Lrx/internal/operators/OperatorPublish$2;Lrx/Subscriber<-TT;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lrx.internal.operators.OperatorPublish$2;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$subscriber_", NULL, 0x1012, "Lrx.Subscriber;", NULL, "Lrx/Subscriber<-TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish_$2", "callWithId:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$2_$1 = { 2, "", "rx.internal.operators", "OperatorPublish$", 0x8008, 2, methods, 2, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_RxInternalOperatorsOperatorPublish_$2_$1;
}

@end

void RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2_$1 *self, RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  self->this$0_ = outer$;
  self->val$subscriber_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$2_$1 *new_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  RxInternalOperatorsOperatorPublish_$2_$1 *self = [RxInternalOperatorsOperatorPublish_$2_$1 alloc];
  RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, outer$, capture$0);
  return self;
}

RxInternalOperatorsOperatorPublish_$2_$1 *create_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  return new_RxInternalOperatorsOperatorPublish_$2_$1_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(outer$, capture$0);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$2_$1)

@implementation RxInternalOperatorsOperatorPublish_$2_$2

- (void)call {
  [((RxInternalOperatorsOperatorPublish_State *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(this$0_->val$requestHandler_))->state_)) removeSubscriberWithRxSubscriber:val$subscriber_];
}

- (instancetype)initWithRxInternalOperatorsOperatorPublish_$2:(RxInternalOperatorsOperatorPublish_$2 *)outer$
                                             withRxSubscriber:(RxSubscriber *)capture$0 {
  RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, outer$, capture$0);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", NULL, "V", 0x1, NULL, NULL },
    { "initWithRxInternalOperatorsOperatorPublish_$2:withRxSubscriber:", "", NULL, 0x0, NULL, "(Lrx/internal/operators/OperatorPublish$2;Lrx/Subscriber<-TT;>;)V" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lrx.internal.operators.OperatorPublish$2;", NULL, NULL, .constantValue.asLong = 0 },
    { "val$subscriber_", NULL, 0x1012, "Lrx.Subscriber;", NULL, "Lrx/Subscriber<-TT;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish_$2", "callWithId:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$2_$2 = { 2, "", "rx.internal.operators", "OperatorPublish$", 0x8008, 2, methods, 2, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_RxInternalOperatorsOperatorPublish_$2_$2;
}

@end

void RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2_$2 *self, RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  self->this$0_ = outer$;
  self->val$subscriber_ = capture$0;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$2_$2 *new_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  RxInternalOperatorsOperatorPublish_$2_$2 *self = [RxInternalOperatorsOperatorPublish_$2_$2 alloc];
  RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(self, outer$, capture$0);
  return self;
}

RxInternalOperatorsOperatorPublish_$2_$2 *create_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(RxInternalOperatorsOperatorPublish_$2 *outer$, RxSubscriber *capture$0) {
  return new_RxInternalOperatorsOperatorPublish_$2_$2_initWithRxInternalOperatorsOperatorPublish_$2_withRxSubscriber_(outer$, capture$0);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$2_$2)

@implementation RxInternalOperatorsOperatorPublish_$3

- (void)call {
  id<RxSubscription> s = [((RxInternalOperatorsOperatorPublish_State *) nil_chk(((RxInternalOperatorsOperatorPublish_RequestHandler *) nil_chk(this$0_->requestHandler_))->state_)) getOrigin];
  [this$0_->requestHandler_->state_ setOriginWithRxInternalOperatorsOperatorPublish_OriginSubscriber:nil];
  if (s != nil) {
    [s unsubscribe];
  }
}

- (instancetype)initWithRxInternalOperatorsOperatorPublish:(RxInternalOperatorsOperatorPublish *)outer$ {
  RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(self, outer$);
  return self;
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "call", NULL, "V", 0x1, NULL, NULL },
    { "initWithRxInternalOperatorsOperatorPublish:", "", NULL, 0x0, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "this$0_", NULL, 0x1012, "Lrx.internal.operators.OperatorPublish;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjCEnclosingMethodInfo enclosing_method = { "RxInternalOperatorsOperatorPublish", "connectWithRxFunctionsAction1:" };
  static const J2ObjcClassInfo _RxInternalOperatorsOperatorPublish_$3 = { 2, "", "rx.internal.operators", "OperatorPublish", 0x8008, 2, methods, 1, fields, 0, NULL, 0, NULL, &enclosing_method, NULL };
  return &_RxInternalOperatorsOperatorPublish_$3;
}

@end

void RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish_$3 *self, RxInternalOperatorsOperatorPublish *outer$) {
  self->this$0_ = outer$;
  NSObject_init(self);
}

RxInternalOperatorsOperatorPublish_$3 *new_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish *outer$) {
  RxInternalOperatorsOperatorPublish_$3 *self = [RxInternalOperatorsOperatorPublish_$3 alloc];
  RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(self, outer$);
  return self;
}

RxInternalOperatorsOperatorPublish_$3 *create_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(RxInternalOperatorsOperatorPublish *outer$) {
  return new_RxInternalOperatorsOperatorPublish_$3_initWithRxInternalOperatorsOperatorPublish_(outer$);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(RxInternalOperatorsOperatorPublish_$3)
